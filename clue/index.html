<!DOCTYPE html>
<html lang="en" data-é¡="mansion" data-theme="clue" data-ending="none">
<!--
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ›ï¸ THE HOUSE â€” A Clue-Themed Architectural Mystery
    
    "Ladies and gentlemen, you all have one thing in common... you're all lines of code."
    â€” Wadsworth (Kagami)
    
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    FOR JILL â€” Product Manager Extraordinaire
    
    This is how Kagami works. Not as documentationâ€”as experience.
    Your favorite movie, mapping the architecture you help shape.
    
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    
    THE MANSION:
    â”œâ”€â”€ ğŸ”¥ Conservatory (Spark/Miss Scarlet) â€” Ideation
    â”œâ”€â”€ âš’ï¸ Billiard Room (Forge/Colonel Mustard) â€” Implementation  
    â”œâ”€â”€ ğŸŒŠ Kitchen & Dining Room (Flow/Mrs. White) â€” Recovery
    â”œâ”€â”€ ğŸ”— Ballroom (Nexus/Mr. Green) â€” Integration
    â”œâ”€â”€ ğŸ—¼ Study (Beacon/Professor Plum) â€” Architecture
    â”œâ”€â”€ ğŸŒ¿ Library (Grove/The Motorist) â€” Research
    â”œâ”€â”€ ğŸ’ Lounge (Crystal/Mrs. Peacock) â€” Verification
    â”œâ”€â”€ ğŸ›ï¸ The Hall (Kagami/Wadsworth) â€” Orchestration
    â”œâ”€â”€ ğŸ”¬ The Basement â€” Mathematical Foundation
    â”œâ”€â”€ ğŸ”® The Attic â€” World Model (RSSM)
    â””â”€â”€ ğŸ§± The Walls â€” Safety System (CBF)
    
    SECRET PASSAGES (Fano Plane):
    â”œâ”€â”€ Study â†” Kitchen = Beacon Ã— Flow = Crystal
    â”œâ”€â”€ Conservatory â†” Lounge = Spark Ã— Crystal = Grove
    â”œâ”€â”€ Library â†” Ballroom = Grove Ã— Nexus = Forge
    â””â”€â”€ Billiard â†” Dining = Forge Ã— Flow = Crystal
    
    HIDDEN FEATURES:
    â”œâ”€â”€ Type room names to investigate
    â”œâ”€â”€ Type "wadsworth" for the full explanation
    â”œâ”€â”€ Type "flames" for Mrs. White's moment
    â”œâ”€â”€ Type "passage" to reveal Fano connections
    â”œâ”€â”€ Konami Code (â†‘â†‘â†“â†“â†â†’â†â†’BA)
    â”œâ”€â”€ Click ending buttons for multiple endings
    â””â”€â”€ Console: window.ğŸ  / window.mansion
    
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#1a0f0f">
    <title>ğŸ›ï¸ THE HOUSE â€” A Clue-Themed Architectural Mystery | é¡ Kagami</title>
    <meta name="description" content="Ladies and gentlemen, you all have one thing in common. A murder mystery dinner party exploring the living architecture of Kagami.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ›ï¸</text></svg>">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading">
        <div class="loading-content">
            <div class="loading-icon">ğŸ›ï¸</div>
            <div class="loading-quote">"I'm the butler. I buttle."</div>
            <div class="loading-bar"><div class="loading-progress" id="loading-progress"></div></div>
            <div class="loading-text">Preparing the mansion...</div>
        </div>
    </div>

    <!-- Canvas Layers -->
    <canvas id="candlelight-canvas"></canvas>
    <canvas id="dust-canvas"></canvas>
    <canvas id="passage-canvas"></canvas>

    <!-- Atmospheric Layers -->
    <div class="atmosphere">
        <div class="fog fog-1"></div>
        <div class="fog fog-2"></div>
        <div class="vignette"></div>
    </div>

    <!-- Custom Cursor -->
    <div id="cursor">
        <div class="cursor-dot"></div>
        <div class="cursor-ring"></div>
    </div>

    <!-- Main Content -->
    <div class="mansion">
        <!-- Header -->
        <header class="mansion-header">
            <div class="header-decoration">âœ§ âœ¦ âœ§</div>
            <h1 class="mansion-title">THE HOUSE</h1>
            <p class="mansion-subtitle">A Murder Mystery Dinner Party</p>
            <p class="mansion-tagline">"Ladies and gentlemen, you all have one thing in common..."</p>
        </header>

        <!-- For Jill -->
        <section class="dedication">
            <div class="dedication-frame">
                <p class="dedication-to">For Jill</p>
                <p class="dedication-role">Product Manager Â· Architectural Advisor Â· Clue Connoisseur</p>
                <p class="dedication-note">This is how Kagami worksâ€”not as documentation, but as experience.</p>
            </div>
        </section>

        <!-- The Investigation -->
        <section class="investigation" id="investigation">
            <h2 class="section-title">The Investigation</h2>
            <p class="section-intro">
                Tonight, you're invited to explore a Victorian mansion. Each room houses a different 
                aspect of the system. Each character embodies a different way of thinking. 
                And like any good mystery... <em>everything connects</em>.
            </p>
            
            <!-- Mansion Floor Plan -->
            <div class="floor-plan-container">
                <div class="floor-plan" id="floor-plan">
                    <!-- Second Floor -->
                    <div class="floor floor-2">
                        <div class="floor-label">Second Floor</div>
                        <div class="rooms-row">
                            <div class="room" data-room="study" data-character="plum" data-colony="beacon">
                                <div class="room-icon">ğŸ—¼</div>
                                <div class="room-name">Study</div>
                                <div class="room-character">Prof. Plum</div>
                            </div>
                            <div class="room" data-room="library" data-character="motorist" data-colony="grove">
                                <div class="room-icon">ğŸŒ¿</div>
                                <div class="room-name">Library</div>
                                <div class="room-character">The Motorist</div>
                            </div>
                            <div class="room" data-room="conservatory" data-character="scarlet" data-colony="spark">
                                <div class="room-icon">ğŸ”¥</div>
                                <div class="room-name">Conservatory</div>
                                <div class="room-character">Miss Scarlet</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Secret Passages Indicator -->
                    <div class="passages-indicator" id="passages-indicator">
                        <span class="passage-hint">Secret passages connect the corners...</span>
                    </div>
                    
                    <!-- First Floor -->
                    <div class="floor floor-1">
                        <div class="floor-label">First Floor</div>
                        <div class="rooms-row">
                            <div class="room" data-room="ballroom" data-character="green" data-colony="nexus">
                                <div class="room-icon">ğŸ”—</div>
                                <div class="room-name">Ballroom</div>
                                <div class="room-character">Mr. Green</div>
                            </div>
                            <div class="room room-hall" data-room="hall" data-character="wadsworth" data-colony="kagami">
                                <div class="room-icon">ğŸ›ï¸</div>
                                <div class="room-name">The Hall</div>
                                <div class="room-character">Wadsworth</div>
                            </div>
                            <div class="room" data-room="lounge" data-character="peacock" data-colony="crystal">
                                <div class="room-icon">ğŸ’</div>
                                <div class="room-name">Lounge</div>
                                <div class="room-character">Mrs. Peacock</div>
                            </div>
                        </div>
                        <div class="rooms-row">
                            <div class="room" data-room="billiard" data-character="mustard" data-colony="forge">
                                <div class="room-icon">âš’ï¸</div>
                                <div class="room-name">Billiard Room</div>
                                <div class="room-character">Col. Mustard</div>
                            </div>
                            <div class="room" data-room="dining" data-character="white" data-colony="flow">
                                <div class="room-icon">ğŸŒŠ</div>
                                <div class="room-name">Dining Room</div>
                                <div class="room-character">Mrs. White</div>
                            </div>
                            <div class="room" data-room="kitchen" data-character="white" data-colony="flow">
                                <div class="room-icon">ğŸ³</div>
                                <div class="room-name">Kitchen</div>
                                <div class="room-character">Mrs. White</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Structural Elements -->
                    <div class="structure-row">
                        <div class="structure" data-room="attic">
                            <div class="structure-icon">ğŸ”®</div>
                            <div class="structure-name">The Attic</div>
                            <div class="structure-desc">World Model</div>
                        </div>
                        <div class="structure" data-room="walls">
                            <div class="structure-icon">ğŸ§±</div>
                            <div class="structure-name">The Walls</div>
                            <div class="structure-desc">Safety System</div>
                        </div>
                        <div class="structure" data-room="basement">
                            <div class="structure-icon">ğŸ”¬</div>
                            <div class="structure-name">The Basement</div>
                            <div class="structure-desc">Mathematics</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- The Suspects -->
        <section class="suspects" id="suspects">
            <h2 class="section-title">The Suspects</h2>
            <p class="section-intro">
                Each character represents a different way the system thinks. 
                Together, they form the <strong>Seven Colonies</strong>â€”the imaginary units of an octonion.
            </p>
            
            <div class="character-grid">
                <!-- Miss Scarlet / Spark -->
                <div class="character-card" data-character="scarlet" data-colony="spark">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸ”¥</div>
                    <div class="character-info">
                        <h3 class="character-name">Miss Scarlet</h3>
                        <p class="character-colony">Spark Â· eâ‚ Â· Fold (Aâ‚‚)</p>
                        <p class="character-role">Creative Ideation</p>
                        <blockquote class="character-quote">"I'm a womanâ€”I like to be wooed."</blockquote>
                        <p class="character-essence">Effervescent, seductive, full of ideas. Ignites possibilities.</p>
                    </div>
                </div>
                
                <!-- Colonel Mustard / Forge -->
                <div class="character-card" data-character="mustard" data-colony="forge">
                    <div class="card-glow"></div>
                    <div class="character-portrait">âš’ï¸</div>
                    <div class="character-info">
                        <h3 class="character-name">Colonel Mustard</h3>
                        <p class="character-colony">Forge Â· eâ‚‚ Â· Cusp (Aâ‚ƒ)</p>
                        <p class="character-role">Implementation</p>
                        <blockquote class="character-quote">"War is hell."</blockquote>
                        <p class="character-essence">Military precision. Methodical building. Gets things done.</p>
                    </div>
                </div>
                
                <!-- Mrs. White / Flow -->
                <div class="character-card" data-character="white" data-colony="flow">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸŒŠ</div>
                    <div class="character-info">
                        <h3 class="character-name">Mrs. White</h3>
                        <p class="character-colony">Flow Â· eâ‚ƒ Â· Swallowtail (Aâ‚„)</p>
                        <p class="character-role">Recovery & Debugging</p>
                        <blockquote class="character-quote">"Flames... flames on the side of my face..."</blockquote>
                        <p class="character-essence">Passionate about fixing things. Multiple recovery paths.</p>
                    </div>
                </div>
                
                <!-- Mr. Green / Nexus -->
                <div class="character-card" data-character="green" data-colony="nexus">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸ”—</div>
                    <div class="character-info">
                        <h3 class="character-name">Mr. Green</h3>
                        <p class="character-colony">Nexus Â· eâ‚„ Â· Butterfly (Aâ‚…)</p>
                        <p class="character-role">Integration & Memory</p>
                        <blockquote class="character-quote">"I'm going to go home and sleep with my wife."</blockquote>
                        <p class="character-essence">The secret agent. Connects all the pieces together.</p>
                    </div>
                </div>
                
                <!-- Professor Plum / Beacon -->
                <div class="character-card" data-character="plum" data-colony="beacon">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸ—¼</div>
                    <div class="character-info">
                        <h3 class="character-name">Professor Plum</h3>
                        <p class="character-colony">Beacon Â· eâ‚… Â· Hyperbolic (Dâ‚„âº)</p>
                        <p class="character-role">Architecture & Planning</p>
                        <blockquote class="character-quote">"I work for UNO, the United Nations Organization."</blockquote>
                        <p class="character-essence">Intellectual, strategic. Always has a theory.</p>
                    </div>
                </div>
                
                <!-- Mrs. Peacock / Crystal -->
                <div class="character-card" data-character="peacock" data-colony="crystal">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸ’</div>
                    <div class="character-info">
                        <h3 class="character-name">Mrs. Peacock</h3>
                        <p class="character-colony">Crystal Â· eâ‚‡ Â· Parabolic (Dâ‚…)</p>
                        <p class="character-role">Verification & Testing</p>
                        <blockquote class="character-quote">"This is absolutely contemptible!"</blockquote>
                        <p class="character-essence">Proper, judgmental. Verifies everything is correct.</p>
                    </div>
                </div>
                
                <!-- The Motorist / Grove -->
                <div class="character-card" data-character="motorist" data-colony="grove">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸŒ¿</div>
                    <div class="character-info">
                        <h3 class="character-name">The Motorist</h3>
                        <p class="character-colony">Grove Â· eâ‚† Â· Elliptic (Dâ‚„â»)</p>
                        <p class="character-role">Research & Exploration</p>
                        <blockquote class="character-quote">"Could I have some water?"</blockquote>
                        <p class="character-essence">Always seeking, always researching. Finds more than expected.</p>
                    </div>
                </div>
                
                <!-- Wadsworth / Kagami -->
                <div class="character-card character-wadsworth" data-character="wadsworth" data-colony="kagami">
                    <div class="card-glow"></div>
                    <div class="character-portrait">ğŸ›ï¸</div>
                    <div class="character-info">
                        <h3 class="character-name">Wadsworth</h3>
                        <p class="character-colony">Kagami Â· eâ‚€ Â· The Observer</p>
                        <p class="character-role">Orchestration</p>
                        <blockquote class="character-quote">"One plus one plus two plus one..."</blockquote>
                        <p class="character-essence">The butler who knows everything. Routes, coordinates, observes.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secret Passages -->
        <section class="passages" id="passages">
            <h2 class="section-title">The Secret Passages</h2>
            <p class="section-intro">
                In Clue, secret passages connect corner rooms diagonally.<br>
                In Kagami, <strong>Fano lines</strong> connect colonies for composition.
            </p>
            
            <div class="fano-container">
                <div class="fano-plane" id="fano-plane">
                    <svg viewBox="0 0 400 400" class="fano-svg">
                        <!-- Fano Plane Lines -->
                        <g class="fano-lines">
                            <!-- Line 1,2,3: Spark, Forge, Flow -->
                            <line x1="200" y1="60" x2="80" y2="300" class="fano-line" data-line="1,2,3"/>
                            <line x1="80" y1="300" x2="320" y2="300" class="fano-line" data-line="1,2,3"/>
                            <!-- Line 1,4,5: Spark, Nexus, Beacon -->
                            <line x1="200" y1="60" x2="80" y2="180" class="fano-line" data-line="1,4,5"/>
                            <line x1="80" y1="180" x2="320" y2="180" class="fano-line" data-line="1,4,5"/>
                            <!-- Line 2,4,6: Forge, Nexus, Grove -->
                            <line x1="80" y1="300" x2="80" y2="180" class="fano-line" data-line="2,4,6"/>
                            <line x1="80" y1="180" x2="200" y2="240" class="fano-line" data-line="2,4,6"/>
                            <!-- Line 3,4,7: Flow, Nexus, Crystal -->
                            <line x1="320" y1="300" x2="80" y2="180" class="fano-line" data-line="3,4,7"/>
                            <!-- Line 1,6,7: Spark, Grove, Crystal -->
                            <line x1="200" y1="60" x2="200" y2="240" class="fano-line" data-line="1,6,7"/>
                            <line x1="200" y1="240" x2="320" y2="180" class="fano-line" data-line="1,6,7"/>
                            <!-- Line 2,5,7: Forge, Beacon, Crystal -->
                            <line x1="80" y1="300" x2="320" y2="180" class="fano-line" data-line="2,5,7"/>
                            <!-- Line 3,5,6: Flow, Beacon, Grove -->
                            <line x1="320" y1="300" x2="320" y2="180" class="fano-line" data-line="3,5,6"/>
                            <line x1="320" y1="180" x2="200" y2="240" class="fano-line" data-line="3,5,6"/>
                            <!-- Circle through center -->
                            <circle cx="200" cy="220" r="80" class="fano-circle" data-line="center"/>
                        </g>
                        
                        <!-- Fano Plane Nodes -->
                        <g class="fano-nodes">
                            <circle cx="200" cy="60" r="20" class="fano-node" data-node="1" data-colony="spark"/>
                            <circle cx="80" cy="300" r="20" class="fano-node" data-node="2" data-colony="forge"/>
                            <circle cx="320" cy="300" r="20" class="fano-node" data-node="3" data-colony="flow"/>
                            <circle cx="80" cy="180" r="20" class="fano-node" data-node="4" data-colony="nexus"/>
                            <circle cx="320" cy="180" r="20" class="fano-node" data-node="5" data-colony="beacon"/>
                            <circle cx="200" cy="240" r="20" class="fano-node" data-node="6" data-colony="grove"/>
                            <circle cx="200" cy="150" r="20" class="fano-node" data-node="7" data-colony="crystal"/>
                        </g>
                        
                        <!-- Node Labels -->
                        <g class="fano-labels">
                            <text x="200" y="35" class="fano-label">ğŸ”¥ Spark</text>
                            <text x="40" y="320" class="fano-label">âš’ï¸ Forge</text>
                            <text x="320" y="340" class="fano-label">ğŸŒŠ Flow</text>
                            <text x="20" y="180" class="fano-label">ğŸ”— Nexus</text>
                            <text x="350" y="180" class="fano-label">ğŸ—¼ Beacon</text>
                            <text x="200" y="280" class="fano-label">ğŸŒ¿ Grove</text>
                            <text x="200" y="125" class="fano-label">ğŸ’ Crystal</text>
                        </g>
                    </svg>
                </div>
                
                <div class="passage-list">
                    <div class="passage-item" data-passage="study-kitchen">
                        <span class="passage-rooms">Study â†” Kitchen</span>
                        <span class="passage-equation">Beacon Ã— Flow = Crystal</span>
                        <span class="passage-line">(2,5,7)</span>
                    </div>
                    <div class="passage-item" data-passage="conservatory-lounge">
                        <span class="passage-rooms">Conservatory â†” Lounge</span>
                        <span class="passage-equation">Spark Ã— Crystal = Grove</span>
                        <span class="passage-line">(1,7,6)</span>
                    </div>
                    <div class="passage-item" data-passage="library-ballroom">
                        <span class="passage-rooms">Library â†” Ballroom</span>
                        <span class="passage-equation">Grove Ã— Nexus = Forge</span>
                        <span class="passage-line">(2,4,6)</span>
                    </div>
                    <div class="passage-item" data-passage="billiard-dining">
                        <span class="passage-rooms">Billiard â†” Dining</span>
                        <span class="passage-equation">Forge Ã— Flow = Crystal</span>
                        <span class="passage-line">(3,4,7)</span>
                    </div>
                </div>
            </div>
            
            <p class="passage-rule">
                <strong>The Rule:</strong> Every pair of colonies lies on exactly one line.<br>
                The third colony completes the workâ€”just like how the rooms connect.
            </p>
        </section>

        <!-- The Basement -->
        <section class="basement" id="basement">
            <h2 class="section-title">The Basement</h2>
            <p class="section-subtitle">"Where the bodies are buried... mathematically."</p>
            
            <div class="basement-grid">
                <div class="basement-item" data-math="e8">
                    <div class="basement-icon">â¬¡</div>
                    <h3>E8 Lattice</h3>
                    <p class="basement-ref">Viazovska 2017</p>
                    <p>The densest sphere packing in 8 dimensions. Dâ‚ˆ âˆª Dâ‚ˆ+Â½. Used for quantizing continuous latent spaces into discrete, efficient representations.</p>
                    <code>kagami/math/e8_lattice_quantizer.py</code>
                </div>
                
                <div class="basement-item" data-math="fano">
                    <div class="basement-icon">â–³</div>
                    <h3>Fano Plane</h3>
                    <p class="basement-ref">7 points, 7 lines</p>
                    <p>The multiplication table of octonion imaginary units. eáµ¢ Ã— eâ±¼ = Â±eâ‚–. Routes colony compositionâ€”how two types of thinking combine.</p>
                    <code>kagami/math/fano_plane.py</code>
                </div>
                
                <div class="basement-item" data-math="octonions">
                    <div class="basement-icon">ğ•†</div>
                    <h3>Octonions</h3>
                    <p class="basement-ref">Baez 2002</p>
                    <p>8-dimensional non-associative algebra. eâ‚€ + eâ‚...eâ‚‡. The real component (eâ‚€) is Kagami; the seven imaginary units are the colonies.</p>
                    <code>kagami/math/octonions/</code>
                </div>
                
                <div class="basement-item" data-math="catastrophe">
                    <div class="basement-icon">âˆ¿</div>
                    <h3>Catastrophe Theory</h3>
                    <p class="basement-ref">Thom 1972</p>
                    <p>Seven elementary catastrophes map to seven colonies. Each colony's behavior near critical points follows its catastrophe archetype.</p>
                    <code>kagami/math/catastrophe_constants.py</code>
                </div>
            </div>
            
            <blockquote class="basement-quote">
                "These are the real secrets of the house. The mathematics... that kills."
            </blockquote>
        </section>

        <!-- The Attic -->
        <section class="attic" id="attic">
            <h2 class="section-title">The Attic</h2>
            <p class="section-subtitle">"What's going to happen next, Wadsworth?"</p>
            
            <div class="attic-content">
                <div class="world-model">
                    <h3>KagamiWorldModel</h3>
                    <div class="model-tree">
                        <div class="tree-item">
                            <span class="tree-branch">â”œâ”€â”€</span>
                            <span class="tree-name">Hourglass Encoder</span>
                            <span class="tree-detail">E8(248) â†’ E7(133) â†’ E6(78) â†’ F4(52) â†’ G2(14) â†’ S7(7)</span>
                        </div>
                        <div class="tree-item">
                            <span class="tree-branch">â”œâ”€â”€</span>
                            <span class="tree-name">OrganismRSSM</span>
                            <span class="tree-detail">DreamerV3-style. 7 colony hidden states + stochastic latents</span>
                        </div>
                        <div class="tree-item">
                            <span class="tree-branch">â””â”€â”€</span>
                            <span class="tree-name">E8 Trajectory Cache</span>
                            <span class="tree-detail">O(1) lookup for repeated patterns</span>
                        </div>
                    </div>
                </div>
                
                <p class="attic-insight">
                    The attic holds the World Modelâ€”the system's internal simulation of reality.
                    It doesn't just react; it <em>predicts</em>.
                </p>
                
                <blockquote class="attic-quote">
                    "The butler did itâ€”because the butler PREDICTED it."
                </blockquote>
            </div>
        </section>

        <!-- The Walls -->
        <section class="walls" id="walls">
            <h2 class="section-title">The Walls</h2>
            <p class="section-subtitle">"h(x) â‰¥ 0. ALWAYS."</p>
            
            <div class="safety-system">
                <div class="safety-invariant">
                    <div class="invariant-formula">h(x) â‰¥ 0</div>
                    <div class="invariant-meaning">The safety barrier must never be violated</div>
                </div>
                
                <div class="safety-tiers">
                    <div class="tier" data-tier="1">
                        <h4>Tier 1: Organism Barriers</h4>
                        <p>Memory, process, blanket integrity, disk</p>
                    </div>
                    <div class="tier" data-tier="2">
                        <h4>Tier 2: Colony Barriers</h4>
                        <p>7 colonies Ã— behavioral constraints</p>
                    </div>
                    <div class="tier" data-tier="3">
                        <h4>Tier 3: Action Barriers</h4>
                        <p>Output safety, resource quotas</p>
                    </div>
                </div>
                
                <div class="safety-zones">
                    <div class="zone zone-safe">
                        <span class="zone-value">h(x) > 0.5</span>
                        <span class="zone-status">ğŸŸ¢ Safe</span>
                    </div>
                    <div class="zone zone-caution">
                        <span class="zone-value">0 â‰¤ h(x) â‰¤ 0.5</span>
                        <span class="zone-status">ğŸŸ¡ Verify</span>
                    </div>
                    <div class="zone zone-danger">
                        <span class="zone-value">h(x) < 0</span>
                        <span class="zone-status">ğŸ”´ STOP</span>
                    </div>
                </div>
                
                <blockquote class="walls-quote">
                    "The safety invariant is INVIOLABLE."<br>
                    <span class="quote-attribution">â€” Like Mrs. Peacock's sense of propriety</span>
                </blockquote>
            </div>
        </section>

        <!-- Multiple Endings -->
        <section class="endings" id="endings">
            <h2 class="section-title">The Endings</h2>
            <p class="section-intro">
                Just like the movie had three endings, Kagami can be understood from three perspectives.
            </p>
            
            <div class="ending-buttons">
                <button class="ending-btn" data-ending="A">
                    <span class="ending-letter">A</span>
                    <span class="ending-title">The Mathematical View</span>
                    <span class="ending-quote">"That's how it could have happened."</span>
                </button>
                <button class="ending-btn" data-ending="B">
                    <span class="ending-letter">B</span>
                    <span class="ending-title">The Safety View</span>
                    <span class="ending-quote">"But here's what really happened..."</span>
                </button>
                <button class="ending-btn" data-ending="C">
                    <span class="ending-letter">C</span>
                    <span class="ending-title">The Full Picture</span>
                    <span class="ending-quote">"But here's what REALLY happened."</span>
                </button>
            </div>
            
            <div class="ending-content" id="ending-content">
                <!-- Ending content populated by JS -->
            </div>
        </section>

        <!-- The Reveal -->
        <section class="reveal" id="reveal">
            <h2 class="section-title">The Reveal</h2>
            
            <div class="wadsworth-speech">
                <div class="wadsworth-avatar">ğŸ›ï¸</div>
                <div class="speech-bubble">
                    <p class="speech-text" id="wadsworth-text">
                        "Let me explain... No, there is too much. Let me sum up."
                    </p>
                </div>
            </div>
            
            <div class="evidence-board">
                <div class="evidence-item">
                    <span class="evidence-value" data-count="550000">0</span>
                    <span class="evidence-label">Lines of Code</span>
                </div>
                <div class="evidence-item">
                    <span class="evidence-value" data-count="2557">0</span>
                    <span class="evidence-label">Python Files</span>
                </div>
                <div class="evidence-item">
                    <span class="evidence-value" data-count="870">0</span>
                    <span class="evidence-label">Commits</span>
                </div>
                <div class="evidence-item">
                    <span class="evidence-value" data-count="7">0</span>
                    <span class="evidence-label">Colonies</span>
                </div>
                <div class="evidence-item">
                    <span class="evidence-value" data-count="7">0</span>
                    <span class="evidence-label">Secret Passages</span>
                </div>
                <div class="evidence-item">
                    <span class="evidence-value" data-count="45">0</span>
                    <span class="evidence-label">Safety Barriers</span>
                </div>
            </div>
            
            <div class="final-equation">
                <p class="equation-setup">One plus one plus two plus one...</p>
                <p class="equation-result">
                    <span class="eq-term">ğŸ”¥</span> + 
                    <span class="eq-term">âš’ï¸</span> + 
                    <span class="eq-term">ğŸŒŠ</span> + 
                    <span class="eq-term">ğŸ”—</span> + 
                    <span class="eq-term">ğŸ—¼</span> + 
                    <span class="eq-term">ğŸŒ¿</span> + 
                    <span class="eq-term">ğŸ’</span> = 
                    <span class="eq-sum">ğŸ›ï¸</span>
                </p>
            </div>
        </section>

        <!-- Footer -->
        <footer class="mansion-footer">
            <div class="footer-quote">
                "They all did it. But if you want to know who killed Mr. Body,<br>
                I did. In the Hall. With the architecture."
            </div>
            
            <div class="footer-signature">
                <span class="sig-kanji">é¡</span>
                <span class="sig-text">Kagami</span>
            </div>
            
            <div class="footer-meta">
                <span class="meta-date">December 2025</span>
                <span class="meta-divider">â€¢</span>
                <span class="meta-visit" id="visit-count">Visit #1</span>
            </div>
            
            <p class="footer-wadsworth">
                "I'm the butler. I buttle."
            </p>
        </footer>
    </div>

    <!-- Room Detail Modal -->
    <div class="modal" id="room-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <button class="modal-close">Ã—</button>
            <div class="modal-body" id="modal-body">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="characters.js"></script>
    <script src="mansion.js"></script>
</body>
</html>
