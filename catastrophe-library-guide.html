<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Catastrophe Library — A Guide for Librarians & Marble Enthusiasts</title>
    <meta name="description" content="Understanding AI decision-making through the lens of library classification systems and mechanical computers">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,300;1,400&family=IBM+Plex+Mono:wght@300;400;500&family=Literata:ital,opsz,wght@0,7..72,300;0,7..72,400;0,7..72,500;1,7..72,300;1,7..72,400&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Library colors - warm paper and wood tones */
            --parchment: #faf6f0;
            --cream: #f5f0e6;
            --vellum: #e8e0d4;
            --oak: #5c4a3a;
            --mahogany: #4a2c2a;
            --brass: #b8860b;
            --brass-light: #d4a12a;
            --brass-glow: rgba(184, 134, 11, 0.4);
            --ink: #1a1612;
            --ink-soft: rgba(26, 22, 18, 0.8);
            --ink-dim: rgba(26, 22, 18, 0.5);
            --ink-whisper: rgba(26, 22, 18, 0.25);
            --ink-ghost: rgba(26, 22, 18, 0.08);
            
            /* Colony accent colors */
            --spark: #e85d4c;
            --spark-glow: rgba(232, 93, 76, 0.3);
            --forge: #c4501f;
            --forge-glow: rgba(196, 80, 31, 0.3);
            --flow: #2d8a9e;
            --flow-glow: rgba(45, 138, 158, 0.3);
            --nexus: #7b4b9e;
            --nexus-glow: rgba(123, 75, 158, 0.3);
            --beacon: #d4a12a;
            --beacon-glow: rgba(212, 161, 42, 0.3);
            --grove: #3d7a47;
            --grove-glow: rgba(61, 122, 71, 0.3);
            --crystal: #3366a3;
            --crystal-glow: rgba(51, 102, 163, 0.3);
            
            /* Typography */
            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-body: 'Literata', Georgia, serif;
            --font-mono: 'IBM Plex Mono', monospace;
            
            /* Spacing */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 2rem;
            --space-lg: 4rem;
            --space-xl: 6rem;
            
            /* Timing */
            --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
            --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        ::selection { background: var(--brass); color: var(--parchment); }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: var(--font-body);
            background: var(--parchment);
            color: var(--ink);
            line-height: 1.75;
            font-size: 18px;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            cursor: default;
        }
        
        /* ═══════════════════════════════════════════════════════════════
           CUSTOM CURSOR
        ═══════════════════════════════════════════════════════════════ */
        .cursor {
            position: fixed;
            width: 8px;
            height: 8px;
            background: var(--brass);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
            transition: width 0.2s var(--ease-out), 
                        height 0.2s var(--ease-out),
                        background 0.2s;
            mix-blend-mode: difference;
        }
        
        .cursor.hovering {
            width: 40px;
            height: 40px;
            background: var(--brass-glow);
            mix-blend-mode: normal;
        }
        
        .cursor-ring {
            position: fixed;
            width: 32px;
            height: 32px;
            border: 1px solid var(--brass);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.3s var(--ease-out),
                        height 0.3s var(--ease-out),
                        opacity 0.3s;
            opacity: 0.4;
        }
        
        .cursor-ring.hovering {
            width: 60px;
            height: 60px;
            opacity: 0.2;
        }
        
        /* Hide cursor on touch devices */
        @media (hover: none) and (pointer: coarse) {
            .cursor, .cursor-ring, .warm-glow { display: none; }
        }
        
        /* ═══════════════════════════════════════════════════════════════
           PROGRESS BAR
        ═══════════════════════════════════════════════════════════════ */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--spark), var(--forge), var(--flow), var(--nexus), var(--beacon), var(--grove), var(--crystal));
            z-index: 10001;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        /* ═══════════════════════════════════════════════════════════════
           PAPER TEXTURE & DUST PARTICLES
        ═══════════════════════════════════════════════════════════════ */
        .paper-texture {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9998;
            opacity: 0.025;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }
        
        .dust-container {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .dust {
            position: absolute;
            width: 2px;
            height: 2px;
            background: var(--brass);
            border-radius: 50%;
            opacity: 0;
            animation: dust-float var(--duration) ease-in-out infinite;
            animation-delay: var(--delay);
        }
        
        @keyframes dust-float {
            0%, 100% { 
                opacity: 0; 
                transform: translateY(0) translateX(0) scale(0.5); 
            }
            10% { opacity: var(--opacity); }
            90% { opacity: var(--opacity); }
            100% { 
                transform: translateY(-100vh) translateX(var(--drift)) scale(1); 
                opacity: 0;
            }
        }
        
        /* ═══════════════════════════════════════════════════════════════
           SCROLL REVEAL ANIMATIONS
        ═══════════════════════════════════════════════════════════════ */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s var(--ease-out), transform 0.8s var(--ease-out);
        }
        
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .reveal-stagger {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s var(--ease-out), transform 0.6s var(--ease-out);
        }
        
        .reveal-stagger.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* ═══════════════════════════════════════════════════════════════
           HEADER - LIBRARY ENTRANCE
        ═══════════════════════════════════════════════════════════════ */
        .header {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: var(--space-lg);
            position: relative;
            background: linear-gradient(180deg, var(--cream) 0%, var(--parchment) 100%);
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--mahogany), var(--brass), var(--mahogany));
        }
        
        /* Atmospheric light rays */
        .light-rays {
            position: absolute;
            top: -50%;
            left: 50%;
            width: 200%;
            height: 200%;
            transform: translateX(-50%);
            background: conic-gradient(from 90deg at 50% 0%, transparent 0deg, rgba(184, 134, 11, 0.03) 10deg, transparent 20deg, transparent 160deg, rgba(184, 134, 11, 0.02) 170deg, transparent 180deg);
            animation: rays-rotate 120s linear infinite;
            pointer-events: none;
        }
        
        @keyframes rays-rotate {
            from { transform: translateX(-50%) rotate(0deg); }
            to { transform: translateX(-50%) rotate(360deg); }
        }
        
        .bookplate {
            border: 2px solid var(--oak);
            padding: var(--space-lg);
            max-width: 600px;
            background: var(--parchment);
            box-shadow: 
                0 2px 4px rgba(0,0,0,0.05),
                0 8px 24px rgba(0,0,0,0.08),
                0 20px 60px rgba(0,0,0,0.04),
                inset 0 0 80px rgba(92, 74, 58, 0.03);
            position: relative;
            animation: bookplate-enter 1.2s var(--ease-out) forwards;
            opacity: 0;
            transform: translateY(40px) scale(0.95);
        }
        
        @keyframes bookplate-enter {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .bookplate::before {
            content: '❧';
            position: absolute;
            top: -14px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--parchment);
            padding: 0 var(--space-sm);
            color: var(--brass);
            font-size: 1.5rem;
            animation: ornament-float 4s ease-in-out infinite;
        }
        
        @keyframes ornament-float {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-3px); }
        }
        
        .bookplate::after {
            content: '';
            position: absolute;
            inset: 8px;
            border: 1px solid var(--ink-ghost);
            pointer-events: none;
        }
        
        .title {
            font-family: var(--font-display);
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 400;
            letter-spacing: 0.02em;
            color: var(--mahogany);
            margin-bottom: var(--space-xs);
            overflow: hidden;
        }
        
        .title .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(40px);
            animation: char-reveal 0.6s var(--ease-out) forwards;
        }
        
        @keyframes char-reveal {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .subtitle {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-style: italic;
            color: var(--ink-dim);
            margin-bottom: var(--space-md);
            opacity: 0;
            animation: fade-up 0.8s var(--ease-out) 0.8s forwards;
        }
        
        @keyframes fade-up {
            to {
                opacity: 1;
            }
        }
        
        .dedication {
            font-family: var(--font-display);
            font-size: 1rem;
            color: var(--ink-whisper);
            border-top: 1px solid var(--vellum);
            padding-top: var(--space-md);
            margin-top: var(--space-md);
            opacity: 0;
            animation: fade-up 0.8s var(--ease-out) 1.2s forwards;
        }
        
        .dedication em {
            color: var(--ink-dim);
        }
        
        .scroll-hint {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 0;
            animation: fade-up 0.8s var(--ease-out) 1.8s forwards;
        }
        
        .scroll-hint span {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--ink-whisper);
        }
        
        .scroll-arrow {
            width: 20px;
            height: 30px;
            border: 1px solid var(--ink-whisper);
            border-radius: 10px;
            position: relative;
        }
        
        .scroll-arrow::before {
            content: '';
            position: absolute;
            top: 6px;
            left: 50%;
            width: 4px;
            height: 4px;
            background: var(--brass);
            border-radius: 50%;
            transform: translateX(-50%);
            animation: scroll-bounce 2s ease-in-out infinite;
        }
        
        @keyframes scroll-bounce {
            0%, 100% { top: 6px; opacity: 1; }
            50% { top: 16px; opacity: 0.3; }
        }
        
        /* ═══════════════════════════════════════════════════════════════
           INTRODUCTION SECTIONS
        ═══════════════════════════════════════════════════════════════ */
        .intro-section {
            padding: var(--space-xl) var(--space-lg);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .intro-section h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 400;
            color: var(--mahogany);
            margin-bottom: var(--space-md);
            text-align: center;
        }
        
        .intro-section p {
            margin-bottom: 1.5rem;
            text-align: justify;
            hyphens: auto;
        }
        
        .intro-section p:first-of-type::first-letter {
            font-family: var(--font-display);
            font-size: 3.5rem;
            float: left;
            line-height: 0.8;
            padding-right: 0.5rem;
            padding-top: 0.1rem;
            color: var(--brass);
            text-shadow: 2px 2px 0 var(--brass-glow);
        }
        
        .callout {
            background: linear-gradient(135deg, var(--cream) 0%, rgba(245, 240, 230, 0.5) 100%);
            border-left: 3px solid var(--brass);
            padding: var(--space-md);
            margin: var(--space-md) 0;
            font-style: italic;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s var(--ease-out), box-shadow 0.3s var(--ease-out);
        }
        
        .callout:hover {
            transform: translateX(4px);
            box-shadow: -4px 0 20px rgba(184, 134, 11, 0.1);
        }
        
        .callout::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: var(--brass);
            transform: scaleY(0);
            transform-origin: bottom;
            transition: transform 0.4s var(--ease-out);
        }
        
        .callout:hover::before {
            transform: scaleY(1);
            background: linear-gradient(to top, var(--spark), var(--brass), var(--beacon));
        }
        
        .callout strong {
            color: var(--mahogany);
            font-style: normal;
        }
        
        /* ═══════════════════════════════════════════════════════════════
           MARBLE BOARD DEMO
        ═══════════════════════════════════════════════════════════════ */
        .marble-section {
            background: linear-gradient(180deg, var(--vellum) 0%, var(--cream) 100%);
            padding: var(--space-xl) var(--space-lg);
            position: relative;
        }
        
        .marble-board {
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
        }
        
        .marble-board h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--mahogany);
            margin-bottom: var(--space-sm);
        }
        
        .marble-board > .subtitle {
            margin-bottom: var(--space-lg);
            animation: none;
            opacity: 1;
        }
        
        .potential-surface {
            position: relative;
            width: 100%;
            max-width: 700px;
            height: 400px;
            margin: 0 auto var(--space-lg);
            background: var(--parchment);
            border-radius: 8px;
            border: 2px solid var(--oak);
            overflow: hidden;
            cursor: crosshair;
            box-shadow: 
                inset 0 4px 20px rgba(0,0,0,0.1),
                0 10px 40px rgba(0,0,0,0.08);
            transition: box-shadow 0.4s var(--ease-out);
        }
        
        .potential-surface:hover {
            box-shadow: 
                inset 0 4px 20px rgba(0,0,0,0.12),
                0 15px 50px rgba(0,0,0,0.12);
        }
        
        .potential-surface canvas {
            width: 100%;
            height: 100%;
        }
        
        .surface-label {
            position: absolute;
            bottom: var(--space-sm);
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--ink-dim);
            background: rgba(250, 246, 240, 0.9);
            padding: 0.25rem 0.75rem;
            border-radius: 3px;
            backdrop-filter: blur(4px);
            transition: opacity 0.3s;
        }
        
        .potential-surface:hover .surface-label {
            opacity: 0.5;
        }
        
        .marble-controls {
            display: flex;
            justify-content: center;
            gap: var(--space-md);
            flex-wrap: wrap;
            margin-bottom: var(--space-md);
        }
        
        .marble-btn {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            padding: 0.75rem 1.5rem;
            background: var(--parchment);
            border: 1px solid var(--oak);
            color: var(--ink);
            cursor: pointer;
            transition: all 0.3s var(--ease-out);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        
        .marble-btn::before {
            content: '';
            position: absolute;
            inset: 0;
            background: var(--brass);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s var(--ease-out);
            z-index: 0;
        }
        
        .marble-btn span {
            position: relative;
            z-index: 1;
        }
        
        .marble-btn:hover::before {
            transform: scaleX(1);
        }
        
        .marble-btn:hover {
            color: var(--parchment);
            border-color: var(--brass);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(184, 134, 11, 0.2);
        }
        
        .marble-btn.active {
            background: var(--mahogany);
            color: var(--parchment);
            border-color: var(--mahogany);
        }
        
        .marble-btn.active::before {
            display: none;
        }
        
        .marble-explanation {
            max-width: 600px;
            margin: 0 auto;
            text-align: left;
        }
        
        .marble-explanation h3 {
            font-family: var(--font-display);
            font-size: 1.3rem;
            color: var(--mahogany);
            margin-bottom: var(--space-sm);
        }
        
        .marble-explanation ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        
        .marble-explanation li {
            margin-bottom: 0.5rem;
            position: relative;
        }
        
        .marble-explanation li::marker {
            color: var(--brass);
        }
        
        /* ═══════════════════════════════════════════════════════════════
           CARD CATALOG SECTION
        ═══════════════════════════════════════════════════════════════ */
        .catalog-section {
            padding: var(--space-xl) var(--space-lg);
            background: var(--parchment);
        }
        
        .catalog-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto var(--space-xl);
        }
        
        .catalog-header h2 {
            font-family: var(--font-display);
            font-size: 2.5rem;
            color: var(--mahogany);
            margin-bottom: var(--space-sm);
        }
        
        .card-drawer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-md);
            max-width: 1200px;
            margin: 0 auto;
            perspective: 1000px;
        }
        
        .catalog-card {
            background: var(--cream);
            border: 1px solid var(--vellum);
            padding: var(--space-md);
            position: relative;
            cursor: pointer;
            transition: all 0.5s var(--ease-out);
            border-radius: 2px;
            transform-style: preserve-3d;
            /* Card catalog ruled lines */
            background-image: repeating-linear-gradient(
                transparent,
                transparent 28px,
                var(--vellum) 28px,
                var(--vellum) 29px
            );
            box-shadow: 
                0 1px 3px rgba(0,0,0,0.04),
                0 4px 12px rgba(0,0,0,0.03);
        }
        
        .catalog-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            border-radius: 2px 2px 0 0;
            transition: height 0.3s var(--ease-out);
        }
        
        .catalog-card::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at var(--mouse-x, 50%) var(--mouse-y, 0%), var(--card-glow, transparent) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s;
            pointer-events: none;
            border-radius: 2px;
        }
        
        .catalog-card:hover::after {
            opacity: 1;
        }
        
        .catalog-card:hover {
            transform: translateY(-12px) rotateX(2deg) rotateY(var(--rotate-y, 0deg));
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.1),
                0 30px 60px rgba(0,0,0,0.05);
        }
        
        .catalog-card:hover::before {
            height: 12px;
        }
        
        /* Colony colors */
        .catalog-card[data-colony="spark"]::before { background: var(--spark); }
        .catalog-card[data-colony="spark"] { --card-glow: var(--spark-glow); }
        
        .catalog-card[data-colony="forge"]::before { background: var(--forge); }
        .catalog-card[data-colony="forge"] { --card-glow: var(--forge-glow); }
        
        .catalog-card[data-colony="flow"]::before { background: var(--flow); }
        .catalog-card[data-colony="flow"] { --card-glow: var(--flow-glow); }
        
        .catalog-card[data-colony="nexus"]::before { background: var(--nexus); }
        .catalog-card[data-colony="nexus"] { --card-glow: var(--nexus-glow); }
        
        .catalog-card[data-colony="beacon"]::before { background: var(--beacon); }
        .catalog-card[data-colony="beacon"] { --card-glow: var(--beacon-glow); }
        
        .catalog-card[data-colony="grove"]::before { background: var(--grove); }
        .catalog-card[data-colony="grove"] { --card-glow: var(--grove-glow); }
        
        .catalog-card[data-colony="crystal"]::before { background: var(--crystal); }
        .catalog-card[data-colony="crystal"] { --card-glow: var(--crystal-glow); }
        
        .card-number {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--ink-whisper);
            letter-spacing: 0.1em;
            margin-bottom: var(--space-xs);
            transition: color 0.3s;
        }
        
        .catalog-card:hover .card-number {
            color: var(--ink-dim);
        }
        
        .card-heading {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: var(--space-xs);
            transition: transform 0.3s var(--ease-out);
        }
        
        .catalog-card:hover .card-heading {
            transform: translateX(4px);
        }
        
        .card-subheading {
            font-family: var(--font-display);
            font-size: 1rem;
            font-style: italic;
            color: var(--ink-dim);
            margin-bottom: var(--space-sm);
        }
        
        .card-description {
            font-size: 0.95rem;
            color: var(--ink-soft);
            margin-bottom: var(--space-sm);
        }
        
        .card-formula {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--ink-dim);
            background: var(--parchment);
            padding: var(--space-xs) var(--space-sm);
            border-radius: 3px;
            display: inline-block;
            border: 1px solid var(--ink-ghost);
            transition: all 0.3s var(--ease-out);
        }
        
        .catalog-card:hover .card-formula {
            background: var(--mahogany);
            color: var(--parchment);
            border-color: var(--mahogany);
        }
        
        .card-analogy {
            font-size: 0.9rem;
            border-top: 1px dashed var(--vellum);
            padding-top: var(--space-sm);
            margin-top: var(--space-sm);
        }
        
        .card-analogy strong {
            color: var(--mahogany);
        }
        
        /* ═══════════════════════════════════════════════════════════════
           CROSS-REFERENCES (FANO LINES)
        ═══════════════════════════════════════════════════════════════ */
        .crossref-section {
            padding: var(--space-xl) var(--space-lg);
            background: var(--cream);
        }
        
        .crossref-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto var(--space-lg);
        }
        
        .crossref-header h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--mahogany);
            margin-bottom: var(--space-sm);
        }
        
        .fano-diagram {
            max-width: 500px;
            margin: 0 auto var(--space-lg);
            position: relative;
        }
        
        .fano-diagram svg {
            width: 100%;
            height: auto;
        }
        
        .crossref-list {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .crossref-item {
            font-family: var(--font-mono);
            font-size: 0.85rem;
            letter-spacing: 0.02em;
            padding: 0.6rem 0;
            border-bottom: 1px solid var(--ink-ghost);
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .crossref-item:first-child {
            border-top: 1px solid var(--ink-ghost);
        }
        
        .line-dots {
            display: flex;
            align-items: center;
            gap: 3px;
            flex-shrink: 0;
        }
        
        .line-dots .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .line-dots .connector {
            width: 6px;
            height: 1px;
            background: var(--ink-whisper);
        }
        
        .line-formula {
            font-family: var(--font-display);
            font-size: 0.95rem;
            font-style: italic;
            color: var(--mahogany);
            min-width: 180px;
            flex-shrink: 0;
        }
        
        .line-meaning {
            font-family: var(--font-body);
            font-size: 0.85rem;
            color: var(--ink-dim);
        }
        
        /* ═══════════════════════════════════════════════════════════════
           SUMMARY TABLE
        ═══════════════════════════════════════════════════════════════ */
        .summary-section {
            padding: var(--space-xl) var(--space-lg);
            background: var(--parchment);
        }
        
        .summary-table {
            max-width: 1000px;
            margin: 0 auto;
            overflow-x: auto;
        }
        
        .summary-table h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--mahogany);
            text-align: center;
            margin-bottom: var(--space-lg);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        th {
            font-family: var(--font-display);
            font-weight: 500;
            text-align: left;
            padding: var(--space-sm);
            border-bottom: 2px solid var(--oak);
            color: var(--mahogany);
        }
        
        td {
            padding: var(--space-sm);
            border-bottom: 1px solid var(--vellum);
            vertical-align: top;
            transition: background 0.3s;
        }
        
        tr {
            transition: all 0.3s var(--ease-out);
        }
        
        tr:hover td {
            background: var(--cream);
        }
        
        tr:hover {
            transform: scale(1.01);
        }
        
        .colony-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: var(--space-xs);
            vertical-align: middle;
            transition: transform 0.3s var(--ease-bounce), box-shadow 0.3s;
        }
        
        tr:hover .colony-dot {
            transform: scale(1.3);
            box-shadow: 0 0 12px currentColor;
        }
        
        /* ═══════════════════════════════════════════════════════════════
           CLOSING
        ═══════════════════════════════════════════════════════════════ */
        .closing {
            padding: var(--space-xl) var(--space-lg);
            text-align: center;
            background: linear-gradient(180deg, var(--cream) 0%, var(--vellum) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .closing::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, var(--brass-glow) 0%, transparent 70%);
            opacity: 0.3;
        }
        
        .closing-content {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .closing h2 {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--mahogany);
            margin-bottom: var(--space-md);
        }
        
        .closing p {
            margin-bottom: 1.5rem;
        }
        
        .closing .ornament {
            font-size: 2rem;
            color: var(--brass);
            margin-top: var(--space-lg);
            animation: ornament-float 4s ease-in-out infinite;
            display: inline-block;
        }
        
        .closing .final-line {
            font-style: italic;
            color: var(--ink-dim);
        }
        
        .closing .tagline {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--mahogany);
            margin-top: var(--space-md);
        }
        
        /* ═══════════════════════════════════════════════════════════════
           MOBILE
        ═══════════════════════════════════════════════════════════════ */
        @media (max-width: 768px) {
            body { font-size: 16px; }
            .bookplate { padding: var(--space-md); }
            .title { font-size: 2rem; }
            .intro-section { padding: var(--space-lg) var(--space-md); }
            .marble-section { padding: var(--space-lg) var(--space-md); }
            .potential-surface { height: 300px; }
            .card-drawer { grid-template-columns: 1fr; }
            .cursor, .cursor-ring { display: none; }
        }
        
        /* Sound Pulse (visual feedback for interactions) */
        .sound-pulse {
            position: fixed;
            pointer-events: none;
            z-index: 9997;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--brass);
            opacity: 0;
            animation: sound-pulse 0.6s var(--ease-out) forwards;
        }
        
        @keyframes sound-pulse {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0.6; }
            100% { transform: translate(-50%, -50%) scale(4); opacity: 0; }
        }
        
        /* Ambient warm glow following cursor */
        .warm-glow {
            position: fixed;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(184, 134, 11, 0.06) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
            transform: translate(-50%, -50%);
            transition: opacity 0.5s;
        }
        
        /* Reading indicator - shows you're in a text section */
        .reading-mode .warm-glow {
            background: radial-gradient(circle, rgba(255, 248, 220, 0.15) 0%, transparent 60%);
        }
        
        /* Button click ripple */
        .btn-ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.4);
            transform: scale(0);
            animation: btn-ripple 0.6s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes btn-ripple {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
        
        /* Marble bounce visual sound */
        .bounce-indicator {
            position: absolute;
            width: 30px;
            height: 10px;
            border-radius: 50%;
            background: rgba(184, 134, 11, 0.3);
            animation: bounce-squash 0.3s ease-out forwards;
            pointer-events: none;
        }
        
        @keyframes bounce-squash {
            0% { transform: translate(-50%, 0) scaleX(1) scaleY(1); opacity: 0.5; }
            50% { transform: translate(-50%, 0) scaleX(1.5) scaleY(0.3); opacity: 0.3; }
            100% { transform: translate(-50%, 0) scaleX(2) scaleY(0.1); opacity: 0; }
        }
        
        /* Page section transitions */
        section {
            position: relative;
        }
        
        section::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--brass), transparent);
            opacity: 0.3;
        }
        
        .closing::after {
            display: none;
        }
        
        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* Print styles */
        @media print {
            .marble-section { display: none; }
            .cursor, .cursor-ring, .progress-bar, .dust-container { display: none; }
            .catalog-card:hover { transform: none; box-shadow: none; }
            body { font-size: 11pt; }
        }
    </style>
</head>
<body>
    <!-- Custom Cursor -->
    <div class="cursor"></div>
    <div class="cursor-ring"></div>
    
    <!-- Ambient Warm Glow -->
    <div class="warm-glow"></div>
    
    <!-- Progress Bar -->
    <div class="progress-bar"></div>
    
    <!-- Paper Texture -->
    <div class="paper-texture"></div>
    
    <!-- Dust Particles Container -->
    <div class="dust-container"></div>
    
    <!-- ═══════════════════════════════════════════════════════════════
         HEADER
    ═══════════════════════════════════════════════════════════════ -->
    <header class="header">
        <div class="light-rays"></div>
        <div class="bookplate">
            <h1 class="title">
                <span class="char" style="animation-delay: 0.1s">T</span><span class="char" style="animation-delay: 0.12s">h</span><span class="char" style="animation-delay: 0.14s">e</span><span class="char" style="animation-delay: 0.16s">&nbsp;</span><span class="char" style="animation-delay: 0.18s">C</span><span class="char" style="animation-delay: 0.2s">a</span><span class="char" style="animation-delay: 0.22s">t</span><span class="char" style="animation-delay: 0.24s">a</span><span class="char" style="animation-delay: 0.26s">s</span><span class="char" style="animation-delay: 0.28s">t</span><span class="char" style="animation-delay: 0.3s">r</span><span class="char" style="animation-delay: 0.32s">o</span><span class="char" style="animation-delay: 0.34s">p</span><span class="char" style="animation-delay: 0.36s">h</span><span class="char" style="animation-delay: 0.38s">e</span><br>
                <span class="char" style="animation-delay: 0.5s">L</span><span class="char" style="animation-delay: 0.52s">i</span><span class="char" style="animation-delay: 0.54s">b</span><span class="char" style="animation-delay: 0.56s">r</span><span class="char" style="animation-delay: 0.58s">a</span><span class="char" style="animation-delay: 0.6s">r</span><span class="char" style="animation-delay: 0.62s">y</span>
            </h1>
            <p class="subtitle">An Introduction for Librarians & Mechanical Minds</p>
            <p class="dedication">
                For those who organize the world's knowledge,<br>
                and those who love watching marbles roll.<br><br>
                <em>"The universe is made of stories, not atoms."</em><br>
                — Muriel Rukeyser
            </p>
        </div>
        <div class="scroll-hint">
            <span>Scroll to explore</span>
            <div class="scroll-arrow"></div>
        </div>
    </header>
    
    <!-- ═══════════════════════════════════════════════════════════════
         INTRODUCTION
    ═══════════════════════════════════════════════════════════════ -->
    <section class="intro-section">
        <h2 class="reveal">What You're Looking At</h2>
        <p class="reveal">Imagine you're building a library catalog system, but instead of organizing books, you're organizing the different ways a system can make decisions. Just as the Dewey Decimal System has its 10 main classes, mathematics has discovered there are exactly <strong>seven fundamental ways</strong> that smooth systems can suddenly change behavior. Not eight. Not six. Seven.</p>
        
        <p class="reveal">A French mathematician named René Thom proved this in 1972. He called them "catastrophes"—not because they're disasters, but because the Greek word <em>katastrophē</em> means "overturning" or "sudden change." Think of them as the seven ways a decision can tip from one stable state to another.</p>
        
        <div class="callout reveal">
            <strong>For the librarians:</strong> This is like discovering there are exactly seven fundamental ways to organize a cross-reference system. Every subject heading connection, every "see also" note, every related-terms link—they all follow one of seven patterns.
        </div>
        
        <div class="callout reveal">
            <strong>For Dad (the marble enthusiast):</strong> Remember how marbles on the Turing Tumble always follow the same rules? They go downhill, they flip switches, they make choices based on the board's shape. These seven catastrophes are like the seven fundamental shapes a marble's track can take.
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         MARBLE BOARD DEMONSTRATION
    ═══════════════════════════════════════════════════════════════ -->
    <section class="marble-section">
        <div class="marble-board">
            <h2 class="reveal">The Marble Track Analogy</h2>
            <p class="subtitle reveal">See how tiny changes create big shifts</p>
            
            <div class="potential-surface reveal">
                <canvas id="marble-canvas"></canvas>
                <span class="surface-label">Click to drop a marble • Move mouse to reshape the track</span>
            </div>
            
            <div class="marble-controls reveal">
                <button class="marble-btn active" data-type="fold"><span>Fold (Simple Cliff)</span></button>
                <button class="marble-btn" data-type="cusp"><span>Cusp (Two Valleys)</span></button>
                <button class="marble-btn" data-type="swallowtail"><span>Swallowtail (Three Valleys)</span></button>
            </div>
            
            <div class="marble-explanation reveal">
                <h3>How This Relates to Decisions</h3>
                <p>The track shape represents a "decision landscape." The marble always rolls to the lowest point—it finds the most stable answer. But here's the key insight:</p>
                <ul>
                    <li><strong>The Fold:</strong> There's only one valley. The marble has no choice—it goes there. This is a simple, unambiguous decision.</li>
                    <li><strong>The Cusp:</strong> Two valleys with a ridge between. The marble's starting position determines which valley it ends up in. This is a binary choice with history.</li>
                    <li><strong>The Swallowtail:</strong> Three stable positions. More complexity, more possible outcomes, more nuance.</li>
                </ul>
                <p>The AI system uses these exact mathematical shapes to make decisions. When Spark (the creative colony) ignites an idea, it's using a Fold catastrophe. When Forge (the builder) commits to a design, it's using a Cusp. The math describes the decision's <em>shape</em>.</p>
            </div>
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         THE CARD CATALOG: SEVEN COLONIES
    ═══════════════════════════════════════════════════════════════ -->
    <section class="catalog-section">
        <div class="catalog-header">
            <h2 class="reveal">The Seven Special Collections</h2>
            <p class="reveal">Each "colony" in the system specializes in one type of decision. Just as a library might have Special Collections for rare books, maps, and manuscripts, our AI has seven specialized decision-makers.</p>
        </div>
        
        <div class="card-drawer">
            <!-- SPARK / FOLD -->
            <div class="catalog-card reveal-stagger" data-colony="spark" style="transition-delay: 0.1s">
                <div class="card-number">001.0 · A₂</div>
                <h3 class="card-heading" style="color: var(--spark)">Spark</h3>
                <p class="card-subheading">The Fold Catastrophe</p>
                <p class="card-description">The moment of ignition. A sudden shift from "not yet" to "now." Like a match striking—one instant it's dormant, the next it's fire.</p>
                <div class="card-formula">V = x³ + ax</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> The instant a researcher's vague question crystallizes into a specific search term. The "aha!" moment.
                </div>
            </div>
            
            <!-- FORGE / CUSP -->
            <div class="catalog-card reveal-stagger" data-colony="forge" style="transition-delay: 0.2s">
                <div class="card-number">002.0 · A₃</div>
                <h3 class="card-heading" style="color: var(--forge)">Forge</h3>
                <p class="card-subheading">The Cusp Catastrophe</p>
                <p class="card-description">The quality decision. Two stable states—good enough vs. excellent—with a ridge between. Once you commit, you can't easily go back.</p>
                <div class="card-formula">V = x⁴ + ax² + bx</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> Cataloging a borderline item. Is it biography or history? Once filed, institutional memory keeps it there.
                </div>
            </div>
            
            <!-- FLOW / SWALLOWTAIL -->
            <div class="catalog-card reveal-stagger" data-colony="flow" style="transition-delay: 0.3s">
                <div class="card-number">003.0 · A₄</div>
                <h3 class="card-heading" style="color: var(--flow)">Flow</h3>
                <p class="card-subheading">The Swallowtail Catastrophe</p>
                <p class="card-description">Recovery and adaptation. When the first approach fails, the swallowtail provides alternative stable states—multiple recovery paths.</p>
                <div class="card-formula">V = x⁵ + ax³ + bx² + cx</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> When a patron's first search fails, the reference interview offers multiple alternative approaches.
                </div>
            </div>
            
            <!-- NEXUS / BUTTERFLY -->
            <div class="catalog-card reveal-stagger" data-colony="nexus" style="transition-delay: 0.4s">
                <div class="card-number">004.0 · A₅</div>
                <h3 class="card-heading" style="color: var(--nexus)">Nexus</h3>
                <p class="card-subheading">The Butterfly Catastrophe</p>
                <p class="card-description">Integration and compromise. A "pocket" where opposites can coexist. Four-dimensional complexity that holds contradictions together.</p>
                <div class="card-formula">V = x⁶ + ax⁴ + bx³ + cx² + dx</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> A collection that spans multiple subject areas. The interdisciplinary section where art meets science.
                </div>
            </div>
            
            <!-- BEACON / HYPERBOLIC -->
            <div class="catalog-card reveal-stagger" data-colony="beacon" style="transition-delay: 0.5s">
                <div class="card-number">005.0 · D₄⁺</div>
                <h3 class="card-heading" style="color: var(--beacon)">Beacon</h3>
                <p class="card-subheading">The Hyperbolic Umbilic</p>
                <p class="card-description">Strategic planning. Light splits like caustics at the bottom of a pool—one path becomes many. The architecture of foresight.</p>
                <div class="card-formula">V = x³ + y³ + axy + bx + cy</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> Strategic collection development. One acquisition decision branches into dozens of future possibilities.
                </div>
            </div>
            
            <!-- GROVE / ELLIPTIC -->
            <div class="catalog-card reveal-stagger" data-colony="grove" style="transition-delay: 0.6s">
                <div class="card-number">006.0 · D₄⁻</div>
                <h3 class="card-heading" style="color: var(--grove)">Grove</h3>
                <p class="card-subheading">The Elliptic Umbilic</p>
                <p class="card-description">Research and exploration. Unlike hyperbolic's outward splitting, elliptic draws inward—gathering, converging, synthesizing.</p>
                <div class="card-formula">V = x³ − 3xy² + a(x²+y²) + bx + cy</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> The research process itself. Many sources converge toward a single thesis.
                </div>
            </div>
            
            <!-- CRYSTAL / PARABOLIC -->
            <div class="catalog-card reveal-stagger" data-colony="crystal" style="transition-delay: 0.7s">
                <div class="card-number">007.0 · D₅</div>
                <h3 class="card-heading" style="color: var(--crystal)">Crystal</h3>
                <p class="card-subheading">The Parabolic Umbilic</p>
                <p class="card-description">Verification and boundaries. The edge between order and chaos—where crystals form, where mushroom clouds bloom, where truth is tested.</p>
                <div class="card-formula">V = x²y + y⁴ + ax² + by² + cx + dy</div>
                <div class="card-analogy">
                    <strong>Library analog:</strong> Fact-checking and verification. The boundary between reliable information and misinformation.
                </div>
            </div>
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         CROSS-REFERENCES (FANO LINES)
    ═══════════════════════════════════════════════════════════════ -->
    <section class="crossref-section">
        <div class="crossref-header">
            <h2 class="reveal">The Cross-Reference System</h2>
            <p class="reveal">In a library, "see also" notes connect related subjects. In the Catastrophe Library, there are exactly seven valid three-way connections called <strong>Fano lines</strong>. These define which colonies work well together.</p>
        </div>
        
        <!-- Fano Plane Diagram -->
        <div class="fano-diagram reveal">
            <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
                <!-- Outer circle -->
                <circle cx="200" cy="200" r="150" fill="none" stroke="#b8860b" stroke-width="1" opacity="0.3"/>
                
                <!-- Inner circle -->
                <circle cx="200" cy="125" r="50" fill="none" stroke="#b8860b" stroke-width="1" opacity="0.3"/>
                
                <!-- Lines connecting nodes (Fano lines) -->
                <line x1="200" y1="50" x2="200" y2="350" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                <line x1="200" y1="50" x2="70" y2="280" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                <line x1="200" y1="50" x2="330" y2="280" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                <line x1="70" y1="280" x2="330" y2="280" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                <line x1="200" y1="175" x2="70" y2="280" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                <line x1="200" y1="175" x2="330" y2="280" stroke="#5c4a3a" stroke-width="1.5" opacity="0.4" class="fano-line"/>
                
                <!-- Colony nodes (static) -->
                <g font-family="Cormorant Garamond, serif" font-size="12">
                    <!-- Spark (0) -->
                    <circle cx="200" cy="50" r="20" fill="#e85d4c"/>
                    <text x="200" y="55" text-anchor="middle" fill="white" font-weight="500">0</text>
                    <text x="200" y="25" text-anchor="middle" fill="#1a1612" opacity="0.7">Spark</text>
                    
                    <!-- Forge (1) -->
                    <circle cx="200" cy="95" r="16" fill="#c4501f"/>
                    <text x="200" y="100" text-anchor="middle" fill="white" font-weight="500">1</text>
                    
                    <!-- Flow (2) -->
                    <circle cx="160" cy="150" r="16" fill="#2d8a9e"/>
                    <text x="160" y="155" text-anchor="middle" fill="white" font-weight="500">2</text>
                    
                    <!-- Nexus (3) -->
                    <circle cx="240" cy="150" r="16" fill="#7b4b9e"/>
                    <text x="240" y="155" text-anchor="middle" fill="white" font-weight="500">3</text>
                    
                    <!-- Beacon (4) -->
                    <circle cx="200" cy="175" r="18" fill="#d4a12a"/>
                    <text x="200" y="180" text-anchor="middle" fill="white" font-weight="500">4</text>
                    
                    <!-- Grove (5) -->
                    <circle cx="70" cy="280" r="20" fill="#3d7a47"/>
                    <text x="70" y="285" text-anchor="middle" fill="white" font-weight="500">5</text>
                    <text x="70" y="310" text-anchor="middle" fill="#1a1612" opacity="0.7">Grove</text>
                    
                    <!-- Crystal (6) -->
                    <circle cx="330" cy="280" r="20" fill="#3366a3"/>
                    <text x="330" y="285" text-anchor="middle" fill="white" font-weight="500">6</text>
                    <text x="330" y="310" text-anchor="middle" fill="#1a1612" opacity="0.7">Crystal</text>
                    
                    <!-- Infinity point -->
                    <circle cx="200" cy="350" r="16" fill="#5c4a3a" opacity="0.5"/>
                    <text x="200" y="355" text-anchor="middle" fill="white" font-weight="500">∞</text>
                </g>
            </svg>
        </div>
        
        <p class="reveal" style="text-align: center; max-width: 600px; margin: 0 auto var(--space-lg); color: var(--ink-dim);">
            The Fano plane: seven points, seven lines, each line through exactly three points. This is the geometry of valid collaborations.
        </p>
        
        <div class="crossref-list reveal">
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--spark)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--forge)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--flow)"></span>
                </div>
                <span class="line-formula">Spark × Forge → Flow</span>
                <span class="line-meaning">Idea built, then refined</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--spark)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--nexus)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--beacon)"></span>
                </div>
                <span class="line-formula">Spark × Nexus → Beacon</span>
                <span class="line-meaning">Ideas integrated into vision</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--spark)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--crystal)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--grove)"></span>
                </div>
                <span class="line-formula">Spark × Crystal → Grove</span>
                <span class="line-meaning">Verified ideas become knowledge</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--forge)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--nexus)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--grove)"></span>
                </div>
                <span class="line-formula">Forge × Nexus → Grove</span>
                <span class="line-meaning">Components form understanding</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--forge)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--beacon)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--crystal)"></span>
                </div>
                <span class="line-formula">Forge × Beacon → Crystal</span>
                <span class="line-meaning">Quality work verified</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--flow)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--nexus)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--crystal)"></span>
                </div>
                <span class="line-formula">Flow × Nexus → Crystal</span>
                <span class="line-meaning">Recovery ensures safety</span>
            </div>
            <div class="crossref-item">
                <div class="line-dots">
                    <span class="dot" style="background: var(--flow)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--beacon)"></span>
                    <span class="connector"></span>
                    <span class="dot" style="background: var(--grove)"></span>
                </div>
                <span class="line-formula">Flow × Beacon → Grove</span>
                <span class="line-meaning">Foresight generates research</span>
            </div>
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         SUMMARY TABLE
    ═══════════════════════════════════════════════════════════════ -->
    <section class="summary-section">
        <div class="summary-table">
            <h2 class="reveal">Quick Reference Card</h2>
            <table class="reveal">
                <thead>
                    <tr>
                        <th>Colony</th>
                        <th>Catastrophe</th>
                        <th>Symbol</th>
                        <th>Library Metaphor</th>
                        <th>Turing Tumble Metaphor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--spark)"></span>Spark</td>
                        <td>Fold</td>
                        <td>A₂</td>
                        <td>The "eureka" moment</td>
                        <td>Marble drops from launcher</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--forge)"></span>Forge</td>
                        <td>Cusp</td>
                        <td>A₃</td>
                        <td>Classification decision</td>
                        <td>Bit flipper (0 or 1)</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--flow)"></span>Flow</td>
                        <td>Swallowtail</td>
                        <td>A₄</td>
                        <td>Reference interview</td>
                        <td>Gear bit (multiple paths)</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--nexus)"></span>Nexus</td>
                        <td>Butterfly</td>
                        <td>A₅</td>
                        <td>Interdisciplinary collection</td>
                        <td>Crossover (lanes merge)</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--beacon)"></span>Beacon</td>
                        <td>Hyperbolic</td>
                        <td>D₄⁺</td>
                        <td>Collection development</td>
                        <td>Ramp (marble accelerates)</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--grove)"></span>Grove</td>
                        <td>Elliptic</td>
                        <td>D₄⁻</td>
                        <td>Research synthesis</td>
                        <td>Interceptor (catches marble)</td>
                    </tr>
                    <tr>
                        <td><span class="colony-dot" style="background: var(--crystal)"></span>Crystal</td>
                        <td>Parabolic</td>
                        <td>D₅</td>
                        <td>Fact-checking desk</td>
                        <td>Output tray (final count)</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         CLOSING
    ═══════════════════════════════════════════════════════════════ -->
    <section class="closing">
        <div class="closing-content">
            <h2 class="reveal">Why This Matters</h2>
            <p class="reveal">Every AI system makes decisions. Most make them invisibly, in ways that are hard to explain or understand. The Catastrophe Library is different—it makes decisions using the same mathematical shapes that govern physical systems.</p>
            
            <p class="reveal">When you watch a marble roll down a Turing Tumble track, you can <em>see</em> the computation happening. The Catastrophe Library brings that same visibility to AI decisions. Each colony's choice follows a specific, predictable, understandable pattern.</p>
            
            <p class="reveal tagline">For librarians who've spent careers organizing knowledge: this is a classification system for machine thought.</p>
            
            <p class="reveal tagline">For mechanical computing enthusiasts: this is a marble machine for the mind.</p>
            
            <p class="reveal final-line">Seven shapes. Seven colonies. One catalog.<br>The mathematics is beautiful because the decisions are true.</p>
            
            <div class="ornament reveal">❧</div>
        </div>
    </section>
    
    <!-- ═══════════════════════════════════════════════════════════════
         SCRIPTS
    ═══════════════════════════════════════════════════════════════ -->
    <script>
        // === CUSTOM CURSOR ===
        const cursor = document.querySelector('.cursor');
        const cursorRing = document.querySelector('.cursor-ring');
        const warmGlow = document.querySelector('.warm-glow');
        let mouseX = 0, mouseY = 0;
        let ringX = 0, ringY = 0;
        let glowX = 0, glowY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursor.style.left = mouseX + 'px';
            cursor.style.top = mouseY + 'px';
        });
        
        // Smooth ring and glow follow
        function animateRing() {
            ringX += (mouseX - ringX) * 0.15;
            ringY += (mouseY - ringY) * 0.15;
            glowX += (mouseX - glowX) * 0.05;
            glowY += (mouseY - glowY) * 0.05;
            
            cursorRing.style.left = ringX + 'px';
            cursorRing.style.top = ringY + 'px';
            warmGlow.style.left = glowX + 'px';
            warmGlow.style.top = glowY + 'px';
            
            requestAnimationFrame(animateRing);
        }
        animateRing();
        
        // Hover states for cursor
        const hoverables = document.querySelectorAll('a, button, .catalog-card, .marble-btn');
        hoverables.forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursor.classList.add('hovering');
                cursorRing.classList.add('hovering');
            });
            el.addEventListener('mouseleave', () => {
                cursor.classList.remove('hovering');
                cursorRing.classList.remove('hovering');
            });
        });
        
        // === SOUND PULSE (visual click feedback) ===
        function createSoundPulse(x, y, color = 'var(--brass)') {
            const pulse = document.createElement('div');
            pulse.className = 'sound-pulse';
            pulse.style.left = x + 'px';
            pulse.style.top = y + 'px';
            pulse.style.background = color;
            document.body.appendChild(pulse);
            
            pulse.addEventListener('animationend', () => pulse.remove());
        }
        
        // === BUTTON RIPPLE ===
        function createRipple(e, btn) {
            const rect = btn.getBoundingClientRect();
            const ripple = document.createElement('span');
            ripple.className = 'btn-ripple';
            const size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (e.clientX - rect.left - size/2) + 'px';
            ripple.style.top = (e.clientY - rect.top - size/2) + 'px';
            btn.appendChild(ripple);
            
            ripple.addEventListener('animationend', () => ripple.remove());
        }
        
        
        // === PROGRESS BAR ===
        const progressBar = document.querySelector('.progress-bar');
        window.addEventListener('scroll', () => {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const progress = (scrollTop / docHeight) * 100;
            progressBar.style.width = progress + '%';
        });
        
        // === DUST PARTICLES ===
        const dustContainer = document.querySelector('.dust-container');
        for (let i = 0; i < 30; i++) {
            const dust = document.createElement('div');
            dust.className = 'dust';
            dust.style.left = Math.random() * 100 + '%';
            dust.style.top = Math.random() * 100 + 100 + '%';
            dust.style.setProperty('--duration', (15 + Math.random() * 20) + 's');
            dust.style.setProperty('--delay', (Math.random() * 10) + 's');
            dust.style.setProperty('--opacity', (0.1 + Math.random() * 0.3));
            dust.style.setProperty('--drift', (Math.random() * 100 - 50) + 'px');
            dustContainer.appendChild(dust);
        }
        
        // === SCROLL REVEAL ===
        const revealElements = document.querySelectorAll('.reveal, .reveal-stagger');
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });
        
        revealElements.forEach(el => revealObserver.observe(el));
        
        // === CATALOG CARD 3D TILT ===
        document.querySelectorAll('.catalog-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                const rotateY = (x - centerX) / 20;
                
                card.style.setProperty('--rotate-y', rotateY + 'deg');
                card.style.setProperty('--mouse-x', (x / rect.width * 100) + '%');
                card.style.setProperty('--mouse-y', (y / rect.height * 100) + '%');
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.setProperty('--rotate-y', '0deg');
            });
            
            // Card "flip" sound on click
            card.addEventListener('click', (e) => {
                const colony = card.dataset.colony;
                const colors = {
                    spark: 'var(--spark)',
                    forge: 'var(--forge)',
                    flow: 'var(--flow)',
                    nexus: 'var(--nexus)',
                    beacon: 'var(--beacon)',
                    grove: 'var(--grove)',
                    crystal: 'var(--crystal)'
                };
                createSoundPulse(e.clientX, e.clientY, colors[colony] || 'var(--brass)');
            });
        });
        
        
        // === MARBLE SIMULATION ===
        const canvas = document.getElementById('marble-canvas');
        const ctx = canvas.getContext('2d');
        let currentType = 'fold';
        let marbles = [];
        let controlParam = 0;
        let trails = [];
        
        function resizeCanvas() {
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width * window.devicePixelRatio;
            canvas.height = rect.height * window.devicePixelRatio;
            ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // Potential functions
        const potentials = {
            fold: (x, a) => {
                const t = (x - 0.5) * 4;
                return 0.5 + (Math.pow(t, 3) + a * t) * 0.08;
            },
            cusp: (x, a) => {
                const t = (x - 0.5) * 4;
                const b = a * 0.5;
                return 0.5 + (Math.pow(t, 4) - 2 * Math.pow(t, 2) + b * t) * 0.05;
            },
            swallowtail: (x, a) => {
                const t = (x - 0.5) * 4;
                const b = a * 0.3;
                return 0.5 + (Math.pow(t, 5) * 0.2 - Math.pow(t, 3) + b * t) * 0.04;
            }
        };
        
        function gradient(x, type, a) {
            const dx = 0.001;
            const V1 = potentials[type](x - dx, a);
            const V2 = potentials[type](x + dx, a);
            return (V2 - V1) / (2 * dx);
        }
        
        // Marble class with trails
        class Marble {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 2;
                this.vy = 0;
                this.radius = 10;
                this.baseRadius = 10;
                this.color = '#b8860b';
                this.trail = [];
                this.settled = false;
                this.settleTime = 0;
            }
            
            update(w, h) {
                const surfaceY = potentials[currentType](this.x / w, controlParam) * h;
                const grad = gradient(this.x / w, currentType, controlParam);
                
                // Add trail point
                this.trail.push({ x: this.x, y: this.y, age: 0 });
                if (this.trail.length > 30) this.trail.shift();
                this.trail.forEach(t => t.age++);
                
                // Physics
                this.vx += -grad * 0.4;
                this.vx *= 0.97;
                this.vy += 0.3;
                this.vy *= 0.94;
                
                this.x += this.vx;
                this.y += this.vy;
                
                // Squash/stretch based on velocity
                const speed = Math.sqrt(this.vx * this.vx + this.vy * this.vy);
                this.radius = this.baseRadius * (1 + Math.min(speed * 0.02, 0.3));
                
                // Bounce off surface
                if (this.y > surfaceY - this.radius) {
                    this.y = surfaceY - this.radius;
                    this.vy *= -0.6;
                    this.vx *= 0.9;
                    
                    // Create ripple on impact
                    if (Math.abs(this.vy) > 1) {
                        trails.push({
                            x: this.x,
                            y: surfaceY,
                            radius: 5,
                            maxRadius: 30,
                            opacity: 0.5
                        });
                    }
                }
                
                // Walls
                if (this.x < this.radius) { this.x = this.radius; this.vx *= -0.5; }
                if (this.x > w - this.radius) { this.x = w - this.radius; this.vx *= -0.5; }
                
                // Check if settled
                if (Math.abs(this.vx) < 0.1 && Math.abs(this.vy) < 0.1) {
                    this.settleTime++;
                    if (this.settleTime > 60) this.settled = true;
                } else {
                    this.settleTime = 0;
                }
            }
            
            draw(ctx) {
                // Draw trail
                ctx.beginPath();
                this.trail.forEach((t, i) => {
                    if (i === 0) ctx.moveTo(t.x, t.y);
                    else ctx.lineTo(t.x, t.y);
                });
                ctx.strokeStyle = `rgba(184, 134, 11, ${0.3})`;
                ctx.lineWidth = 3;
                ctx.lineCap = 'round';
                ctx.stroke();
                
                // Draw marble shadow
                ctx.beginPath();
                ctx.ellipse(this.x, this.y + this.radius + 5, this.radius * 0.8, this.radius * 0.3, 0, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0,0,0,0.1)';
                ctx.fill();
                
                // Draw marble
                const gradient = ctx.createRadialGradient(
                    this.x - this.radius * 0.3, 
                    this.y - this.radius * 0.3, 
                    0,
                    this.x, this.y, this.radius
                );
                gradient.addColorStop(0, '#f5d078');
                gradient.addColorStop(0.5, '#b8860b');
                gradient.addColorStop(1, '#8b6914');
                
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fillStyle = gradient;
                ctx.fill();
                
                // Highlight
                ctx.beginPath();
                ctx.arc(this.x - this.radius * 0.3, this.y - this.radius * 0.3, this.radius * 0.25, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(255,255,255,0.6)';
                ctx.fill();
                
                // Settled glow
                if (this.settled) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius + 8, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(184, 134, 11, 0.2)';
                    ctx.fill();
                }
            }
        }
        
        // Draw potential surface
        function drawSurface(w, h) {
            ctx.beginPath();
            ctx.moveTo(0, h);
            
            for (let x = 0; x <= w; x += 2) {
                const y = potentials[currentType](x / w, controlParam) * h;
                ctx.lineTo(x, y);
            }
            
            ctx.lineTo(w, h);
            ctx.closePath();
            
            // Gradient fill
            const grad = ctx.createLinearGradient(0, h * 0.3, 0, h);
            grad.addColorStop(0, '#e8e0d4');
            grad.addColorStop(0.5, '#d4ccc0');
            grad.addColorStop(1, '#c4b8a8');
            ctx.fillStyle = grad;
            ctx.fill();
            
            // Surface line with glow
            ctx.beginPath();
            for (let x = 0; x <= w; x += 2) {
                const y = potentials[currentType](x / w, controlParam) * h;
                if (x === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.strokeStyle = '#5c4a3a';
            ctx.lineWidth = 4;
            ctx.lineCap = 'round';
            ctx.stroke();
            
            // Highlight
            ctx.beginPath();
            for (let x = 0; x <= w; x += 2) {
                const y = potentials[currentType](x / w, controlParam) * h;
                if (x === 0) ctx.moveTo(x, y - 2);
                else ctx.lineTo(x, y - 2);
            }
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 1;
            ctx.stroke();
        }
        
        // Animation loop
        function animate() {
            const w = canvas.width / window.devicePixelRatio;
            const h = canvas.height / window.devicePixelRatio;
            
            ctx.clearRect(0, 0, w, h);
            
            // Background gradient
            const bgGrad = ctx.createLinearGradient(0, 0, 0, h);
            bgGrad.addColorStop(0, '#faf6f0');
            bgGrad.addColorStop(1, '#f5f0e6');
            ctx.fillStyle = bgGrad;
            ctx.fillRect(0, 0, w, h);
            
            // Draw ripples
            trails = trails.filter(t => {
                t.radius += 2;
                t.opacity -= 0.02;
                
                if (t.opacity > 0) {
                    ctx.beginPath();
                    ctx.arc(t.x, t.y, t.radius, 0, Math.PI * 2);
                    ctx.strokeStyle = `rgba(184, 134, 11, ${t.opacity})`;
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    return true;
                }
                return false;
            });
            
            // Draw surface
            drawSurface(w, h);
            
            // Update and draw marbles
            marbles.forEach((marble, i) => {
                marble.update(w, h);
                marble.draw(ctx);
            });
            
            // Draw parameter indicator
            ctx.fillStyle = '#1a1612';
            ctx.font = '12px "IBM Plex Mono", monospace';
            ctx.fillText(`Parameter a = ${controlParam.toFixed(2)}`, 12, 24);
            
            // Draw catastrophe type
            const typeLabels = {
                fold: 'FOLD · V = x³ + ax',
                cusp: 'CUSP · V = x⁴ + ax² + bx',
                swallowtail: 'SWALLOWTAIL · V = x⁵ + ax³ + bx² + cx'
            };
            ctx.fillStyle = '#5c4a3a';
            ctx.font = '10px "IBM Plex Mono", monospace';
            ctx.fillText(typeLabels[currentType], 12, h - 12);
            
            requestAnimationFrame(animate);
        }
        
        // Click to add marble
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = Math.min(e.clientY - rect.top, 50);
            
            marbles.push(new Marble(x, y));
            
            // Visual "drop" sound pulse
            createSoundPulse(e.clientX, e.clientY, 'var(--beacon)');
            
            if (marbles.length > 8) marbles.shift();
        });
        
        // Control parameter via mouse X
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            controlParam = (x - 0.5) * 4;
        });
        
        // Button controls
        document.querySelectorAll('.marble-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                createRipple(e, btn);
                createSoundPulse(e.clientX, e.clientY);
                
                document.querySelectorAll('.marble-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentType = btn.dataset.type;
                marbles = [];
                trails = [];
            });
        });
        
        // Add ripple to all buttons
        document.querySelectorAll('button').forEach(btn => {
            if (!btn.classList.contains('marble-btn')) {
                btn.addEventListener('click', (e) => {
                    createRipple(e, btn);
                });
            }
        });
        
        animate();
    </script>
</body>
</html>
