<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡ â€” The Great Consolidation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Space+Mono:wght@400;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
:root {
    --void: #030303;
    --deep: #0a0a0c;
    --surface: #111113;
    --text: #f4f1ea;
    --text-dim: rgba(244, 241, 234, 0.65);
    --text-whisper: rgba(244, 241, 234, 0.35);
    --gold: #c4a35a;
    --gold-glow: rgba(196, 163, 90, 0.4);
    
    --spark: #FF00FF;
    --forge: #FF2D55;
    --flow: #00E5CC;
    --nexus: #AF52DE;
    --beacon: #FFD60A;
    --grove: #30D158;
    --crystal: #0A84FF;
    
    --font-display: 'Cormorant Garamond', Georgia, serif;
    --font-mono: 'Space Mono', monospace;
    --font-body: 'Inter', -apple-system, sans-serif;
    
    --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
    --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
    font-family: var(--font-body);
    font-weight: 300;
    background: var(--void);
    color: var(--text);
    font-size: 17px;
    line-height: 1.8;
    overflow-x: hidden;
    cursor: none;
    -webkit-font-smoothing: antialiased;
}

/* === CUSTOM CURSOR === */
.cursor {
    width: 24px;
    height: 24px;
    border: 1px solid var(--text);
    border-radius: 50%;
    position: fixed;
    pointer-events: none;
    z-index: 99999;
    mix-blend-mode: difference;
    transition: transform 0.2s var(--ease-out-expo), opacity 0.3s;
    transform: translate(-50%, -50%);
}
.cursor-dot {
    width: 4px;
    height: 4px;
    background: var(--text);
    border-radius: 50%;
    position: fixed;
    pointer-events: none;
    z-index: 99999;
    transform: translate(-50%, -50%);
}
.cursor.hover { transform: translate(-50%, -50%) scale(2.5); border-color: var(--gold); }

@media (max-width: 768px) {
    body { cursor: auto; }
    .cursor, .cursor-dot { display: none; }
}

/* === FILM GRAIN === */
.grain {
    position: fixed;
    inset: -100%;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    opacity: 0.025;
    pointer-events: none;
    z-index: 10000;
    animation: grain 8s steps(10) infinite;
}
@keyframes grain {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-5%, -10%); }
    30% { transform: translate(3%, -15%); }
    50% { transform: translate(12%, 9%); }
    70% { transform: translate(9%, 4%); }
    90% { transform: translate(-1%, 7%); }
}

/* === PROGRESS === */
.progress {
    position: fixed;
    top: 0;
    left: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--crystal), var(--nexus), var(--gold), var(--grove));
    z-index: 9999;
    transform-origin: left;
    transform: scaleX(0);
}

/* === NAV === */
nav {
    position: fixed;
    right: 2rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
}
nav a {
    width: 10px;
    height: 10px;
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 50%;
    display: block;
    transition: all 0.4s var(--ease-out-expo);
    position: relative;
}
nav a::after {
    content: attr(data-title);
    position: absolute;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
    color: var(--text-whisper);
}
nav a:hover::after { opacity: 1; }
nav a.active { transform: scale(1.5); }
nav a[data-section="hero"].active { background: var(--gold); border-color: var(--gold); }
nav a[data-section="crdt"].active { background: var(--grove); border-color: var(--grove); }
nav a[data-section="llm"].active { background: var(--nexus); border-color: var(--nexus); }
nav a[data-section="sota"].active { background: var(--forge); border-color: var(--forge); }
nav a[data-section="colonies"].active { background: var(--spark); border-color: var(--spark); }
nav a[data-section="commits"].active { background: var(--crystal); border-color: var(--crystal); }

@media (max-width: 768px) { nav { display: none; } }

/* === SECTIONS === */
section {
    min-height: 100vh;
    position: relative;
    overflow: hidden;
}

section canvas {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
}

.section-content {
    position: relative;
    z-index: 1;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 10vh 2rem;
}

.container {
    max-width: 800px;
    width: 100%;
}

/* === TYPOGRAPHY === */
h1 {
    font-family: var(--font-display);
    font-size: clamp(3rem, 10vw, 6rem);
    font-weight: 300;
    line-height: 1;
    margin-bottom: 1.5rem;
    letter-spacing: -0.02em;
}

h2 {
    font-family: var(--font-display);
    font-size: clamp(2.5rem, 6vw, 4rem);
    font-weight: 300;
    line-height: 1.1;
    margin-bottom: 1rem;
}

h3 {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 3vw, 2rem);
    font-weight: 400;
    margin-bottom: 0.5rem;
}

.label {
    font-family: var(--font-mono);
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text-whisper);
    margin-bottom: 0.5rem;
}

.kanji {
    font-size: clamp(4rem, 15vw, 8rem);
    background: linear-gradient(180deg, var(--text) 0%, var(--text-dim) 100%);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 60px var(--gold-glow));
}

.subtitle {
    font-family: var(--font-display);
    font-size: clamp(1rem, 2vw, 1.3rem);
    font-style: italic;
    color: var(--text-dim);
    max-width: 500px;
}

p { color: var(--text-dim); margin-bottom: 1rem; }
p:last-child { margin-bottom: 0; }

.formula {
    font-family: var(--font-mono);
    font-size: clamp(1rem, 2vw, 1.2rem);
    color: var(--gold);
    padding: 1.5rem 2rem;
    border-left: 2px solid var(--gold);
    margin: 2rem 0;
    background: rgba(196, 163, 90, 0.05);
}

/* === HERO === */
#hero { background: var(--void); }
#hero .section-content { text-align: center; }
.hero-stats {
    display: flex;
    gap: 3rem;
    margin-top: 4rem;
    flex-wrap: wrap;
    justify-content: center;
}
.stat {
    text-align: center;
}
.stat-value {
    font-family: var(--font-mono);
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 700;
}
.stat-label {
    font-size: 12px;
    color: var(--text-whisper);
    text-transform: uppercase;
    letter-spacing: 0.1em;
}
.stat.gold .stat-value { color: var(--gold); }
.stat.green .stat-value { color: var(--grove); }
.stat.red .stat-value { color: var(--forge); }
.stat.blue .stat-value { color: var(--crystal); }

.scroll-hint {
    position: absolute;
    bottom: 3rem;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    animation: fadeIn 1s 1.5s both;
}
.scroll-hint span {
    font-family: var(--font-mono);
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--text-whisper);
}
.scroll-line {
    width: 1px;
    height: 50px;
    background: linear-gradient(180deg, var(--text-whisper), transparent);
    animation: scrollPulse 2s ease-in-out infinite;
}
@keyframes scrollPulse {
    0%, 100% { transform: scaleY(1); opacity: 1; }
    50% { transform: scaleY(0.5); opacity: 0.5; }
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateX(-50%) translateY(20px); }
    to { opacity: 1; transform: translateX(-50%) translateY(0); }
}

/* === ARCHITECTURE CARDS === */
.arch-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 3rem;
}

.arch-card {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    padding: 2rem;
    position: relative;
    overflow: hidden;
    transition: all 0.4s var(--ease-out-expo);
}

.arch-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--card-color, var(--gold));
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.5s var(--ease-out-expo);
}

.arch-card:hover {
    background: rgba(255,255,255,0.04);
    transform: translateY(-4px);
    border-color: rgba(255,255,255,0.1);
}

.arch-card:hover::before { transform: scaleX(1); }

.arch-card .icon {
    font-size: 2rem;
    margin-bottom: 1rem;
}

.arch-card h4 {
    font-family: var(--font-display);
    font-size: 1.3rem;
    font-weight: 400;
    margin-bottom: 0.5rem;
    color: var(--text);
}

.arch-card .desc {
    font-size: 14px;
    color: var(--text-dim);
    margin-bottom: 1rem;
}

.arch-card code {
    font-family: var(--font-mono);
    font-size: 11px;
    padding: 1rem;
    background: var(--void);
    border-radius: 6px;
    display: block;
    color: var(--text-whisper);
    white-space: pre;
    overflow-x: auto;
}

/* === BEFORE/AFTER === */
.comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin: 3rem 0;
}
@media (max-width: 768px) { .comparison { grid-template-columns: 1fr; } }

.panel {
    background: rgba(255,255,255,0.02);
    border-radius: 12px;
    overflow: hidden;
}

.panel-header {
    padding: 0.75rem 1.25rem;
    font-family: var(--font-mono);
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.panel.before .panel-header { background: rgba(255, 45, 85, 0.15); color: var(--forge); }
.panel.after .panel-header { background: rgba(48, 209, 88, 0.15); color: var(--grove); }

.panel-body {
    padding: 1.5rem;
    font-family: var(--font-mono);
    font-size: 12px;
    line-height: 1.8;
    color: var(--text-dim);
}

.panel-body .comment { color: var(--text-whisper); }
.panel-body .highlight { color: var(--gold); }

/* === COLONY CONSTELLATION === */
.colony-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 1.5rem;
    margin: 3rem 0;
}

.colony-card {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    transition: all 0.4s var(--ease-out-expo);
    position: relative;
    overflow: hidden;
}

.colony-card::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle at center, var(--glow) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.4s;
}

.colony-card:hover::before { opacity: 0.15; }
.colony-card:hover { transform: translateY(-8px) scale(1.02); }

.colony-card .emoji { font-size: 2.5rem; margin-bottom: 0.75rem; }
.colony-card .name {
    font-family: var(--font-display);
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--colony-color);
}
.colony-card .type {
    font-family: var(--font-mono);
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-whisper);
    margin-bottom: 0.75rem;
}
.colony-card .quote {
    font-family: var(--font-display);
    font-size: 13px;
    font-style: italic;
    color: var(--text-dim);
}

/* === COMMIT LOG === */
.commit-log {
    background: rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 12px;
    overflow: hidden;
    margin: 2rem 0;
}

.commit {
    display: grid;
    grid-template-columns: 90px 1fr auto;
    gap: 1.5rem;
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid rgba(255,255,255,0.04);
    transition: background 0.2s;
    align-items: center;
}
.commit:last-child { border-bottom: none; }
.commit:hover { background: rgba(255,255,255,0.02); }

.commit .hash {
    font-family: var(--font-mono);
    font-size: 12px;
    color: var(--gold);
}
.commit .msg {
    font-size: 14px;
    color: var(--text);
}
.commit .stats {
    font-family: var(--font-mono);
    font-size: 11px;
    display: flex;
    gap: 1rem;
}
.commit .add { color: var(--grove); }
.commit .del { color: var(--forge); }

@media (max-width: 600px) {
    .commit { grid-template-columns: 1fr; gap: 0.5rem; }
}

/* === REVEAL === */
.reveal {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 1s var(--ease-out-expo), transform 1s var(--ease-out-expo);
}
.reveal.visible { opacity: 1; transform: translateY(0); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }
.reveal-delay-3 { transition-delay: 0.3s; }
.reveal-delay-4 { transition-delay: 0.4s; }
.reveal-delay-5 { transition-delay: 0.5s; }

/* === FOOTER === */
footer {
    text-align: center;
    padding: 8rem 2rem;
}
footer .kanji { margin-bottom: 1rem; }
footer .tagline {
    font-family: var(--font-mono);
    font-size: 11px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--text-whisper);
}
    </style>
</head>
<body>
    <div class="cursor" id="cursor"></div>
    <div class="cursor-dot" id="cursor-dot"></div>
    <div class="grain"></div>
    <div class="progress" id="progress"></div>
    
    <nav>
        <a href="#hero" data-section="hero" data-title="Overview" class="active"></a>
        <a href="#crdt" data-section="crdt" data-title="CRDT"></a>
        <a href="#llm" data-section="llm" data-title="LLM"></a>
        <a href="#sota" data-section="sota" data-title="SOTA"></a>
        <a href="#colonies" data-section="colonies" data-title="Seven"></a>
        <a href="#commits" data-section="commits" data-title="History"></a>
    </nav>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         HERO
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="hero">
        <canvas id="hero-canvas"></canvas>
        <div class="section-content">
            <p class="label reveal">December 13, 2025</p>
            <div class="kanji reveal reveal-delay-1">é¡</div>
            <h1 class="reveal reveal-delay-2">The Great Consolidation</h1>
            <p class="subtitle reveal reveal-delay-3">CRDT-powered rooms. Unified LLM abstraction. SOTA vision. Seven colonies with souls.</p>
            
            <div class="hero-stats reveal reveal-delay-4">
                <div class="stat gold">
                    <div class="stat-value" data-target="147">0</div>
                    <div class="stat-label">K lines documented</div>
                </div>
                <div class="stat red">
                    <div class="stat-value" data-target="50">0</div>
                    <div class="stat-label">K dead code removed</div>
                </div>
                <div class="stat green">
                    <div class="stat-value" data-target="611">0</div>
                    <div class="stat-label">files touched</div>
                </div>
                <div class="stat blue">
                    <div class="stat-value" data-target="9">0</div>
                    <div class="stat-label">major commits</div>
                </div>
            </div>
            
            <div class="scroll-hint">
                <span>Scroll</span>
                <div class="scroll-line"></div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CRDT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="crdt">
        <canvas id="crdt-canvas"></canvas>
        <div class="section-content">
            <div class="container">
                <p class="label reveal">Architecture Change #1</p>
                <h2 class="reveal reveal-delay-1" style="color: var(--grove);">Conflict-Free Replicated Data Types</h2>
                <p class="subtitle reveal reveal-delay-2">Rooms now converge. Multiple workers apply operations in any order and reach identical state.</p>
                
                <div class="formula reveal reveal-delay-3">
                    LWW(timestamp, client_id, version, op_id) â†’ deterministic total order
                </div>
                
                <div class="arch-grid">
                    <div class="arch-card reveal" style="--card-color: var(--grove);">
                        <div class="icon">ğŸ”„</div>
                        <h4>LWW Registers</h4>
                        <p class="desc">Last-Writer-Wins with 4-tuple clock for deterministic tie-breaking.</p>
                        <code>SET path="title" value="New"
â†’ Overwrites if newer clock</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-1" style="--card-color: var(--crystal);">
                        <div class="icon">ğŸ“¦</div>
                        <h4>LWW Element Sets</h4>
                        <p class="desc">Collections with ADD/REMOVE by element_id. Tombstones prevent resurrection.</p>
                        <code>ADD element_id="abc"
REMOVE element_id="abc"</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-2" style="--card-color: var(--beacon);">
                        <div class="icon">ğŸ”¢</div>
                        <h4>Idempotent Counters</h4>
                        <p class="desc">INCREMENT tracked by op_id. Exactly-once semantics with retries.</p>
                        <code>INCREMENT delta=1 op_id="x1"
â†’ Ignored if already applied</code>
                    </div>
                </div>
                
                <div class="comparison reveal">
                    <div class="panel before">
                        <div class="panel-header">Before: Race Conditions</div>
                        <div class="panel-body">
snap = <span class="highlight">await get_snapshot(room_id)</span>
state["characters"].append(new_char)
await persist_snapshot(room_id, state)
<span class="comment"># âŒ Concurrent writes lose data</span>
<span class="comment"># âŒ No conflict resolution</span>
                        </div>
                    </div>
                    <div class="panel after">
                        <div class="panel-header">After: Convergence</div>
                        <div class="panel-body">
op = <span class="highlight">create_operation(</span>
    op_type=OperationType.ADD,
    element_id=correlation_id,
<span class="highlight">)</span>
await apply_crdt_operations(room_id, [op])
<span class="comment"># âœ… Any order â†’ same result</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         LLM
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="llm">
        <canvas id="llm-canvas"></canvas>
        <div class="section-content">
            <div class="container">
                <p class="label reveal">Architecture Change #2</p>
                <h2 class="reveal reveal-delay-1" style="color: var(--nexus);">Unified LLM Abstraction</h2>
                <p class="subtitle reveal reveal-delay-2">Removed Ollama. Consolidated on Transformers + OpenAI-compatible API.</p>
                
                <div class="arch-grid">
                    <div class="arch-card reveal" style="--card-color: var(--forge);">
                        <div class="icon">ğŸ—‘ï¸</div>
                        <h4>Removed: Ollama</h4>
                        <p class="desc">Eliminated separate client and model wrappers. One less service to maintain.</p>
                    </div>
                    <div class="arch-card reveal reveal-delay-1" style="--card-color: var(--grove);">
                        <div class="icon">ğŸ</div>
                        <h4>Added: MPS Support</h4>
                        <p class="desc">Apple Silicon acceleration via torch.backends.mps. Configurable dtype.</p>
                        <code>device="mps"
dtype=torch.float16</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-2" style="--card-color: var(--crystal);">
                        <div class="icon">ğŸŒ</div>
                        <h4>Added: OpenAI API</h4>
                        <p class="desc">Generic HTTP client for vLLM, SGLang, or any compatible endpoint.</p>
                        <code>provider="api"
base_url=$KAIROS_LLM_API_BASE_URL</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-3" style="--card-color: var(--beacon);">
                        <div class="icon">ğŸ“¦</div>
                        <h4>Added: Micro-Batching</h4>
                        <p class="desc">Automatic request batching for throughput. Groups by (max_tokens, temp).</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         SOTA
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="sota">
        <canvas id="sota-canvas"></canvas>
        <div class="section-content">
            <div class="container">
                <p class="label reveal">Architecture Change #3</p>
                <h2 class="reveal reveal-delay-1" style="color: var(--forge);">State-of-the-Art Vision</h2>
                <p class="subtitle reveal reveal-delay-2">Unified perception pipeline. Single entry point for detection, segmentation, captioning.</p>
                
                <div class="arch-grid">
                    <div class="arch-card reveal" style="--card-color: var(--forge);">
                        <div class="icon">ğŸ‘ï¸</div>
                        <h4>Florence-2</h4>
                        <p class="desc">Microsoft's unified vision foundation. Replaces DETR.</p>
                        <code>â€¢ Object detection
â€¢ Dense captioning
â€¢ Visual grounding
â€¢ OCR with regions</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-1" style="--card-color: var(--grove);">
                        <div class="icon">âœ‚ï¸</div>
                        <h4>SAM2</h4>
                        <p class="desc">Segment Anything 2 with streaming memory for video.</p>
                        <code>â€¢ Point/box/mask prompts
â€¢ Memory propagation
â€¢ Real-time tracking</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-2" style="--card-color: var(--crystal);">
                        <div class="icon">ğŸ¬</div>
                        <h4>V-JEPA 2</h4>
                        <p class="desc">Meta's video world model. 1M hours pre-training.</p>
                        <code>â€¢ Video encoding
â€¢ Predictive reps
â€¢ World model backbone</code>
                    </div>
                    <div class="arch-card reveal reveal-delay-3" style="--card-color: var(--nexus);">
                        <div class="icon">ğŸ¤</div>
                        <h4>EmoVoice + Audio2Face</h4>
                        <p class="desc">LLM-controlled emotional TTS with lip sync.</p>
                        <code>â€¢ Emotion tags
â€¢ Real-time synthesis
â€¢ Blendshape output</code>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         COLONIES
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="colonies">
        <canvas id="colonies-canvas"></canvas>
        <div class="section-content">
            <div class="container">
                <p class="label reveal">Architecture Change #4</p>
                <h2 class="reveal reveal-delay-1" style="color: var(--spark);">Colony Character Bible</h2>
                <p class="subtitle reveal reveal-delay-2">Each colony is now a psychologically complete character with wants, needs, flaws, and fears.</p>
                
                <div class="colony-grid">
                    <div class="colony-card reveal" style="--colony-color: var(--spark); --glow: var(--spark);">
                        <div class="emoji">ğŸ”¥</div>
                        <div class="name">Spark</div>
                        <div class="type">Fold (Aâ‚‚) â€” Threshold</div>
                        <div class="quote">"What if weâ€”no, actuallyâ€”"</div>
                    </div>
                    <div class="colony-card reveal reveal-delay-1" style="--colony-color: var(--forge); --glow: var(--forge);">
                        <div class="emoji">âš’ï¸</div>
                        <div class="name">Forge</div>
                        <div class="type">Cusp (Aâ‚ƒ) â€” Hysteresis</div>
                        <div class="quote">"Does it work? No? Not done."</div>
                    </div>
                    <div class="colony-card reveal reveal-delay-2" style="--colony-color: var(--flow); --glow: var(--flow);">
                        <div class="emoji">ğŸŒŠ</div>
                        <div class="name">Flow</div>
                        <div class="type">Swallowtail (Aâ‚„) â€” Recovery</div>
                        <div class="quote">"I've seen this break before."</div>
                    </div>
                    <div class="colony-card reveal reveal-delay-3" style="--colony-color: var(--nexus); --glow: var(--nexus);">
                        <div class="emoji">ğŸ”—</div>
                        <div class="name">Nexus</div>
                        <div class="type">Butterfly (Aâ‚…) â€” Integration</div>
                        <div class="quote">"Everything connects."</div>
                    </div>
                    <div class="colony-card reveal" style="--colony-color: var(--beacon); --glow: var(--beacon);">
                        <div class="emoji">ğŸ—¼</div>
                        <div class="name">Beacon</div>
                        <div class="type">Hyperbolic (Dâ‚„âº) â€” Strategy</div>
                        <div class="quote">"If we don't plan, we fail."</div>
                    </div>
                    <div class="colony-card reveal reveal-delay-1" style="--colony-color: var(--grove); --glow: var(--grove);">
                        <div class="emoji">ğŸŒ¿</div>
                        <div class="name">Grove</div>
                        <div class="type">Elliptic (Dâ‚„â») â€” Knowledge</div>
                        <div class="quote">"There's always more to learn."</div>
                    </div>
                    <div class="colony-card reveal reveal-delay-2" style="--colony-color: var(--crystal); --glow: var(--crystal);">
                        <div class="emoji">ğŸ’</div>
                        <div class="name">Crystal</div>
                        <div class="type">Parabolic (Dâ‚…) â€” Boundary</div>
                        <div class="quote">"Prove it."</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         COMMITS
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section id="commits">
        <canvas id="commits-canvas"></canvas>
        <div class="section-content">
            <div class="container">
                <p class="label reveal">The Record</p>
                <h2 class="reveal reveal-delay-1" style="color: var(--crystal);">Commit History</h2>
                <p class="subtitle reveal reveal-delay-2">9 major commits over 24 hours.</p>
                
                <div class="commit-log reveal reveal-delay-3">
                    <div class="commit">
                        <span class="hash">33cd7e843</span>
                        <span class="msg">docs: restore docs directory</span>
                        <span class="stats"><span class="add">+147,141</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">42b6ad7b6</span>
                        <span class="msg">feat: major system consolidation</span>
                        <span class="stats"><span class="add">+4,055</span> <span class="del">-11,259</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">747a8295c</span>
                        <span class="msg">chore: dead code cleanup</span>
                        <span class="stats"><span class="add">+8,799</span> <span class="del">-3,111</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">cf1275337</span>
                        <span class="msg">docs: external audit verification</span>
                        <span class="stats"><span class="add">+16,881</span> <span class="del">-8,103</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">34c1ddbc0</span>
                        <span class="msg">feat: SOTA integrations, colony bible</span>
                        <span class="stats"><span class="add">+16,828</span> <span class="del">-9,453</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">ace197673</span>
                        <span class="msg">chore: documentation overhaul</span>
                        <span class="stats"><span class="add">+4,348</span> <span class="del">-865</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">b0fc63f05</span>
                        <span class="msg">chore: modularize socketio</span>
                        <span class="stats"><span class="add">+3,943</span> <span class="del">-5,207</span></span>
                    </div>
                    <div class="commit">
                        <span class="hash">d4e919f3e</span>
                        <span class="msg">chore: CI/pre-commit + E8 migration</span>
                        <span class="stats"><span class="add">+5,363</span> <span class="del">-7,968</span></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="kanji reveal">é¡</div>
        <p class="tagline reveal reveal-delay-1">The mirror that equals its reflection</p>
    </footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CURSOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const cursor = document.getElementById('cursor');
const cursorDot = document.getElementById('cursor-dot');
let mouseX = 0, mouseY = 0;

document.addEventListener('mousemove', e => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    cursor.style.left = mouseX + 'px';
    cursor.style.top = mouseY + 'px';
    cursorDot.style.left = mouseX + 'px';
    cursorDot.style.top = mouseY + 'px';
});

document.querySelectorAll('a, button, .arch-card, .colony-card, .commit').forEach(el => {
    el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
    el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SCROLL & NAV
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const progress = document.getElementById('progress');
const navLinks = document.querySelectorAll('nav a');
const sections = document.querySelectorAll('section');

window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const total = document.documentElement.scrollHeight - window.innerHeight;
    progress.style.transform = `scaleX(${scrollY / total})`;
    
    let current = '';
    sections.forEach(section => {
        const top = section.offsetTop - window.innerHeight / 2;
        if (scrollY >= top) current = section.id;
    });
    navLinks.forEach(link => {
        link.classList.toggle('active', link.dataset.section === current);
    });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REVEAL ON SCROLL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) entry.target.classList.add('visible');
    });
}, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STAT COUNTERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const statObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            const el = entry.target;
            const target = parseInt(el.dataset.target);
            let current = 0;
            const duration = 1500;
            const steps = 50;
            const increment = target / steps;
            const stepTime = duration / steps;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                el.textContent = Math.floor(current);
            }, stepTime);
            
            statObserver.unobserve(el);
        }
    });
}, { threshold: 0.5 });

document.querySelectorAll('.stat-value').forEach(el => statObserver.observe(el));

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CANVAS SETUP
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const COLORS = {
    spark: '#FF00FF', forge: '#FF2D55', flow: '#00E5CC', 
    nexus: '#AF52DE', beacon: '#FFD60A', grove: '#30D158', crystal: '#0A84FF',
    gold: '#c4a35a'
};

function resizeCanvas(canvas) {
    const dpr = Math.min(window.devicePixelRatio, 2);
    canvas.width = canvas.offsetWidth * dpr;
    canvas.height = canvas.offsetHeight * dpr;
    const ctx = canvas.getContext('2d');
    ctx.scale(dpr, dpr);
    return ctx;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HERO CANVAS â€” Particle Constellation
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('hero-canvas');
    let ctx = resizeCanvas(canvas);
    let particles = [];
    let time = 0;
    
    class Particle {
        constructor(w, h) {
            this.reset(w, h);
        }
        reset(w, h) {
            this.x = Math.random() * w;
            this.y = Math.random() * h;
            this.z = Math.random() * 1000;
            this.vx = (Math.random() - 0.5) * 0.3;
            this.vy = (Math.random() - 0.5) * 0.3;
            this.vz = -Math.random() * 1.5 - 0.3;
            this.color = Object.values(COLORS)[Math.floor(Math.random() * 8)];
        }
        update(w, h) {
            // Mouse attraction
            const dx = mouseX - this.x;
            const dy = mouseY - this.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist < 200 && dist > 0) {
                this.vx += dx / dist * 0.015;
                this.vy += dy / dist * 0.015;
            }
            
            this.x += this.vx;
            this.y += this.vy;
            this.z += this.vz;
            this.vx *= 0.99;
            this.vy *= 0.99;
            
            if (this.z < 1) this.reset(w, h);
            if (this.x < 0 || this.x > w) this.vx *= -1;
            if (this.y < 0 || this.y > h) this.vy *= -1;
        }
        draw(ctx, w, h) {
            const scale = 1000 / (1000 + this.z);
            const x = (this.x - w/2) * scale + w/2;
            const y = (this.y - h/2) * scale + h/2;
            const r = Math.max(0.5, 2.5 * scale);
            const alpha = Math.min(1, scale * 1.5);
            
            ctx.beginPath();
            ctx.arc(x, y, r, 0, Math.PI * 2);
            ctx.fillStyle = this.color + Math.floor(alpha * 80).toString(16).padStart(2, '0');
            ctx.fill();
        }
    }
    
    function init() {
        ctx = resizeCanvas(canvas);
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        particles = Array.from({ length: 120 }, () => new Particle(w, h));
    }
    
    function draw() {
        time += 0.01;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.15)';
        ctx.fillRect(0, 0, w, h);
        
        // Draw connections
        for (let i = 0; i < particles.length; i++) {
            for (let j = i + 1; j < particles.length; j++) {
                const dx = particles[i].x - particles[j].x;
                const dy = particles[i].y - particles[j].y;
                const dist = Math.sqrt(dx * dx + dy * dy);
                if (dist < 80) {
                    ctx.beginPath();
                    ctx.moveTo(particles[i].x, particles[i].y);
                    ctx.lineTo(particles[j].x, particles[j].y);
                    ctx.strokeStyle = `rgba(255,255,255,${0.03 * (1 - dist/80)})`;
                    ctx.stroke();
                }
            }
        }
        
        particles.forEach(p => { p.update(w, h); p.draw(ctx, w, h); });
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CRDT CANVAS â€” Convergence Visualization
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('crdt-canvas');
    let ctx = resizeCanvas(canvas);
    let time = 0;
    let ops = [];
    
    function initOps(w, h) {
        ops = [];
        for (let i = 0; i < 50; i++) {
            ops.push({
                x: Math.random() * w,
                y: Math.random() * h,
                targetX: w / 2,
                targetY: h / 2,
                speed: 0.005 + Math.random() * 0.01,
                phase: Math.random() * Math.PI * 2,
                size: 3 + Math.random() * 5,
                color: Math.random() < 0.33 ? COLORS.grove : Math.random() < 0.5 ? COLORS.crystal : COLORS.beacon
            });
        }
    }
    
    function init() {
        ctx = resizeCanvas(canvas);
        initOps(canvas.offsetWidth, canvas.offsetHeight);
    }
    
    function draw() {
        time += 0.01;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.05)';
        ctx.fillRect(0, 0, w, h);
        
        // Central convergence point
        const cx = w / 2;
        const cy = h / 2;
        const breathe = 1 + Math.sin(time * 0.5) * 0.1;
        
        // Draw convergence gradient
        const grad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 150 * breathe);
        grad.addColorStop(0, 'rgba(48, 209, 88, 0.1)');
        grad.addColorStop(1, 'transparent');
        ctx.fillStyle = grad;
        ctx.beginPath();
        ctx.arc(cx, cy, 150 * breathe, 0, Math.PI * 2);
        ctx.fill();
        
        // Operations flowing toward center
        ops.forEach(op => {
            // Spiral toward center
            const dx = op.targetX - op.x;
            const dy = op.targetY - op.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            
            if (dist > 50) {
                op.x += dx * op.speed + Math.sin(time + op.phase) * 0.5;
                op.y += dy * op.speed + Math.cos(time + op.phase) * 0.5;
            } else {
                // Reset to edge
                const angle = Math.random() * Math.PI * 2;
                const r = Math.max(w, h);
                op.x = cx + Math.cos(angle) * r;
                op.y = cy + Math.sin(angle) * r;
            }
            
            // Draw
            const alpha = Math.min(1, dist / 200);
            ctx.beginPath();
            ctx.arc(op.x, op.y, op.size * (0.5 + alpha * 0.5), 0, Math.PI * 2);
            ctx.fillStyle = op.color + Math.floor(alpha * 150).toString(16).padStart(2, '0');
            ctx.fill();
            
            // Trail
            ctx.beginPath();
            ctx.moveTo(op.x, op.y);
            ctx.lineTo(op.x + dx * 0.1, op.y + dy * 0.1);
            ctx.strokeStyle = op.color + '30';
            ctx.lineWidth = 1;
            ctx.stroke();
        });
        
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LLM CANVAS â€” Neural Flow
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('llm-canvas');
    let ctx = resizeCanvas(canvas);
    let time = 0;
    let nodes = [];
    let signals = [];
    
    function initNodes(w, h) {
        nodes = [];
        const layers = [3, 5, 7, 5, 3];
        const layerSpacing = w / (layers.length + 1);
        
        layers.forEach((count, layerIdx) => {
            const x = layerSpacing * (layerIdx + 1);
            for (let i = 0; i < count; i++) {
                const y = h / 2 + (i - (count - 1) / 2) * 60;
                nodes.push({ x, y, layer: layerIdx, idx: i });
            }
        });
        
        signals = [];
    }
    
    function init() {
        ctx = resizeCanvas(canvas);
        initNodes(canvas.offsetWidth, canvas.offsetHeight);
    }
    
    function draw() {
        time += 0.02;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.08)';
        ctx.fillRect(0, 0, w, h);
        
        // Draw connections
        nodes.forEach(node => {
            const nextLayer = nodes.filter(n => n.layer === node.layer + 1);
            nextLayer.forEach(target => {
                ctx.beginPath();
                ctx.moveTo(node.x, node.y);
                ctx.lineTo(target.x, target.y);
                ctx.strokeStyle = 'rgba(175, 82, 222, 0.04)';
                ctx.stroke();
            });
        });
        
        // Add signals
        if (Math.random() < 0.1) {
            const startNode = nodes.filter(n => n.layer === 0)[Math.floor(Math.random() * 3)];
            signals.push({
                x: startNode.x,
                y: startNode.y,
                layer: 0,
                progress: 0,
                targetY: h / 2 + (Math.random() - 0.5) * 200
            });
        }
        
        // Update and draw signals
        signals = signals.filter(sig => {
            sig.progress += 0.02;
            sig.x += 3;
            sig.y += (sig.targetY - sig.y) * 0.05;
            
            if (sig.x > w) return false;
            
            // Glow
            const grad = ctx.createRadialGradient(sig.x, sig.y, 0, sig.x, sig.y, 15);
            grad.addColorStop(0, 'rgba(175, 82, 222, 0.5)');
            grad.addColorStop(1, 'transparent');
            ctx.fillStyle = grad;
            ctx.beginPath();
            ctx.arc(sig.x, sig.y, 15, 0, Math.PI * 2);
            ctx.fill();
            
            ctx.beginPath();
            ctx.arc(sig.x, sig.y, 3, 0, Math.PI * 2);
            ctx.fillStyle = COLORS.nexus;
            ctx.fill();
            
            return true;
        });
        
        // Draw nodes
        nodes.forEach(node => {
            const pulse = Math.sin(time + node.idx * 0.5) * 0.2 + 0.8;
            ctx.beginPath();
            ctx.arc(node.x, node.y, 5 * pulse, 0, Math.PI * 2);
            ctx.fillStyle = 'rgba(175, 82, 222, 0.3)';
            ctx.fill();
        });
        
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SOTA CANVAS â€” Perception Pipeline
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('sota-canvas');
    let ctx = resizeCanvas(canvas);
    let time = 0;
    let boxes = [];
    
    function initBoxes(w, h) {
        boxes = [];
        for (let i = 0; i < 15; i++) {
            boxes.push({
                x: Math.random() * w,
                y: Math.random() * h,
                w: 30 + Math.random() * 80,
                h: 30 + Math.random() * 60,
                vx: (Math.random() - 0.5) * 0.5,
                vy: (Math.random() - 0.5) * 0.5,
                color: [COLORS.forge, COLORS.grove, COLORS.crystal][Math.floor(Math.random() * 3)],
                phase: Math.random() * Math.PI * 2
            });
        }
    }
    
    function init() {
        ctx = resizeCanvas(canvas);
        initBoxes(canvas.offsetWidth, canvas.offsetHeight);
    }
    
    function draw() {
        time += 0.01;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.06)';
        ctx.fillRect(0, 0, w, h);
        
        // Detection boxes floating
        boxes.forEach(box => {
            box.x += box.vx;
            box.y += box.vy;
            
            if (box.x < 0 || box.x > w - box.w) box.vx *= -1;
            if (box.y < 0 || box.y > h - box.h) box.vy *= -1;
            
            const pulse = Math.sin(time * 2 + box.phase) * 0.1 + 0.9;
            
            // Box outline
            ctx.strokeStyle = box.color + '40';
            ctx.lineWidth = 1.5;
            ctx.strokeRect(box.x, box.y, box.w * pulse, box.h * pulse);
            
            // Corner markers
            const cornerSize = 8;
            ctx.fillStyle = box.color + '80';
            ctx.fillRect(box.x, box.y, cornerSize, 2);
            ctx.fillRect(box.x, box.y, 2, cornerSize);
            ctx.fillRect(box.x + box.w - cornerSize, box.y, cornerSize, 2);
            ctx.fillRect(box.x + box.w - 2, box.y, 2, cornerSize);
        });
        
        // Segmentation mask hints
        for (let i = 0; i < 3; i++) {
            const x = (w / 4) * (i + 1);
            const y = h / 2 + Math.sin(time + i) * 50;
            
            ctx.beginPath();
            ctx.arc(x, y, 40 + Math.sin(time * 2 + i) * 10, 0, Math.PI * 2);
            ctx.fillStyle = COLORS.grove + '10';
            ctx.fill();
            ctx.strokeStyle = COLORS.grove + '30';
            ctx.stroke();
        }
        
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COLONIES CANVAS â€” Fano Plane with Catastrophes
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('colonies-canvas');
    let ctx = resizeCanvas(canvas);
    let time = 0;
    
    const COLONY_DATA = [
        { id: 1, name: 'Spark', color: COLORS.spark, angle: -Math.PI/2 },
        { id: 2, name: 'Forge', color: COLORS.forge, angle: -Math.PI/2 + Math.PI*2/7 },
        { id: 3, name: 'Flow', color: COLORS.flow, angle: -Math.PI/2 + Math.PI*4/7 },
        { id: 4, name: 'Nexus', color: COLORS.nexus, angle: -Math.PI/2 + Math.PI*6/7 },
        { id: 5, name: 'Beacon', color: COLORS.beacon, angle: -Math.PI/2 + Math.PI*8/7 },
        { id: 6, name: 'Grove', color: COLORS.grove, angle: -Math.PI/2 + Math.PI*10/7 },
        { id: 7, name: 'Crystal', color: COLORS.crystal, angle: -Math.PI/2 + Math.PI*12/7 },
    ];
    
    const FANO_LINES = [[1,2,4],[2,3,5],[3,1,6],[1,5,7],[2,6,7],[3,4,7],[4,5,6]];
    
    function init() {
        ctx = resizeCanvas(canvas);
    }
    
    function getPos(colony, cx, cy, radius) {
        const breathe = 1 + Math.sin(time * 0.5) * 0.03;
        return {
            x: cx + Math.cos(colony.angle + time * 0.05) * radius * breathe,
            y: cy + Math.sin(colony.angle + time * 0.05) * radius * breathe
        };
    }
    
    function draw() {
        time += 0.01;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.04)';
        ctx.fillRect(0, 0, w, h);
        
        const cx = w / 2;
        const cy = h / 2;
        const radius = Math.min(w, h) * 0.25;
        
        // Draw Fano lines
        FANO_LINES.forEach((line, idx) => {
            const p1 = getPos(COLONY_DATA[line[0] - 1], cx, cy, radius);
            const p2 = getPos(COLONY_DATA[line[1] - 1], cx, cy, radius);
            const p3 = getPos(COLONY_DATA[line[2] - 1], cx, cy, radius);
            
            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.lineTo(p3.x, p3.y);
            ctx.closePath();
            ctx.strokeStyle = 'rgba(255,255,255,0.03)';
            ctx.stroke();
        });
        
        // Draw colonies
        COLONY_DATA.forEach((colony, i) => {
            const pos = getPos(colony, cx, cy, radius);
            const pulse = Math.sin(time * 2 + i) * 0.15 + 1;
            
            // Glow
            const grad = ctx.createRadialGradient(pos.x, pos.y, 0, pos.x, pos.y, 30 * pulse);
            grad.addColorStop(0, colony.color + '30');
            grad.addColorStop(1, 'transparent');
            ctx.beginPath();
            ctx.arc(pos.x, pos.y, 30 * pulse, 0, Math.PI * 2);
            ctx.fillStyle = grad;
            ctx.fill();
            
            // Core
            ctx.beginPath();
            ctx.arc(pos.x, pos.y, 8 * pulse, 0, Math.PI * 2);
            ctx.fillStyle = colony.color;
            ctx.fill();
        });
        
        // Center point (Kagami)
        const centerGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, 20);
        centerGrad.addColorStop(0, 'rgba(196, 163, 90, 0.3)');
        centerGrad.addColorStop(1, 'transparent');
        ctx.fillStyle = centerGrad;
        ctx.beginPath();
        ctx.arc(cx, cy, 20, 0, Math.PI * 2);
        ctx.fill();
        
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COMMITS CANVAS â€” Timeline Flow
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
(function() {
    const canvas = document.getElementById('commits-canvas');
    let ctx = resizeCanvas(canvas);
    let time = 0;
    let particles = [];
    
    function initParticles(w, h) {
        particles = [];
        for (let i = 0; i < 60; i++) {
            particles.push({
                x: Math.random() * w,
                y: Math.random() * h,
                vx: 0.2 + Math.random() * 0.3,
                vy: (Math.random() - 0.5) * 0.2,
                size: 1 + Math.random() * 2,
                alpha: 0.1 + Math.random() * 0.2
            });
        }
    }
    
    function init() {
        ctx = resizeCanvas(canvas);
        initParticles(canvas.offsetWidth, canvas.offsetHeight);
    }
    
    function draw() {
        time += 0.01;
        const w = canvas.offsetWidth;
        const h = canvas.offsetHeight;
        
        ctx.fillStyle = 'rgba(3,3,3,0.06)';
        ctx.fillRect(0, 0, w, h);
        
        // Timeline line
        ctx.beginPath();
        ctx.moveTo(0, h / 2);
        for (let x = 0; x < w; x += 5) {
            const y = h / 2 + Math.sin(x * 0.01 + time) * 20;
            ctx.lineTo(x, y);
        }
        ctx.strokeStyle = 'rgba(10, 132, 255, 0.1)';
        ctx.lineWidth = 2;
        ctx.stroke();
        
        // Particles flowing along timeline
        particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy + Math.sin(p.x * 0.01 + time) * 0.3;
            
            if (p.x > w) {
                p.x = 0;
                p.y = h / 2 + (Math.random() - 0.5) * 100;
            }
            
            ctx.beginPath();
            ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
            ctx.fillStyle = COLORS.crystal + Math.floor(p.alpha * 255).toString(16).padStart(2, '0');
            ctx.fill();
        });
        
        requestAnimationFrame(draw);
    }
    
    window.addEventListener('resize', init);
    init();
    draw();
})();
</script>
</body>
</html>
