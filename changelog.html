<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Kagami ‚Äî What Shipped This Weekend</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=Space+Grotesk:wght@300;400;500&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            --void: #0A0A0C;
            --light: #FAFAF8;
            --gold: #D4AF37;
            --gold-dim: rgba(212, 175, 55, 0.6);
            --gold-glow: rgba(212, 175, 55, 0.15);
            --text: #f4f1ea;
            --text-dim: rgba(244, 241, 234, 0.65);
            --text-whisper: rgba(244, 241, 234, 0.35);
            
            --green: #30D158;
            --red: #FF2D55;
            --blue: #0A84FF;
            --purple: #AF52DE;
            --yellow: #FFD60A;
            
            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-heading: 'Space Grotesk', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            
            --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
            --spring: cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            scroll-snap-type: x mandatory;
            scroll-behavior: smooth;
            overflow-x: auto;
            overflow-y: hidden;
            scrollbar-width: none;
        }
        html::-webkit-scrollbar { display: none; }

        body {
            display: flex;
            width: 700vw;
            height: 100vh;
            height: 100dvh;
            font-family: var(--font-heading);
            color: var(--text);
            background: var(--void);
            font-size: clamp(15px, 2vw, 17px);
            line-height: 1.7;
            font-weight: 300;
            -webkit-font-smoothing: antialiased;
        }

        /* === PANELS === */
        .panel {
            flex: 0 0 100vw;
            width: 100vw;
            height: 100vh;
            height: 100dvh;
            scroll-snap-align: center;
            position: relative;
            overflow: hidden;
        }

        .panel-scroll {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            z-index: 2;
            scroll-behavior: smooth;
        }

        .panel-scroll::-webkit-scrollbar { width: 2px; }
        .panel-scroll::-webkit-scrollbar-track { background: transparent; }
        .panel-scroll::-webkit-scrollbar-thumb { background: var(--gold-dim); border-radius: 2px; }

        .panel-bg {
            position: absolute;
            inset: 0;
            z-index: 0;
            pointer-events: none;
        }

        .panel-bg canvas {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }

        /* === SECTIONS === */
        .section {
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 3rem 1.5rem;
        }

        .section-short { min-height: 80vh; }
        .section-flow { min-height: auto; padding: 4rem 1.5rem; }

        .content {
            max-width: 600px;
            margin: 0 auto;
        }

        .content-wide { max-width: 900px; }

        /* === TYPOGRAPHY === */
        .kanji {
            font-size: clamp(4rem, 12vw, 7rem);
            color: var(--gold);
            font-weight: 300;
            text-shadow: 0 0 60px var(--gold-glow), 0 0 120px var(--gold-glow);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        h1 {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 300;
            letter-spacing: 0.1em;
            margin-bottom: 1rem;
        }

        h2 {
            font-family: var(--font-heading);
            font-size: clamp(1.6rem, 4vw, 2.2rem);
            font-weight: 400;
            letter-spacing: 0.02em;
            margin-bottom: 1rem;
            color: var(--gold);
        }

        h3 {
            font-size: 0.75rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-whisper);
            margin-bottom: 1.5rem;
        }

        .subtitle {
            font-family: var(--font-heading);
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-whisper);
            margin-bottom: 2rem;
        }

        .lead {
            font-size: 1.1rem;
            color: var(--text-dim);
            max-width: 500px;
            margin: 0 auto 2rem;
            line-height: 1.9;
        }

        p { margin-bottom: 1.3rem; }
        p:last-child { margin-bottom: 0; }

        .text-dim { color: var(--text-dim); }
        .text-whisper { color: var(--text-whisper); font-size: 0.9rem; }
        .text-gold { color: var(--gold); }
        .text-green { color: var(--green); }
        .text-red { color: var(--red); }

        .highlight {
            background: linear-gradient(120deg, rgba(212, 175, 55, 0.2), rgba(212, 175, 55, 0.1));
            padding: 0.1em 0.3em;
            border-radius: 3px;
        }

        .divider {
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
            margin: 2rem auto;
            opacity: 0.6;
        }

        /* === REVEAL === */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s var(--ease-out-expo), transform 1s var(--ease-out-expo);
        }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .reveal-delay-1 { transition-delay: 0.15s; }
        .reveal-delay-2 { transition-delay: 0.3s; }
        .reveal-delay-3 { transition-delay: 0.45s; }
        .reveal-delay-4 { transition-delay: 0.6s; }

        /* === STATS CARDS === */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2.5rem 0;
        }

        .stat {
            text-align: center;
            padding: 2rem 1.5rem;
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.06);
            border-radius: 12px;
            transition: all 0.4s var(--spring);
            cursor: default;
        }

        .stat:hover {
            background: rgba(212, 175, 55, 0.06);
            border-color: var(--gold-dim);
            transform: translateY(-4px);
        }

        .stat-value {
            font-family: var(--font-mono);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 400;
            color: var(--gold);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-whisper);
        }

        /* === FEATURE LIST === */
        .feature-list {
            text-align: left;
            margin: 2rem 0;
        }

        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.2rem;
            margin-bottom: 0.8rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            border-left: 3px solid var(--gold);
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            background: rgba(255,255,255,0.04);
            transform: translateX(4px);
        }

        .feature-icon {
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .feature-content h4 {
            font-size: 1rem;
            font-weight: 400;
            margin-bottom: 0.3rem;
        }

        .feature-content p {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin: 0;
        }

        /* === CHARTS === */
        .chart-container {
            width: 100%;
            max-width: 800px;
            height: 300px;
            margin: 2rem auto;
            position: relative;
            background: rgba(255,255,255,0.01);
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 16px;
            overflow: hidden;
        }

        .chart-container canvas {
            width: 100%;
            height: 100%;
        }

        .chart-title {
            position: absolute;
            top: 1rem;
            left: 1.5rem;
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            color: var(--text-whisper);
        }

        /* === HEATMAP === */
        .heatmap {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 4px;
            margin: 2rem auto;
            max-width: 650px;
        }

        .heatmap-cell {
            aspect-ratio: 1;
            border-radius: 3px;
            background: rgba(255,255,255,0.03);
            transition: all 0.3s var(--spring);
            cursor: default;
            position: relative;
        }

        .heatmap-cell:hover {
            transform: scale(1.3);
            z-index: 10;
        }

        .heatmap-cell[data-level="1"] { background: rgba(212, 175, 55, 0.15); }
        .heatmap-cell[data-level="2"] { background: rgba(212, 175, 55, 0.3); }
        .heatmap-cell[data-level="3"] { background: rgba(212, 175, 55, 0.5); }
        .heatmap-cell[data-level="4"] { background: rgba(212, 175, 55, 0.75); }
        .heatmap-cell[data-level="5"] { background: var(--gold); box-shadow: 0 0 15px var(--gold-glow); }

        .heatmap-cell::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: calc(100% + 10px);
            left: 50%;
            transform: translateX(-50%);
            background: var(--void);
            border: 1px solid var(--gold-dim);
            padding: 0.4rem 0.7rem;
            border-radius: 6px;
            font-size: 0.65rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
            z-index: 100;
        }

        .heatmap-cell:hover::after { opacity: 1; }

        .heatmap-labels {
            display: flex;
            justify-content: space-between;
            max-width: 650px;
            margin: 0.5rem auto 0;
            font-size: 0.65rem;
            color: var(--text-whisper);
        }

        /* === TIMELINE === */
        .timeline {
            position: relative;
            padding: 2rem 0;
            margin: 2rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, transparent, var(--gold-dim) 10%, var(--gold-dim) 90%, transparent);
        }

        .timeline-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 2.5rem;
            position: relative;
        }

        .timeline-item:nth-child(odd) { flex-direction: row-reverse; }
        .timeline-item:nth-child(odd) .timeline-content { text-align: right; padding-right: 2rem; padding-left: 0; }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--void);
            border: 2px solid var(--gold);
            z-index: 2;
            transition: all 0.3s ease;
        }

        .timeline-item:hover .timeline-dot {
            background: var(--gold);
            box-shadow: 0 0 20px var(--gold-glow);
            transform: translateX(-50%) scale(1.3);
        }

        .timeline-content {
            width: 45%;
            padding-left: 2rem;
        }

        .timeline-date {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--gold);
            margin-bottom: 0.3rem;
        }

        .timeline-title {
            font-size: 1rem;
            font-weight: 400;
            margin-bottom: 0.3rem;
        }

        .timeline-desc {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* === COMMIT STREAM === */
        .commit-stream {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            line-height: 2;
            text-align: left;
            max-height: 320px;
            overflow-y: auto;
            padding: 1.2rem;
            background: rgba(0,0,0,0.4);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .commit-line {
            padding: 0.3rem 0.5rem;
            border-radius: 4px;
            transition: all 0.2s ease;
            display: block;
        }

        .commit-line:hover {
            background: rgba(255,255,255,0.05);
        }

        .commit-hash { color: var(--gold); }
        .commit-type { color: var(--green); font-weight: 500; }

        /* === NAVIGATION === */
        .nav-dots {
            position: fixed;
            bottom: max(1.5rem, env(safe-area-inset-bottom));
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.6rem;
            z-index: 100;
            padding: 0.6rem 1rem;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 2rem;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.25);
            cursor: pointer;
            transition: all 0.4s var(--spring);
            position: relative;
        }

        .nav-dot::before {
            content: attr(data-label);
            position: absolute;
            bottom: calc(100% + 12px);
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.55rem;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            white-space: nowrap;
            opacity: 0;
            transition: opacity 0.2s;
            color: var(--text-dim);
        }

        .nav-dot:hover::before { opacity: 1; }
        .nav-dot:hover { transform: scale(1.3); background: rgba(255,255,255,0.5); }
        .nav-dot.active {
            transform: scale(1.5);
            background: var(--gold);
            box-shadow: 0 0 15px var(--gold-glow);
        }

        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 3px;
            background: var(--gold);
            z-index: 200;
            transition: width 0.15s ease-out;
        }

        .nav-hint {
            margin-top: 2.5rem;
            font-family: var(--font-display);
            font-size: 1.4rem;
            letter-spacing: 0.5em;
            color: var(--text-whisper);
            animation: pulse-hint 2.5s ease-in-out infinite;
            cursor: pointer;
        }

        .nav-hint:hover { color: var(--gold); }

        @keyframes pulse-hint {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.5; }
        }

        /* === COMPONENT BARS === */
        .component-list { margin: 2rem 0; }

        .component-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding: 0.8rem 1rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .component-item:hover {
            background: rgba(255,255,255,0.04);
            transform: translateX(4px);
        }

        .component-name {
            min-width: 120px;
            font-size: 0.8rem;
            font-weight: 400;
        }

        .component-bar-bg {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.05);
            border-radius: 4px;
            overflow: hidden;
        }

        .component-bar {
            height: 100%;
            border-radius: 4px;
            transition: width 1.5s var(--ease-out-expo);
        }

        .component-count {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--text-dim);
            min-width: 50px;
            text-align: right;
        }

        /* === CALLOUT === */
        .callout {
            background: rgba(212, 175, 55, 0.08);
            border: 1px solid var(--gold-dim);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: left;
        }

        .callout-title {
            font-size: 0.7rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--gold);
            margin-bottom: 0.8rem;
        }

        .callout p {
            font-size: 0.95rem;
            margin: 0;
        }

        /* === MOBILE === */
        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: 1fr; gap: 1rem; }
            .timeline::before { left: 1rem; }
            .timeline-dot { left: 1rem; }
            .timeline-content { width: 100%; padding-left: 3rem !important; padding-right: 0 !important; text-align: left !important; }
            .timeline-item:nth-child(odd) { flex-direction: row; }
            .heatmap { grid-template-columns: repeat(7, 1fr); }
            .chart-container { height: 200px; }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progress"></div>
    
    <div class="nav-dots" id="navDots">
        <div class="nav-dot active" data-panel="0" data-label="Intro"></div>
        <div class="nav-dot" data-panel="1" data-label="The Sprint"></div>
        <div class="nav-dot" data-panel="2" data-label="What Shipped"></div>
        <div class="nav-dot" data-panel="3" data-label="Commits"></div>
        <div class="nav-dot" data-panel="4" data-label="Code Health"></div>
        <div class="nav-dot" data-panel="5" data-label="The Numbers"></div>
        <div class="nav-dot" data-panel="6" data-label="Current State"></div>
    </div>

    <!-- PANEL 0: INTRO ‚Äî What is Kagami? -->
    <section class="panel" id="intro">
        <div class="panel-bg"><canvas id="intro-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="0">
            <div class="section">
                <div class="content">
                    <p class="kanji reveal reveal-delay-1">Èè°</p>
                    <h1 class="reveal reveal-delay-2">Kagami</h1>
                    <p class="subtitle reveal reveal-delay-3">What Shipped This Weekend</p>
                    <div class="divider reveal reveal-delay-3"></div>
                    <p class="lead reveal reveal-delay-4">
                        Kagami is an AI agent system.<br>
                        It has a world model, safety checks, and 7 specialized agents that work together.
                    </p>
                </div>
            </div>
            
            <div class="section section-short">
                <div class="content content-wide">
                    <div class="callout reveal">
                        <div class="callout-title">This Weekend</div>
                        <p>From Friday afternoon to Sunday night, we shipped <span class="text-gold">192 commits</span> ‚Äî that's 89% of December's total work in 3 days.</p>
                    </div>
                    
                    <div class="stats-grid reveal">
                        <div class="stat">
                            <div class="stat-value">192</div>
                            <div class="stat-label">Commits (Fri‚ÄìSun)</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">89%</div>
                            <div class="stat-label">Of Month's Work</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">48hr</div>
                            <div class="stat-label">Sprint Duration</div>
                        </div>
                    </div>
                    
                    <p class="text-dim reveal">
                        Scroll right to see what we built ‚Üí
                    </p>
                    
                    <p class="nav-hint reveal">‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 1: THE SPRINT ‚Äî Friday to Sunday -->
    <section class="panel" id="sprint">
        <div class="panel-bg"><canvas id="sprint-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="1">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">The Weekend Sprint</h2>
                    <p class="subtitle reveal reveal-delay-2">Friday Dec 13 ‚Üí Sunday Dec 15</p>
                    <p class="lead reveal reveal-delay-3">
                        Three days of focused building.<br>
                        140 commits on Saturday alone.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <h3 class="reveal">Commit Activity by Day</h3>
                    
                    <div class="heatmap reveal" id="heatmap"></div>
                    <div class="heatmap-labels reveal">
                        <span>Dec 1</span>
                        <span>Dec 7</span>
                        <span style="color: var(--gold); font-weight: 500;">Dec 13‚Äì15 ‚Üí</span>
                    </div>
                    
                    <div class="stats-grid reveal">
                        <div class="stat">
                            <div class="stat-value">33</div>
                            <div class="stat-label">Friday (Dec 13)</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" style="color: var(--gold); text-shadow: 0 0 20px var(--gold-glow);">140</div>
                            <div class="stat-label">Saturday (Dec 14)</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">19</div>
                            <div class="stat-label">Sunday (Dec 15)</div>
                        </div>
                    </div>
                    
                    <div class="divider reveal"></div>
                    
                    <p class="text-dim reveal">
                        Saturday was the big push. Colony agents, safety system, training pipeline ‚Äî all shipped in one day.
                    </p>
                    
                    <p class="nav-hint reveal">‚Üê ‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 2: WHAT SHIPPED ‚Äî Features -->
    <section class="panel" id="features">
        <div class="panel-bg"><canvas id="features-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="2">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">What Actually Shipped</h2>
                    <p class="subtitle reveal reveal-delay-2">New Features & Systems</p>
                    <p class="lead reveal reveal-delay-3">
                        Major systems that went from stub to working code this weekend.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <div class="feature-list reveal">
                        <div class="feature-item">
                            <span class="feature-icon">ü§ñ</span>
                            <div class="feature-content">
                                <h4>7 Specialized Agents</h4>
                                <p>Each handles different task types: planning, building, testing, debugging, research, integration, and ideation.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üõ°Ô∏è</span>
                            <div class="feature-content">
                                <h4>Safety Barrier System</h4>
                                <p>Validates every action before execution. Defaults to rejecting unsafe requests. Always on.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üß†</span>
                            <div class="feature-content">
                                <h4>World Model Integration</h4>
                                <p>Agents share a common understanding of the environment. Predictions inform decisions.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üèãÔ∏è</span>
                            <div class="feature-content">
                                <h4>10-Phase Training Pipeline</h4>
                                <p>From pretraining to fine-tuning to alignment. Curriculum-based learning with checkpoints.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">‚ö°</span>
                            <div class="feature-content">
                                <h4>Model Cache (200x Speedup)</h4>
                                <p>Inference results cached intelligently. Repeated queries return instantly.</p>
                            </div>
                        </div>
                        <div class="feature-item">
                            <span class="feature-icon">üîå</span>
                            <div class="feature-content">
                                <h4>Hardware Abstraction Layer</h4>
                                <p>Unified interface for sensors, displays, audio. Works on desktop, mobile, wearables.</p>
                            </div>
                        </div>
                    </div>
                    
                    <p class="nav-hint reveal">‚Üê ‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 3: COMMITS ‚Äî What the git log shows -->
    <section class="panel" id="commits">
        <div class="panel-bg"><canvas id="commits-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="3">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">The Commit Log</h2>
                    <p class="subtitle reveal reveal-delay-2">Selected Highlights</p>
                    <p class="lead reveal reveal-delay-3">
                        Real commits from the weekend sprint.<br>
                        Each line represents merged, tested code.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <h3 class="reveal">Saturday Dec 14 ‚Äî The Big Push</h3>
                    
                    <div class="commit-stream reveal">
<span class="commit-line"><span class="commit-hash">fb3257d</span> <span class="commit-type">feat:</span> all 7 colony agents implemented with full tests</span>
<span class="commit-line"><span class="commit-hash">9247a11</span> <span class="commit-type">feat:</span> world model + safety barrier integration</span>
<span class="commit-line"><span class="commit-hash">9be1ba2</span> <span class="commit-type">perf:</span> model cache with 200x inference speedup</span>
<span class="commit-line"><span class="commit-hash">5677c3e</span> <span class="commit-type">feat:</span> distributed consensus for multi-agent coordination</span>
<span class="commit-line"><span class="commit-hash">877638e</span> <span class="commit-type">fix:</span> raise safety threshold (more conservative)</span>
<span class="commit-line"><span class="commit-hash">9fbcee5</span> <span class="commit-type">feat:</span> 10-phase training pipeline with curriculum</span>
<span class="commit-line"><span class="commit-hash">eda69f2</span> <span class="commit-type">feat:</span> automated experiment cycles with checkpoints</span>
<span class="commit-line"><span class="commit-hash">e86be4d</span> <span class="commit-type">test:</span> stability tests for core training loop</span>
<span class="commit-line"><span class="commit-hash">024691a</span> <span class="commit-type">fix:</span> security fixes, complete world model wiring</span>
<span class="commit-line"><span class="commit-hash">f4fb4e3</span> <span class="commit-type">feat:</span> training curriculum system with phases</span>
<span class="commit-line"><span class="commit-hash">311a79e</span> <span class="commit-type">feat:</span> 5 colony agents with full test coverage</span>
<span class="commit-line"><span class="commit-hash">3c5af20</span> <span class="commit-type">docs:</span> 10 documentation files added</span>
                    </div>
                    
                    <div class="divider reveal"></div>
                    
                    <h3 class="reveal">Sunday Dec 15 ‚Äî Integration</h3>
                    
                    <div class="commit-stream reveal">
<span class="commit-line"><span class="commit-hash">eee3dc8</span> <span class="commit-type">feat:</span> full functionality for all stub modules</span>
<span class="commit-line"><span class="commit-hash">a48be27</span> <span class="commit-type">fix:</span> resolve merge conflicts, wire missing modules</span>
<span class="commit-line"><span class="commit-hash">a3f0396</span> <span class="commit-type">feat:</span> Rooms + Forge + Ambient ‚Äî all placeholders removed</span>
<span class="commit-line"><span class="commit-hash">1adbfc9</span> <span class="commit-type">feat:</span> orchestration with max subagents enabled</span>
<span class="commit-line"><span class="commit-hash">ef9ac25</span> <span class="commit-type">fix:</span> training pipeline wiring + data validation</span>
<span class="commit-line"><span class="commit-hash">707db53</span> <span class="commit-type">refactor:</span> consolidate all agents to shared base class</span>
<span class="commit-line"><span class="commit-hash">52949cd</span> <span class="commit-type">fix:</span> safety fail-closed by default</span>
                    </div>
                    
                    <p class="nav-hint reveal">‚Üê ‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 4: CODE HEALTH ‚Äî Testing & Cleanup -->
    <section class="panel" id="health">
        <div class="panel-bg"><canvas id="health-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="4">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">Code Health</h2>
                    <p class="subtitle reveal reveal-delay-2">Testing & Cleanup</p>
                    <p class="lead reveal reveal-delay-3">
                        Not just features ‚Äî we also cleaned up technical debt and added comprehensive tests.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <h3 class="reveal">Test Coverage by Module</h3>
                    
                    <div class="component-list reveal">
                        <div class="component-item">
                            <span class="component-name">Core Systems</span>
                            <div class="component-bar-bg">
                                <div class="component-bar" style="width: 100%; background: var(--blue);"></div>
                            </div>
                            <span class="component-count">45 files</span>
                        </div>
                        <div class="component-item">
                            <span class="component-name">Agent Logic</span>
                            <div class="component-bar-bg">
                                <div class="component-bar" style="width: 29%; background: var(--purple);"></div>
                            </div>
                            <span class="component-count">13 files</span>
                        </div>
                        <div class="component-item">
                            <span class="component-name">Safety Checks</span>
                            <div class="component-bar-bg">
                                <div class="component-bar" style="width: 27%; background: var(--red);"></div>
                            </div>
                            <span class="component-count">12 files</span>
                        </div>
                        <div class="component-item">
                            <span class="component-name">World Model</span>
                            <div class="component-bar-bg">
                                <div class="component-bar" style="width: 24%; background: var(--yellow);"></div>
                            </div>
                            <span class="component-count">11 files</span>
                        </div>
                        <div class="component-item">
                            <span class="component-name">Hardware Layer</span>
                            <div class="component-bar-bg">
                                <div class="component-bar" style="width: 27%; background: var(--green);"></div>
                            </div>
                            <span class="component-count">12 files</span>
                        </div>
                    </div>
                    
                    <div class="stats-grid reveal">
                        <div class="stat">
                            <div class="stat-value" style="color: var(--blue);">580</div>
                            <div class="stat-label">Test Files</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" style="color: var(--green);">‚úì</div>
                            <div class="stat-label">Safety Passing</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">0</div>
                            <div class="stat-label">Stub Modules Left</div>
                        </div>
                    </div>
                    
                    <div class="callout reveal">
                        <div class="callout-title">Cleanup</div>
                        <p>Deleted 32K lines of dead code on Dec 7. Then built back 39K lines of real, tested features over the weekend.</p>
                    </div>
                    
                    <p class="nav-hint reveal">‚Üê ‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 5: THE NUMBERS ‚Äî Charts -->
    <section class="panel" id="numbers">
        <div class="panel-bg"><canvas id="numbers-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="5">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">The Numbers</h2>
                    <p class="subtitle reveal reveal-delay-2">Lines Added vs Removed</p>
                    <p class="lead reveal reveal-delay-3">
                        Massive code churn. Deleted the old, built the new.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <h3 class="reveal">Code Churn ‚Äî December 2025</h3>
                    
                    <div class="chart-container reveal" style="height: 350px;">
                        <span class="chart-title">Lines Added (green) vs Removed (red)</span>
                        <canvas id="churn-chart"></canvas>
                    </div>
                    
                    <div class="stats-grid reveal">
                        <div class="stat">
                            <div class="stat-value text-green">+450K</div>
                            <div class="stat-label">Lines Added</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value text-red">-411K</div>
                            <div class="stat-label">Lines Removed</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value text-gold">+39K</div>
                            <div class="stat-label">Net Growth</div>
                        </div>
                    </div>
                    
                    <p class="text-dim reveal" style="margin-top: 1.5rem;">
                        For every line added, nearly one was removed. The codebase got smaller and more capable at the same time.
                    </p>
                    
                    <p class="nav-hint reveal">‚Üê ‚Üí</p>
                </div>
            </div>
        </div>
    </section>

    <!-- PANEL 6: CURRENT STATE ‚Äî What's Next -->
    <section class="panel" id="state">
        <div class="panel-bg"><canvas id="state-canvas"></canvas></div>
        <div class="panel-scroll" data-panel="6">
            <div class="section">
                <div class="content">
                    <h2 class="reveal reveal-delay-1">Current State</h2>
                    <p class="subtitle reveal reveal-delay-2">After the Sprint</p>
                    <p class="lead reveal reveal-delay-3">
                        Where Kagami stands now.
                    </p>
                </div>
            </div>
            
            <div class="section section-flow">
                <div class="content content-wide">
                    <div class="stats-grid reveal">
                        <div class="stat">
                            <div class="stat-value">7</div>
                            <div class="stat-label">Working Agents</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">72</div>
                            <div class="stat-label">Core Modules</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">279K</div>
                            <div class="stat-label">Lines of Code</div>
                        </div>
                    </div>
                    
                    <div class="divider reveal"></div>
                    
                    <div class="feature-list reveal">
                        <div class="feature-item" style="border-left-color: var(--green);">
                            <span class="feature-icon">‚úì</span>
                            <div class="feature-content">
                                <h4>Ready to Train</h4>
                                <p>Training pipeline complete. Curriculum defined. Checkpoints working.</p>
                            </div>
                        </div>
                        <div class="feature-item" style="border-left-color: var(--green);">
                            <span class="feature-icon">‚úì</span>
                            <div class="feature-content">
                                <h4>Safety Always On</h4>
                                <p>Every action validated. Fail-closed by default. Conservative thresholds.</p>
                            </div>
                        </div>
                        <div class="feature-item" style="border-left-color: var(--green);">
                            <span class="feature-icon">‚úì</span>
                            <div class="feature-content">
                                <h4>No Placeholder Stubs</h4>
                                <p>Every module has real implementation. Nothing fake left.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="divider reveal"></div>
                    
                    <p class="kanji reveal" style="font-size: 3rem; margin-top: 2rem;">Èè°</p>
                    <p class="text-whisper reveal" style="margin-top: 1rem;">
                        217 commits ¬∑ 1,907 files ¬∑ 580 tests<br>
                        <span class="text-gold">December 2025</span>
                    </p>
                </div>
            </div>
        </div>
    </section>

    <script>
        // === STATE ===
        let currentPanel = 0;
        const isMobile = 'ontouchstart' in window;
        const dpr = Math.min(window.devicePixelRatio || 1, 2);

        // === DATA ===
        const commitData = {
            dates: ['Dec 1', 'Dec 2', 'Dec 3', 'Dec 4', 'Dec 5', 'Dec 6', 'Dec 7', 'Dec 8', 'Dec 9', 'Dec 10', 'Dec 11', 'Dec 12', 'Dec 13', 'Dec 14', 'Dec 15'],
            commits: [5, 4, 7, 2, 4, 4, 12, 0, 0, 2, 0, 4, 33, 140, 19],
            added: [8500, 12400, 45200, 8100, 9800, 15600, 62000, 0, 0, 1200, 0, 18500, 89000, 156000, 24000],
            removed: [4200, 8900, 18400, 52000, 2100, 12800, 84000, 0, 0, 400, 0, 15200, 67000, 142000, 12000]
        };

        // === ELEMENTS ===
        const dots = document.querySelectorAll('.nav-dot');
        const progress = document.getElementById('progress');

        // === INIT ===
        window.addEventListener('load', () => {
            initScrollytelling();
            initCanvases();
            initCharts();
            initHeatmap();
            triggerReveal(0);
        });

        // === SCROLLYTELLING ===
        function initScrollytelling() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) entry.target.classList.add('visible');
                });
            }, { threshold: 0.1, rootMargin: '0px' });
            
            document.querySelectorAll('.reveal, .divider').forEach(el => observer.observe(el));
        }

        function triggerReveal(panelIndex) {
            const scroll = document.querySelector(`[data-panel="${panelIndex}"]`);
            if (!scroll) return;
            const firstSection = scroll.querySelector('.section');
            if (firstSection) {
                firstSection.querySelectorAll('.reveal, .divider').forEach(el => el.classList.add('visible'));
            }
        }

        // === NAVIGATION ===
        document.addEventListener('scroll', () => {
            const scrollLeft = document.documentElement.scrollLeft;
            const maxScroll = document.documentElement.scrollWidth - window.innerWidth;
            const panelIndex = Math.round(scrollLeft / window.innerWidth);

            if (panelIndex !== currentPanel) {
                currentPanel = panelIndex;
                triggerReveal(panelIndex);
            }

            dots.forEach((d, i) => d.classList.toggle('active', i === panelIndex));
            progress.style.width = (scrollLeft / maxScroll) * 100 + '%';
        });

        dots.forEach((dot, i) => {
            dot.addEventListener('click', () => {
                document.documentElement.scrollTo({ left: i * window.innerWidth, behavior: 'smooth' });
            });
        });

        document.addEventListener('keydown', (e) => {
            const panel = Math.round(document.documentElement.scrollLeft / window.innerWidth);
            if (e.key === 'ArrowLeft' && panel > 0) {
                document.documentElement.scrollTo({ left: (panel - 1) * window.innerWidth, behavior: 'smooth' });
            } else if (e.key === 'ArrowRight' && panel < 6) {
                document.documentElement.scrollTo({ left: (panel + 1) * window.innerWidth, behavior: 'smooth' });
            }
        });

        document.querySelectorAll('.nav-hint').forEach(hint => {
            hint.addEventListener('click', () => {
                const panel = Math.round(document.documentElement.scrollLeft / window.innerWidth);
                if (panel < 6) {
                    document.documentElement.scrollTo({ left: (panel + 1) * window.innerWidth, behavior: 'smooth' });
                }
            });
        });

        // === HEATMAP ===
        function initHeatmap() {
            const heatmap = document.getElementById('heatmap');
            const commits = commitData.commits;
            const maxCommits = Math.max(...commits);
            
            for (let i = 0; i < 15; i++) {
                const cell = document.createElement('div');
                cell.className = 'heatmap-cell';
                const level = commits[i] === 0 ? 0 : Math.ceil((commits[i] / maxCommits) * 5);
                cell.dataset.level = level;
                cell.dataset.tooltip = `Dec ${i + 1}: ${commits[i]} commits`;
                heatmap.appendChild(cell);
            }
        }

        // === CHARTS ===
        function initCharts() {
            initChurnChart();
        }

        function initChurnChart() {
            const canvas = document.getElementById('churn-chart');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const rect = canvas.parentElement.getBoundingClientRect();
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);
            
            const w = rect.width;
            const h = rect.height;
            const padding = { top: 40, right: 20, bottom: 50, left: 60 };
            const chartW = w - padding.left - padding.right;
            const chartH = h - padding.top - padding.bottom;
            
            const maxVal = Math.max(...commitData.added, ...commitData.removed);
            const points = commitData.added.length;
            const stepX = chartW / (points - 1);
            
            // Grid
            ctx.strokeStyle = 'rgba(255,255,255,0.05)';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 5; i++) {
                const y = padding.top + (chartH / 5) * i;
                ctx.beginPath();
                ctx.moveTo(padding.left, y);
                ctx.lineTo(w - padding.right, y);
                ctx.stroke();
                
                ctx.fillStyle = 'rgba(255,255,255,0.3)';
                ctx.font = '9px "JetBrains Mono"';
                ctx.textAlign = 'right';
                const val = Math.round((maxVal - (maxVal / 5) * i) / 1000);
                ctx.fillText(val + 'K', padding.left - 8, y + 3);
            }
            
            // Weekend highlight
            const weekendStart = padding.left + 12 * stepX;
            const weekendEnd = padding.left + 14 * stepX;
            ctx.fillStyle = 'rgba(212, 175, 55, 0.08)';
            ctx.fillRect(weekendStart, padding.top, weekendEnd - weekendStart + 20, chartH);
            
            // Added area
            ctx.beginPath();
            ctx.moveTo(padding.left, padding.top + chartH);
            commitData.added.forEach((val, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartH - (val / maxVal) * chartH;
                ctx.lineTo(x, y);
            });
            ctx.lineTo(padding.left + (points - 1) * stepX, padding.top + chartH);
            ctx.closePath();
            
            const addGradient = ctx.createLinearGradient(0, padding.top, 0, padding.top + chartH);
            addGradient.addColorStop(0, 'rgba(48, 209, 88, 0.35)');
            addGradient.addColorStop(1, 'rgba(48, 209, 88, 0.02)');
            ctx.fillStyle = addGradient;
            ctx.fill();
            
            // Added line
            ctx.beginPath();
            commitData.added.forEach((val, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartH - (val / maxVal) * chartH;
                i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#30D158';
            ctx.lineWidth = 2.5;
            ctx.stroke();
            
            // Removed area
            ctx.beginPath();
            ctx.moveTo(padding.left, padding.top + chartH);
            commitData.removed.forEach((val, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartH - (val / maxVal) * chartH;
                ctx.lineTo(x, y);
            });
            ctx.lineTo(padding.left + (points - 1) * stepX, padding.top + chartH);
            ctx.closePath();
            
            const removeGradient = ctx.createLinearGradient(0, padding.top, 0, padding.top + chartH);
            removeGradient.addColorStop(0, 'rgba(255, 45, 85, 0.3)');
            removeGradient.addColorStop(1, 'rgba(255, 45, 85, 0.02)');
            ctx.fillStyle = removeGradient;
            ctx.fill();
            
            // Removed line
            ctx.beginPath();
            commitData.removed.forEach((val, i) => {
                const x = padding.left + i * stepX;
                const y = padding.top + chartH - (val / maxVal) * chartH;
                i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
            });
            ctx.strokeStyle = '#FF2D55';
            ctx.lineWidth = 2.5;
            ctx.stroke();
            
            // Legend
            ctx.fillStyle = '#30D158';
            ctx.beginPath();
            ctx.roundRect(w - 120, padding.top, 12, 12, 2);
            ctx.fill();
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.font = '10px "Space Grotesk"';
            ctx.textAlign = 'left';
            ctx.fillText('Added', w - 103, padding.top + 10);
            
            ctx.fillStyle = '#FF2D55';
            ctx.beginPath();
            ctx.roundRect(w - 120, padding.top + 20, 12, 12, 2);
            ctx.fill();
            ctx.fillStyle = 'rgba(255,255,255,0.6)';
            ctx.fillText('Removed', w - 103, padding.top + 30);
            
            // X labels
            ctx.fillStyle = 'rgba(255,255,255,0.3)';
            ctx.font = '9px "Space Grotesk"';
            ctx.textAlign = 'center';
            ['1', '', '', '', '5', '', '', '', '', '10', '', '', '13', '14', '15'].forEach((label, i) => {
                if (label) {
                    const x = padding.left + i * stepX;
                    const color = i >= 12 ? 'rgba(212, 175, 55, 0.8)' : 'rgba(255,255,255,0.3)';
                    ctx.fillStyle = color;
                    ctx.fillText(label, x, h - padding.bottom + 20);
                }
            });
        }

        // === CANVAS BACKGROUNDS ===
        function initCanvases() {
            const canvases = [
                { id: 'intro-canvas', draw: drawSubtle },
                { id: 'sprint-canvas', draw: drawSubtle },
                { id: 'features-canvas', draw: drawSubtle },
                { id: 'commits-canvas', draw: drawSubtle },
                { id: 'health-canvas', draw: drawSubtle },
                { id: 'numbers-canvas', draw: drawSubtle },
                { id: 'state-canvas', draw: drawSubtle }
            ];
            
            canvases.forEach(({ id, draw }) => {
                const canvas = document.getElementById(id);
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                resizeCanvas(canvas);
                
                function animate(time) {
                    const w = canvas.offsetWidth;
                    const h = canvas.offsetHeight;
                    ctx.clearRect(0, 0, w, h);
                    draw(ctx, w, h, time * 0.001);
                    requestAnimationFrame(animate);
                }
                
                window.addEventListener('resize', () => resizeCanvas(canvas));
                animate(0);
            });
        }

        function resizeCanvas(canvas) {
            canvas.width = canvas.offsetWidth * dpr;
            canvas.height = canvas.offsetHeight * dpr;
            const ctx = canvas.getContext('2d');
            ctx.scale(dpr, dpr);
        }

        // Subtle background ‚Äî just a gentle glow
        function drawSubtle(ctx, w, h, time) {
            const cx = w / 2;
            const cy = h / 2;
            const breathe = Math.sin(time * 0.2) * 0.1 + 1;
            
            const coreGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, Math.max(w, h) * 0.5 * breathe);
            coreGrad.addColorStop(0, 'rgba(212, 175, 55, 0.03)');
            coreGrad.addColorStop(0.5, 'rgba(212, 175, 55, 0.01)');
            coreGrad.addColorStop(1, 'transparent');
            ctx.fillStyle = coreGrad;
            ctx.fillRect(0, 0, w, h);
        }
    </script>
</body>
</html>
