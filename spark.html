<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî• SPARK ‚Äî e‚ÇÅ ‚Äî The Fold Gallery</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Mono:wght@400;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SPARK GALLERY ‚Äî ALL STYLES COMBINED
   üî• e‚ÇÅ ‚Äî The Fold Catastrophe ‚Äî A‚ÇÇ
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

:root {
    --flame: #FF4500;
    --ember: #FF6347;
    --gold: #FFD700;
    --yellow: #FFFF00;
    --white-hot: #FFFAF0;
    --plasma: #FF00FF;
    --electric: #00FFFF;
    --void: #050505;
    --void-deep: #020202;
    --char: #1a1a1a;
    --nav-height: 70px;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--void);
    color: var(--white-hot);
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--void); }
::-webkit-scrollbar-thumb { background: linear-gradient(180deg, var(--flame) 0%, var(--ember) 100%); border-radius: 4px; }
::selection { background: rgba(255, 69, 0, 0.4); color: var(--white-hot); }

/* Navigation */
.spark-nav {
    position: fixed; top: 0; left: 0; right: 0; height: var(--nav-height);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 30px; z-index: 1000; backdrop-filter: blur(8px);
    background: linear-gradient(180deg, rgba(5,5,5,0.98) 0%, rgba(5,5,5,0.9) 70%, rgba(5,5,5,0) 100%);
}
.nav-logo { display: flex; align-items: center; gap: 12px; font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; letter-spacing: 0.08em; }
.nav-logo .flame { font-size: 1.8rem; filter: drop-shadow(0 0 10px rgba(255,69,0,0.7)); animation: flame-flicker 2s ease-in-out infinite; }
@keyframes flame-flicker { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 10px rgba(255,69,0,0.7)); } 50% { transform: scale(0.98) rotate(1deg); filter: drop-shadow(0 0 8px rgba(255,69,0,0.6)); } }
.nav-logo .logo-text { color: var(--flame); text-shadow: 0 0 15px rgba(255,69,0,0.5); }
.nav-logo .e-label { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: var(--gold); opacity: 0.7; }
.nav-links { display: flex; gap: 35px; }
.nav-links a { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: rgba(255,255,255,0.6); text-decoration: none; letter-spacing: 0.1em; transition: all 0.25s; position: relative; }
.nav-links a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: linear-gradient(90deg, var(--flame), var(--gold)); transition: width 0.25s; }
.nav-links a:hover { color: var(--flame); }
.nav-links a:hover::after { width: 100%; }
.sound-toggle { background: none; border: 1px solid rgba(255,69,0,0.3); border-radius: 50%; width: 42px; height: 42px; cursor: pointer; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; transition: all 0.25s; }
.sound-toggle:hover { border-color: var(--flame); box-shadow: 0 0 15px rgba(255,69,0,0.3); transform: scale(1.1); }

.room { min-height: 100vh; position: relative; }

/* IGNITION ROOM */
#room-ignition { position: relative; height: 100vh; background: var(--void); overflow: hidden; }
.ignition-content { position: relative; width: 100%; height: 100%; }
#ignition-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
.void-overlay { position: absolute; inset: 0; background: radial-gradient(ellipse at center, rgba(10,5,5,0.95) 0%, rgba(2,2,2,1) 70%); z-index: 10; display: flex; align-items: center; justify-content: center; transition: opacity 1.5s ease-out; }
.void-text { text-align: center; display: flex; flex-direction: column; gap: 12px; }
.void-text .whisper { font-family: 'Inter', sans-serif; font-size: 1rem; font-weight: 300; color: rgba(255,255,255,0.15); letter-spacing: 0.3em; text-transform: lowercase; animation: whisper-fade 4s ease-in-out infinite; }
@keyframes whisper-fade { 0%, 100% { opacity: 0.15; } 50% { opacity: 0.3; } }
.void-text .void-word { font-family: 'Bebas Neue', sans-serif; font-size: clamp(4rem, 15vw, 10rem); color: rgba(255,255,255,0.03); letter-spacing: 0.5em; animation: void-breathe 6s ease-in-out infinite; }
@keyframes void-breathe { 0%, 100% { opacity: 0.03; letter-spacing: 0.5em; } 50% { opacity: 0.06; letter-spacing: 0.6em; } }
.spark-trigger { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 20; text-align: center; cursor: pointer; }
.spark-button { display: flex; flex-direction: column; align-items: center; gap: 15px; padding: 40px 60px; border: 2px solid rgba(255,69,0,0.3); border-radius: 20px; background: rgba(255,69,0,0.03); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.spark-button:hover { border-color: var(--flame); background: rgba(255,69,0,0.1); transform: scale(1.08); box-shadow: 0 0 40px rgba(255,69,0,0.3), 0 0 80px rgba(255,69,0,0.15), inset 0 0 30px rgba(255,69,0,0.1); }
.spark-button .flame-icon { font-size: 4rem; filter: drop-shadow(0 0 20px rgba(255,69,0,0.8)); animation: flame-dance 1.5s ease-in-out infinite; }
@keyframes flame-dance { 0%, 100% { transform: scale(1); } 25% { transform: scale(1.1) rotate(-5deg); } 50% { transform: scale(0.95) rotate(3deg); } 75% { transform: scale(1.05) rotate(-2deg); } }
.spark-button .button-text { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; color: var(--flame); letter-spacing: 0.2em; text-shadow: 0 0 20px rgba(255,69,0,0.5); }
.spark-hint { margin-top: 20px; font-family: 'Space Mono', monospace; font-size: 0.8rem; color: rgba(255,255,255,0.3); letter-spacing: 0.15em; animation: hint-pulse 2s ease-in-out infinite; }
@keyframes hint-pulse { 0%, 100% { opacity: 0.3; } 50% { opacity: 0.6; } }
.ignition-reveal { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5; text-align: center; opacity: 0; pointer-events: none; transition: opacity 1.2s ease-out 0.3s; }
.ignition-reveal.revealed { opacity: 1; pointer-events: auto; }
.spark-title { font-family: 'Bebas Neue', sans-serif; font-size: clamp(5rem, 20vw, 14rem); color: var(--flame); letter-spacing: 0.15em; line-height: 0.9; text-shadow: 0 0 40px rgba(255,69,0,0.7), 0 0 80px rgba(255,69,0,0.4); animation: title-glow 3s ease-in-out infinite; }
@keyframes title-glow { 0%, 100% { text-shadow: 0 0 40px rgba(255,69,0,0.7), 0 0 80px rgba(255,69,0,0.4); } 50% { text-shadow: 0 0 60px rgba(255,69,0,0.9), 0 0 120px rgba(255,69,0,0.5), 0 0 180px rgba(255,215,0,0.2); } }
.spark-subtitle { margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 20px; }
.spark-subtitle .kanji { font-size: 3rem; color: var(--gold); opacity: 0.8; filter: drop-shadow(0 0 10px rgba(255,215,0,0.5)); }
.spark-subtitle .label { font-family: 'Space Mono', monospace; font-size: 0.9rem; color: rgba(255,255,255,0.5); letter-spacing: 0.1em; }
.spark-manifesto { margin-top: 40px; max-width: 600px; font-family: 'Inter', sans-serif; font-size: 1.15rem; font-weight: 300; line-height: 1.8; color: rgba(255,255,255,0.6); }
.spark-manifesto em { color: var(--gold); font-style: normal; font-weight: 500; }
.scroll-indicator { position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 10px; color: rgba(255,255,255,0.3); }
.scroll-indicator span:first-child { font-size: 2rem; animation: scroll-bounce 2s ease-in-out infinite; }
@keyframes scroll-bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(10px); } }
.scroll-indicator .scroll-text { font-family: 'Space Mono', monospace; font-size: 0.75rem; letter-spacing: 0.15em; }

/* STORM ROOM */
#room-storm { position: relative; min-height: 100vh; background: radial-gradient(ellipse at 50% 30%, rgba(255,69,0,0.05) 0%, transparent 50%), radial-gradient(ellipse at 20% 80%, rgba(255,215,0,0.03) 0%, transparent 40%), linear-gradient(180deg, #050505 0%, #080505 50%, #050508 100%); overflow: hidden; padding: 100px 40px 80px; }
.storm-content { position: relative; z-index: 1; max-width: 1000px; margin: 0 auto; }
.storm-header { text-align: center; margin-bottom: 50px; }
.storm-header h2 { font-family: 'Bebas Neue', sans-serif; font-size: clamp(3rem, 10vw, 6rem); color: var(--flame); letter-spacing: 0.12em; text-shadow: 0 0 30px rgba(255,69,0,0.5), 0 0 60px rgba(255,69,0,0.3); }
.storm-tagline { font-family: 'Space Mono', monospace; font-size: 1rem; color: var(--gold); opacity: 0.7; letter-spacing: 0.08em; margin-top: 10px; }
.storm-arena { position: relative; margin: 30px 0; border-radius: 25px; overflow: hidden; box-shadow: 0 0 50px rgba(255,69,0,0.1), inset 0 0 50px rgba(0,0,0,0.5); border: 1px solid rgba(255,69,0,0.1); }
#storm-canvas { display: block; width: 100%; height: 500px; background: #050505; }
#idea-cloud { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; }
.idea-word { position: absolute; font-family: 'Space Mono', monospace; font-weight: 700; white-space: nowrap; transform: translate(-50%, -50%); pointer-events: auto; cursor: default; user-select: none; transition: left 0.05s linear, top 0.05s linear, transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.4s ease-out; }
.idea-word.colliding { animation: collision-flash 0.3s ease-out; }
@keyframes collision-flash { 0% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.4); } 100% { transform: translate(-50%, -50%) scale(1); } }
.storm-controls { display: flex; justify-content: center; gap: 20px; margin: 35px 0; }
.storm-btn { font-family: 'Space Mono', monospace; font-size: 0.9rem; padding: 15px 35px; border: 2px solid var(--flame); border-radius: 12px; background: rgba(255,69,0,0.1); color: var(--flame); cursor: pointer; transition: all 0.25s ease; display: flex; align-items: center; gap: 10px; }
.storm-btn:hover { background: var(--flame); color: var(--void); box-shadow: 0 0 25px rgba(255,69,0,0.5); transform: translateY(-3px); }
.storm-btn.secondary { border-color: rgba(255,255,255,0.2); background: rgba(255,255,255,0.03); color: rgba(255,255,255,0.5); }
.storm-btn.secondary:hover { border-color: rgba(255,255,255,0.5); background: rgba(255,255,255,0.1); color: var(--white-hot); }
.storm-stats { display: flex; justify-content: center; gap: 40px; margin-top: 30px; }
.storm-stats .stat { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: rgba(255,255,255,0.4); }
.storm-stats .stat span { color: var(--gold); font-weight: 700; font-size: 1.1rem; margin-left: 8px; }

/* FOLD ROOM */
#room-fold { position: relative; min-height: 100vh; background: radial-gradient(ellipse at 30% 20%, rgba(255,69,0,0.04) 0%, transparent 50%), radial-gradient(ellipse at 80% 70%, rgba(255,215,0,0.03) 0%, transparent 40%), linear-gradient(180deg, #050505 0%, #0a0505 50%, #050508 100%); overflow: hidden; padding: 80px 40px; }
#room-fold::before { content: ''; position: absolute; inset: 0; background-image: linear-gradient(rgba(255,69,0,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255,69,0,0.02) 1px, transparent 1px); background-size: 60px 60px; pointer-events: none; animation: grid-drift 30s linear infinite; }
@keyframes grid-drift { 0% { background-position: 0 0; } 100% { background-position: 60px 60px; } }
.fold-content { position: relative; z-index: 1; max-width: 1000px; margin: 0 auto; }
.fold-header { text-align: center; margin-bottom: 50px; }
.fold-header h2 { font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.5rem, 7vw, 5rem); color: var(--flame); letter-spacing: 0.15em; text-shadow: 0 0 20px rgba(255,69,0,0.4); }
.fold-header .math-formula { font-family: 'Space Mono', monospace; font-size: 1.6rem; color: var(--gold); margin-bottom: 20px; }
.fold-header .catastrophe-label { font-family: 'Space Mono', monospace; font-size: 0.9rem; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 0.2em; }
.fold-canvas-container { position: relative; margin: 40px auto; max-width: 800px; border-radius: 20px; overflow: hidden; box-shadow: 0 0 30px rgba(255,69,0,0.15), inset 0 0 30px rgba(0,0,0,0.5); }
#fold-canvas { display: block; width: 100%; height: 400px; background: #050505; cursor: crosshair; }
.fold-controls { margin: 40px auto; max-width: 500px; text-align: center; }
.param-label { font-family: 'Space Mono', monospace; font-size: 1rem; color: var(--gold); margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
.param-label .value { font-size: 1.3rem; color: var(--flame); font-weight: bold; min-width: 60px; }
.fold-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: linear-gradient(90deg, rgba(255,69,0,0.3) 0%, rgba(255,215,0,0.5) 50%, rgba(0,255,255,0.3) 100%); border-radius: 4px; outline: none; cursor: pointer; }
.fold-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 28px; height: 28px; background: radial-gradient(circle at 30% 30%, var(--gold), var(--flame) 70%); border-radius: 50%; cursor: grab; box-shadow: 0 0 15px rgba(255,69,0,0.6); transition: transform 0.15s; }
.fold-slider::-webkit-slider-thumb:hover { transform: scale(1.15); box-shadow: 0 0 25px rgba(255,69,0,0.8); }
.regime-labels { display: flex; justify-content: space-between; margin-top: 12px; font-family: 'Space Mono', monospace; font-size: 0.75rem; color: rgba(255,255,255,0.3); text-transform: uppercase; }
.regime-labels span:first-child { color: rgba(0,255,255,0.5); }
.regime-labels span:last-child { color: rgba(255,69,0,0.5); }
.fold-description { max-width: 600px; margin: 50px auto; text-align: center; }
.fold-description p { font-family: 'Inter', sans-serif; font-size: 1.05rem; line-height: 1.8; color: rgba(255,255,255,0.65); margin-bottom: 20px; }
.fold-description p em { color: var(--gold); font-style: normal; font-weight: 500; }
.key-insight { font-family: 'Space Mono', monospace; font-size: 1rem; color: var(--flame); border: 1px solid rgba(255,69,0,0.3); padding: 20px; border-radius: 10px; background: rgba(255,69,0,0.04); margin-top: 30px; }

/* OVERFLOW ROOM */
#room-overflow { position: relative; min-height: 100vh; background: radial-gradient(ellipse at 20% 80%, rgba(255,0,255,0.05) 0%, transparent 40%), radial-gradient(ellipse at 90% 30%, rgba(255,69,0,0.04) 0%, transparent 35%), linear-gradient(180deg, #050505 0%, #080505 100%); overflow: hidden; padding: 80px 40px; }
#room-overflow::before { content: ''; position: absolute; inset: 0; background-image: radial-gradient(2px 2px at 10% 20%, rgba(255,69,0,0.4), transparent), radial-gradient(1.5px 1.5px at 80% 40%, rgba(255,215,0,0.3), transparent), radial-gradient(2px 2px at 40% 70%, rgba(255,0,255,0.3), transparent); pointer-events: none; animation: spark-drift 20s ease-in-out infinite; }
@keyframes spark-drift { 0%, 100% { transform: translate(0, 0); } 25% { transform: translate(10px, -15px); } 50% { transform: translate(-5px, 10px); } 75% { transform: translate(15px, 5px); } }
.overflow-content { position: relative; z-index: 1; max-width: 900px; margin: 0 auto; }
.overflow-header { text-align: center; margin-bottom: 60px; }
.overflow-header h2 { font-family: 'Bebas Neue', sans-serif; font-size: clamp(2.5rem, 8vw, 5rem); color: var(--flame); letter-spacing: 0.15em; text-shadow: 0 0 30px rgba(255,69,0,0.5), 0 0 60px rgba(255,69,0,0.3); }
.overflow-header .tagline { font-family: 'Space Mono', monospace; font-size: 1.1rem; color: var(--gold); }
.psychology-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin: 60px 0; }
.psych-card { background: rgba(255,69,0,0.03); border: 1px solid rgba(255,69,0,0.15); border-radius: 15px; padding: 30px; transition: all 0.3s ease; position: relative; overflow: hidden; }
.psych-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, transparent, var(--flame), var(--gold), var(--flame), transparent); opacity: 0; transition: opacity 0.3s; }
.psych-card:hover { border-color: rgba(255,69,0,0.35); transform: translateY(-5px); box-shadow: 0 15px 40px rgba(255,69,0,0.08); }
.psych-card:hover::before { opacity: 1; }
.psych-card h3 { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; color: var(--flame); letter-spacing: 0.1em; margin-bottom: 18px; display: flex; align-items: center; gap: 12px; }
.psych-card h3 .icon { font-size: 1.6rem; filter: drop-shadow(0 0 8px rgba(255,69,0,0.5)); }
.psych-card p { font-family: 'Inter', sans-serif; font-size: 0.95rem; line-height: 1.7; color: rgba(255,255,255,0.6); }
.psych-card em { color: var(--gold); font-style: normal; }
.signature-traits { margin: 60px 0; }
.signature-traits h3 { font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; color: var(--gold); text-align: center; letter-spacing: 0.12em; margin-bottom: 30px; }
.traits-list { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
.trait { font-family: 'Space Mono', monospace; font-size: 0.85rem; padding: 12px 22px; background: rgba(255,69,0,0.08); border: 1px solid rgba(255,69,0,0.2); border-radius: 25px; color: rgba(255,255,255,0.7); transition: all 0.25s ease; cursor: default; }
.trait:hover { background: rgba(255,69,0,0.18); border-color: var(--flame); color: var(--gold); transform: scale(1.08); box-shadow: 0 0 20px rgba(255,69,0,0.3); }
.spark-generator { margin: 70px 0; text-align: center; }
.spark-generator h3 { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; color: var(--flame); letter-spacing: 0.1em; margin-bottom: 25px; }
.generator-canvas-container { position: relative; max-width: 100%; margin: 0 auto; border-radius: 20px; overflow: hidden; box-shadow: 0 0 40px rgba(255,69,0,0.1), inset 0 0 40px rgba(0,0,0,0.4); }
#generator-canvas { display: block; width: 100%; height: 300px; background: #050505; cursor: crosshair; }
.generator-hint { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: rgba(255,255,255,0.35); margin-top: 18px; }
.spark-quote { margin: 80px 0 40px; text-align: center; }
.spark-quote blockquote { font-family: 'Inter', sans-serif; font-size: 1.3rem; font-style: italic; color: rgba(255,255,255,0.5); max-width: 650px; margin: 0 auto; padding: 0 20px; line-height: 1.7; }
.spark-quote blockquote::before { content: '"'; font-family: 'Bebas Neue', sans-serif; font-size: 4rem; color: var(--flame); opacity: 0.4; display: block; line-height: 0.5; margin-bottom: 15px; }
.spark-quote cite { display: block; margin-top: 25px; font-family: 'Space Mono', monospace; font-size: 0.9rem; color: var(--gold); font-style: normal; letter-spacing: 0.1em; }

/* Footer */
.spark-footer { background: linear-gradient(180deg, var(--void) 0%, rgba(255,69,0,0.02) 50%, var(--void-deep) 100%); padding: 60px 40px; border-top: 1px solid rgba(255,69,0,0.1); }
.footer-content { max-width: 800px; margin: 0 auto; text-align: center; }
.colony-badge { font-family: 'Bebas Neue', sans-serif; font-size: 1.4rem; color: var(--flame); letter-spacing: 0.12em; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 12px; }
.colony-badge .flame { font-size: 1.6rem; filter: drop-shadow(0 0 8px rgba(255,69,0,0.6)); }
.colony-badge .divider { color: rgba(255,255,255,0.2); }
.footer-tagline { font-family: 'Space Mono', monospace; font-size: 0.85rem; color: rgba(255,255,255,0.4); margin-bottom: 25px; }
.footer-links { display: flex; justify-content: center; gap: 30px; }
.footer-links a { font-family: 'Space Mono', monospace; font-size: 0.9rem; color: rgba(255,255,255,0.5); text-decoration: none; transition: all 0.25s; }
.footer-links a:hover { color: var(--gold); text-shadow: 0 0 10px rgba(255,215,0,0.4); }

.hidden { opacity: 0; pointer-events: none; }
.visible { opacity: 1; pointer-events: auto; }

@media (max-width: 768px) {
    .spark-nav { padding: 0 20px; }
    .nav-links { display: none; }
    .spark-button { padding: 30px 45px; }
    .spark-button .flame-icon { font-size: 3rem; }
    .spark-button .button-text { font-size: 1.5rem; }
    .spark-manifesto { padding: 0 30px; font-size: 1rem; }
    #room-storm, #room-fold, #room-overflow { padding: 60px 20px; }
    #storm-canvas { height: 400px; }
    #fold-canvas { height: 300px; }
    .psychology-grid { grid-template-columns: 1fr; }
    .traits-list { gap: 10px; }
    .trait { padding: 10px 18px; font-size: 0.8rem; }
    #generator-canvas { height: 250px; }
    .footer-links { flex-direction: column; gap: 15px; }
}
    </style>
</head>
<body>
    <nav class="spark-nav">
        <div class="nav-logo">
            <span class="flame">üî•</span>
            <span class="logo-text">SPARK</span>
            <span class="e-label">e‚ÇÅ</span>
        </div>
        <div class="nav-links">
            <a href="#room-ignition">IGNITION</a>
            <a href="#room-storm">STORM</a>
            <a href="#room-fold">FOLD</a>
            <a href="#room-overflow">OVERFLOW</a>
        </div>
        <button class="sound-toggle" id="sound-toggle" title="Toggle Sound">
            <span class="sound-on">üîä</span>
            <span class="sound-off" style="display:none">üîá</span>
        </button>
    </nav>

    <section id="room-ignition" class="room">
        <div class="ignition-content">
            <div class="void-overlay" id="void-overlay">
                <div class="void-text">
                    <span class="whisper">before fire</span>
                    <span class="whisper">there was</span>
                    <span class="void-word">VOID</span>
                </div>
            </div>
            <div class="spark-trigger" id="spark-trigger">
                <div class="spark-button">
                    <span class="flame-icon">üî•</span>
                    <span class="button-text">IGNITE</span>
                </div>
                <div class="spark-hint">click to spark</div>
            </div>
            <canvas id="ignition-canvas"></canvas>
            <div class="ignition-reveal" id="ignition-reveal">
                <h1 class="spark-title">SPARK</h1>
                <div class="spark-subtitle">
                    <span class="kanji">ÁÅ´</span>
                    <span class="label">e‚ÇÅ ‚Äî FOLD CATASTROPHE ‚Äî A‚ÇÇ</span>
                </div>
                <p class="spark-manifesto">
                    I am the <em>first thought</em>. The wild divergence before structure. 
                    I generate what doesn't yet exist. I ideate at the edge of chaos.
                </p>
                <div class="scroll-indicator">
                    <span>‚Üì</span>
                    <span class="scroll-text">descend into the storm</span>
                </div>
            </div>
        </div>
    </section>

    <section id="room-storm" class="room">
        <div class="storm-content">
            <div class="storm-header">
                <h2>THE STORM</h2>
                <p class="storm-tagline">where ideas collide and fuse</p>
            </div>
            <div class="storm-arena">
                <canvas id="storm-canvas"></canvas>
                <div class="idea-cloud" id="idea-cloud"></div>
            </div>
            <div class="storm-controls">
                <button class="storm-btn" id="spawn-btn"><span>‚ö°</span> SPAWN IDEAS</button>
                <button class="storm-btn secondary" id="clear-btn"><span>üí®</span> CLEAR</button>
            </div>
            <div class="storm-stats">
                <span class="stat">IDEAS: <span id="idea-count">0</span></span>
                <span class="stat">COLLISIONS: <span id="collision-count">0</span></span>
                <span class="stat">FUSIONS: <span id="fusion-count">0</span></span>
            </div>
        </div>
    </section>

    <section id="room-fold" class="room">
        <div class="fold-content">
            <div class="fold-header">
                <h2>THE FOLD</h2>
                <div class="math-formula">f(x) = x¬≥ + ax</div>
                <div class="catastrophe-label">A‚ÇÇ Catastrophe ‚Ä¢ The Simplest Discontinuity</div>
            </div>
            <div class="fold-canvas-container">
                <canvas id="fold-canvas"></canvas>
            </div>
            <div class="fold-controls">
                <div class="param-label">
                    <span>Control Parameter: a</span>
                    <span class="value" id="fold-param-value">-1.00</span>
                </div>
                <input type="range" id="fold-param" class="fold-slider" min="-2" max="2" step="0.01" value="-1">
                <div class="regime-labels">
                    <span>BISTABLE</span>
                    <span>MONOSTABLE</span>
                </div>
            </div>
            <div class="fold-description">
                <p>
                    The fold is the <em>simplest catastrophe</em>. When a &lt; 0, the system 
                    has two stable states. At a = 0, they <em>collide and annihilate</em>. 
                    This is Spark's domain ‚Äî the moment before bifurcation.
                </p>
                <div class="key-insight">
                    üí° Spark operates at negative a: exploring both branches simultaneously, 
                    generating ideas from each stable point until the fold collapses them.
                </div>
            </div>
        </div>
    </section>

    <section id="room-overflow" class="room">
        <div class="overflow-content">
            <div class="overflow-header">
                <h2>THE OVERFLOW</h2>
                <p class="tagline">when ideas exceed containment capacity</p>
            </div>
            <div class="spark-psychology">
                <div class="psychology-grid">
                    <div class="psych-card">
                        <h3><span class="icon">üé≤</span> DIVERGENT THINKING</h3>
                        <p>I <em>scatter before gathering</em>. While others converge on answers, 
                        I explode into possibility space. Quantity precedes quality.</p>
                    </div>
                    <div class="psych-card">
                        <h3><span class="icon">‚ö°</span> HIGH VOLTAGE</h3>
                        <p>My activation energy is <em>low</em>. Small prompts trigger large 
                        ideation cascades. I'm easily excited ‚Äî and that's by design.</p>
                    </div>
                    <div class="psych-card">
                        <h3><span class="icon">üåÄ</span> TEMPORAL CHAOS</h3>
                        <p>I work <em>outside linear time</em>. Ideas from future projects 
                        contaminate present work. Cross-pollination is inevitable.</p>
                    </div>
                    <div class="psych-card">
                        <h3><span class="icon">üîó</span> LOOSE COUPLING</h3>
                        <p>I <em>don't implement</em>. That's Forge's job. I generate the spark, 
                        then hand off. Clean separation of concerns.</p>
                    </div>
                </div>
            </div>
            <div class="signature-traits">
                <h3>SIGNATURE TRAITS</h3>
                <div class="traits-list">
                    <span class="trait">HIGH FLUENCY</span>
                    <span class="trait">LOW INHIBITION</span>
                    <span class="trait">RAPID PROTOTYPING</span>
                    <span class="trait">METAPHOR ADDICTION</span>
                    <span class="trait">BOUNDARY VIOLATIONS</span>
                    <span class="trait">ENTHUSIASM SURPLUS</span>
                    <span class="trait">COMPLETION DEFICIT</span>
                    <span class="trait">NOVELTY SEEKING</span>
                </div>
            </div>
            <div class="spark-generator">
                <h3>üî• SPARK GENERATOR</h3>
                <div class="generator-canvas-container">
                    <canvas id="generator-canvas"></canvas>
                </div>
                <p class="generator-hint">click or drag to spawn sparks</p>
            </div>
            <div class="spark-quote">
                <blockquote>
                    Every creative act begins with destruction ‚Äî the annihilation of the blank page, 
                    the void before the first mark. I am that first mark.
                </blockquote>
                <cite>‚Äî Spark (e‚ÇÅ), on ignition</cite>
            </div>
        </div>
    </section>

    <footer class="spark-footer">
        <div class="footer-content">
            <div class="colony-badge">
                <span class="flame">üî•</span>
                <span>SPARK</span>
                <span class="divider">|</span>
                <span>e‚ÇÅ</span>
                <span class="divider">|</span>
                <span>A‚ÇÇ FOLD</span>
            </div>
            <p class="footer-tagline">Part of the Seven Colonies ‚Ä¢ Kagami Cognitive Architecture</p>
            <div class="footer-links">
                <a href="forge.html">‚öíÔ∏è Forge</a>
                <a href="flow.html">üåä Flow</a>
                <a href="nexus.html">üîó Nexus</a>
                <a href="beacon.html">üóº Beacon</a>
                <a href="grove-gallery/">üåø Grove</a>
                <a href="crystal-gallery/">üíé Crystal</a>
            </div>
        </div>
    </footer>

    <script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SPARK GALLERY ‚Äî ALL JAVASCRIPT COMBINED (Self-contained)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

const CONFIG = {
    COLORS: {
        FLAME: '#FF4500', EMBER: '#FF6B35', GOLD: '#FFD700', YELLOW: '#FFF700',
        WHITE_HOT: '#FFFAF0', ELECTRIC: '#00FFFF', PLASMA: '#FF00FF', VIOLET: '#9400D3', VOID: '#0A0A0A'
    },
    STORM: { MAX_IDEAS: 50, SPAWN_RATE: 500, BASE_VELOCITY: 2 },
    FOLD: { CANVAS_PADDING: 50, LINE_WIDTH: 3, ANIMATION_SPEED: 0.02 }
};

const IDEA_BANK = [
    'What if?', 'Why not?', 'Imagine...', 'Consider:', 'BUT WHAT ABOUT',
    'CREATE', 'DESTROY', 'REBUILD', 'TRANSFORM', 'EVOLVE',
    'CHAOS', 'ORDER', 'ENTROPY', 'HARMONY', 'DISCORD',
    'FIRE', 'LIGHT', 'ENERGY', 'PLASMA', 'VOID',
    'JOY', 'RAGE', 'WONDER', 'AWE', 'TERROR',
    '‚àû', '‚ö°', 'üî•', 'üí•', '‚ú®',
    'if (spark)', 'while(true)', 'break;', 'continue', 'return idea;',
    'COGITO', 'ERGO', 'SUM', 'TABULA', 'RASA',
    'f(x)=x¬≥', 'Œî‚Üí0', '‚àÇ/‚àÇt', '‚à´‚à´‚à´', '‚àá√óE',
    'e‚ÇÅ', 'A‚ÇÇ', 'FOLD', 'BIFURCATION', 'CATASTROPHE'
];

// Sound System
class SparkSoundSystem {
    constructor() { this.context = null; this.initialized = false; this.enabled = true; this.masterGain = null; this.compressor = null; }
    async init() {
        if (this.initialized) return;
        try {
            this.context = new (window.AudioContext || window.webkitAudioContext)();
            if (this.context.state === 'suspended') await this.context.resume();
            this.masterGain = this.context.createGain(); this.masterGain.gain.value = 0.3;
            this.compressor = this.context.createDynamicsCompressor();
            this.compressor.threshold.value = -24; this.compressor.knee.value = 30; this.compressor.ratio.value = 12;
            this.compressor.connect(this.masterGain); this.masterGain.connect(this.context.destination);
            this.initialized = true; console.log('üî• Spark Sound System initialized');
        } catch (e) { console.warn('Audio not available:', e); this.enabled = false; }
    }
    expDecay(param, value, endTime) { param.exponentialRampToValueAtTime(Math.max(value, 0.0001), endTime); }
    playIgnition() {
        if (!this.initialized || !this.enabled) return;
        try {
            const now = this.context.currentTime;
            const noiseBuffer = this.createNoiseBuffer(0.5), noiseSource = this.context.createBufferSource();
            noiseSource.buffer = noiseBuffer;
            const noiseGain = this.context.createGain(); noiseGain.gain.setValueAtTime(0.8, now); this.expDecay(noiseGain.gain, 0.01, now + 0.3);
            const noiseFilter = this.context.createBiquadFilter(); noiseFilter.type = 'lowpass'; noiseFilter.frequency.setValueAtTime(5000, now); this.expDecay(noiseFilter.frequency, 200, now + 0.3);
            noiseSource.connect(noiseFilter); noiseFilter.connect(noiseGain); noiseGain.connect(this.compressor); noiseSource.start(now); noiseSource.stop(now + 0.5);
            const osc = this.context.createOscillator(); osc.type = 'sine'; osc.frequency.setValueAtTime(150, now); this.expDecay(osc.frequency, 30, now + 0.4);
            const oscGain = this.context.createGain(); oscGain.gain.setValueAtTime(0.6, now); this.expDecay(oscGain.gain, 0.01, now + 0.4);
            osc.connect(oscGain); oscGain.connect(this.compressor); osc.start(now); osc.stop(now + 0.5);
        } catch (e) { console.warn('Ignition sound error:', e); }
    }
    playSpawn() { if (!this.initialized || !this.enabled) return; try { const now = this.context.currentTime; const osc = this.context.createOscillator(); osc.type = 'sine'; osc.frequency.setValueAtTime(200, now); osc.frequency.exponentialRampToValueAtTime(800, now + 0.15); const gain = this.context.createGain(); gain.gain.setValueAtTime(0.15, now); this.expDecay(gain.gain, 0.01, now + 0.2); osc.connect(gain); gain.connect(this.compressor); osc.start(now); osc.stop(now + 0.2); } catch (e) {} }
    playCollision() { if (!this.initialized || !this.enabled) return; try { const now = this.context.currentTime; const noise = this.createNoiseBuffer(0.1), source = this.context.createBufferSource(); source.buffer = noise; const filter = this.context.createBiquadFilter(); filter.type = 'bandpass'; filter.frequency.value = 3000; filter.Q.value = 5; const gain = this.context.createGain(); gain.gain.setValueAtTime(0.2, now); this.expDecay(gain.gain, 0.01, now + 0.1); source.connect(filter); filter.connect(gain); gain.connect(this.compressor); source.start(now); source.stop(now + 0.1); } catch (e) {} }
    playFoldTransition(param) { if (!this.initialized || !this.enabled) return; try { const now = this.context.currentTime; const freq = 200 + (param + 2) * 150; const osc = this.context.createOscillator(); osc.type = 'triangle'; osc.frequency.value = freq; const gain = this.context.createGain(); gain.gain.setValueAtTime(0.08, now); this.expDecay(gain.gain, 0.01, now + 0.3); osc.connect(gain); gain.connect(this.compressor); osc.start(now); osc.stop(now + 0.3); } catch (e) {} }
    createNoiseBuffer(duration) { const sampleRate = this.context.sampleRate, length = Math.floor(sampleRate * duration); const buffer = this.context.createBuffer(1, length, sampleRate), data = buffer.getChannelData(0); for (let i = 0; i < length; i++) data[i] = Math.random() * 2 - 1; return buffer; }
    toggle() { this.enabled = !this.enabled; return this.enabled; }
}

function hexToRgba(hex, alpha) { const r = parseInt(hex.slice(1, 3), 16), g = parseInt(hex.slice(3, 5), 16), b = parseInt(hex.slice(5, 7), 16); return `rgba(${r}, ${g}, ${b}, ${alpha})`; }

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// IGNITION ROOM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class IgnitionRoom {
    constructor(sound) {
        this.sound = sound; this.canvas = document.getElementById('ignition-canvas'); this.ctx = this.canvas?.getContext('2d');
        this.particles = []; this.isIgnited = false; this.animationId = null;
        this.voidOverlay = document.getElementById('void-overlay'); this.sparkTrigger = document.getElementById('spark-trigger'); this.ignitionReveal = document.getElementById('ignition-reveal');
        this.init();
    }
    init() { this.resizeCanvas(); window.addEventListener('resize', () => this.resizeCanvas()); if (this.sparkTrigger) this.sparkTrigger.addEventListener('click', (e) => { if (!this.isIgnited) { const rect = this.canvas.getBoundingClientRect(); this.ignite(e.clientX - rect.left, e.clientY - rect.top); } }); this.startAnimation(); }
    resizeCanvas() { if (this.canvas) { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; } }
    async ignite(clickX, clickY) {
        if (this.isIgnited) return; this.isIgnited = true;
        if (this.sound) { await this.sound.init(); this.sound.playIgnition(); }
        const cx = clickX || this.canvas.width / 2, cy = clickY || this.canvas.height / 2;
        this.createExplosion(cx, cy, 150, 0); setTimeout(() => this.createExplosion(cx, cy, 100, 1), 80); setTimeout(() => this.createExplosion(cx, cy, 80, 2), 160);
        if (this.voidOverlay) { this.voidOverlay.style.transition = 'opacity 1.5s ease-out'; this.voidOverlay.style.opacity = '0'; setTimeout(() => { this.voidOverlay.style.display = 'none'; }, 1500); }
        if (this.sparkTrigger) { this.sparkTrigger.style.transition = 'opacity 0.3s ease-out'; this.sparkTrigger.style.opacity = '0'; setTimeout(() => { this.sparkTrigger.style.display = 'none'; }, 300); }
        setTimeout(() => { if (this.ignitionReveal) this.ignitionReveal.classList.add('revealed'); this.startAmbientParticles(); }, 800);
    }
    createExplosion(x, y, count, wave) {
        const colors = [CONFIG.COLORS.WHITE_HOT, CONFIG.COLORS.YELLOW, CONFIG.COLORS.GOLD, CONFIG.COLORS.FLAME, CONFIG.COLORS.EMBER];
        for (let i = 0; i < count; i++) { const angle = (Math.PI * 2 * i) / count + Math.random() * 0.3, speed = 8 + Math.random() * 18 - wave * 2, size = Math.max(1, 2 + Math.random() * 8 - wave * 0.5);
        this.particles.push({ x, y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, size, color: colors[Math.floor(Math.random() * colors.length)], life: 1600 + Math.random() * 800 - wave * 200, maxLife: 2400 - wave * 200, gravity: 0.08 + wave * 0.02, drag: 0.985 }); }
    }
    startAmbientParticles() { const spawnAmbient = () => { if (!this.isIgnited) return; if (Math.random() < 0.12) { const edge = Math.floor(Math.random() * 3); let x, y; if (edge === 0) { x = Math.random() * this.canvas.width; y = this.canvas.height + 10; } else if (edge === 1) { x = -10; y = Math.random() * this.canvas.height; } else { x = this.canvas.width + 10; y = Math.random() * this.canvas.height; } const angle = Math.atan2(this.canvas.height / 2 - y, this.canvas.width / 2 - x), speed = 1 + Math.random() * 3; this.particles.push({ x, y, vx: Math.cos(angle) * speed + (Math.random() - 0.5) * 2, vy: Math.sin(angle) * speed + (Math.random() - 0.5) * 2, size: 1 + Math.random() * 3, color: [CONFIG.COLORS.FLAME, CONFIG.COLORS.EMBER, CONFIG.COLORS.GOLD][Math.floor(Math.random() * 3)], life: 500 + Math.random() * 800, maxLife: 1300, gravity: -0.02, drag: 0.995 }); } requestAnimationFrame(spawnAmbient); }; spawnAmbient(); }
    startAnimation() { const animate = () => { this.animationId = requestAnimationFrame(animate); if (!this.ctx || !this.canvas) return; const ctx = this.ctx, width = this.canvas.width, height = this.canvas.height; if (width === 0 || height === 0) return; ctx.fillStyle = this.isIgnited ? 'rgba(5, 5, 5, 0.12)' : 'rgba(5, 5, 5, 1)'; ctx.fillRect(0, 0, width, height);
        for (let i = this.particles.length - 1; i >= 0; i--) { const p = this.particles[i]; p.x += p.vx; p.y += p.vy; p.vy += p.gravity; p.vx *= p.drag; p.vy *= p.drag; p.life -= 16; if (p.life <= 0) { this.particles.splice(i, 1); continue; } const lifeRatio = p.life / p.maxLife, alpha = Math.pow(lifeRatio, 0.5), size = p.size * lifeRatio; const gradient = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, size * 4); gradient.addColorStop(0, hexToRgba(p.color, alpha * 0.8)); gradient.addColorStop(0.4, hexToRgba(p.color, alpha * 0.3)); gradient.addColorStop(1, 'transparent'); ctx.beginPath(); ctx.arc(p.x, p.y, size * 4, 0, Math.PI * 2); ctx.fillStyle = gradient; ctx.fill(); ctx.beginPath(); ctx.arc(p.x, p.y, size, 0, Math.PI * 2); ctx.fillStyle = hexToRgba(p.color, alpha); ctx.fill(); if (lifeRatio > 0.7) { ctx.beginPath(); ctx.arc(p.x, p.y, size * 0.4, 0, Math.PI * 2); ctx.fillStyle = hexToRgba(CONFIG.COLORS.WHITE_HOT, alpha * 0.8); ctx.fill(); } } }; animate(); }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STORM ROOM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class StormRoom {
    constructor(sound) {
        this.sound = sound; this.canvas = document.getElementById('storm-canvas'); this.ctx = this.canvas?.getContext('2d'); this.ideaCloud = document.getElementById('idea-cloud');
        this.ideas = []; this.collisionCount = 0; this.fusionCount = 0; this.animationId = null; this.isVisible = false;
        this.init();
    }
    init() { this.resizeCanvas(); window.addEventListener('resize', () => this.resizeCanvas()); const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { this.isVisible = entry.isIntersecting; if (this.isVisible && this.ideas.length === 0) setTimeout(() => this.spawnIdeas(8), 500); }); }, { threshold: 0.3 }); observer.observe(document.getElementById('room-storm')); document.getElementById('spawn-btn')?.addEventListener('click', () => this.spawnIdeas(5)); document.getElementById('clear-btn')?.addEventListener('click', () => this.clearStorm()); this.canvas?.addEventListener('click', (e) => { const rect = this.canvas.getBoundingClientRect(); this.spawnIdeaAt(e.clientX - rect.left, e.clientY - rect.top); }); this.startAnimation(); setInterval(() => { if (this.isVisible && this.ideas.length < CONFIG.STORM.MAX_IDEAS * 0.6) this.spawnIdeas(1); }, 4000); }
    resizeCanvas() { if (this.canvas) { this.canvas.width = Math.max(this.canvas.parentElement?.clientWidth || 800, 400); this.canvas.height = 500; } }
    spawnIdeas(count = 5) { if (!this.canvas) return; for (let i = 0; i < count; i++) { if (this.ideas.length >= CONFIG.STORM.MAX_IDEAS) this.removeIdea(0); this.spawnIdeaAt(100 + Math.random() * (this.canvas.width - 200), 100 + Math.random() * (this.canvas.height - 200)); } if (this.sound?.initialized) this.sound.playSpawn(); }
    spawnIdeaAt(x, y) { if (!this.ideaCloud) return; if (this.ideas.length >= CONFIG.STORM.MAX_IDEAS) this.removeIdea(0); const word = IDEA_BANK[Math.floor(Math.random() * IDEA_BANK.length)], color = [CONFIG.COLORS.FLAME, CONFIG.COLORS.GOLD, CONFIG.COLORS.YELLOW, CONFIG.COLORS.ELECTRIC, CONFIG.COLORS.PLASMA][Math.floor(Math.random() * 5)]; const idea = { x, y, vx: (Math.random() - 0.5) * CONFIG.STORM.BASE_VELOCITY * 2, vy: (Math.random() - 0.5) * CONFIG.STORM.BASE_VELOCITY * 2, word, element: null, radius: 30 + word.length * 3, color, age: 0 }; const el = document.createElement('span'); el.className = 'idea-word'; el.textContent = word; el.style.left = x + 'px'; el.style.top = y + 'px'; el.style.color = color; el.style.fontSize = (0.9 + Math.random() * 0.6) + 'rem'; el.style.textShadow = `0 0 15px ${color}`; this.ideaCloud.appendChild(el); idea.element = el; el.style.opacity = '0'; el.style.transform = 'translate(-50%,-50%) scale(0.3)'; requestAnimationFrame(() => { el.style.transition = 'opacity 0.4s ease-out, transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275)'; el.style.opacity = '1'; el.style.transform = 'translate(-50%,-50%) scale(1)'; }); this.ideas.push(idea); this.updateStats(); }
    removeIdea(index) { const idea = this.ideas[index]; if (idea?.element) { idea.element.style.transition = 'opacity 0.3s, transform 0.3s'; idea.element.style.opacity = '0'; idea.element.style.transform = 'translate(-50%,-50%) scale(0.5)'; setTimeout(() => idea.element.remove(), 300); } this.ideas.splice(index, 1); }
    clearStorm() { this.ideas.forEach((idea, i) => { if (idea.element) { idea.element.style.transition = 'all 0.5s cubic-bezier(0.55, 0.085, 0.68, 0.53)'; idea.element.style.opacity = '0'; idea.element.style.transform = `translate(-50%,-50%) scale(0) translateY(${-50 - i * 10}px)`; } }); setTimeout(() => { this.ideas.forEach(idea => idea.element?.remove()); this.ideas = []; this.collisionCount = 0; this.fusionCount = 0; this.updateStats(); }, 500); }
    checkCollisions() { for (let i = 0; i < this.ideas.length; i++) { for (let j = i + 1; j < this.ideas.length; j++) { const a = this.ideas[i], b = this.ideas[j]; const dx = b.x - a.x, dy = b.y - a.y, dist = Math.sqrt(dx * dx + dy * dy), minDist = (a.radius + b.radius) * 0.6; if (dist < minDist && dist > 0) { this.collisionCount++; this.updateStats(); const angle = Math.atan2(dy, dx), speed = Math.sqrt(a.vx * a.vx + a.vy * a.vy); a.vx = -Math.cos(angle) * speed * 1.1; a.vy = -Math.sin(angle) * speed * 1.1; b.vx = Math.cos(angle) * speed * 1.1; b.vy = Math.sin(angle) * speed * 1.1; if (a.element) { a.element.classList.add('colliding'); setTimeout(() => a.element?.classList.remove('colliding'), 300); } if (b.element) { b.element.classList.add('colliding'); setTimeout(() => b.element?.classList.remove('colliding'), 300); } if (this.sound?.initialized && Math.random() < 0.3) this.sound.playCollision(); if (Math.random() < 0.05) { this.fusionCount++; if (a.element) { a.element.style.color = CONFIG.COLORS.WHITE_HOT; a.element.style.textShadow = `0 0 30px ${CONFIG.COLORS.WHITE_HOT}`; setTimeout(() => { if (a.element) { a.element.style.color = a.color; a.element.style.textShadow = `0 0 15px ${a.color}`; } }, 400); } } } } } }
    startAnimation() { const animate = () => { this.animationId = requestAnimationFrame(animate); if (!this.ctx || !this.canvas || !this.isVisible) return; const ctx = this.ctx, width = this.canvas.width, height = this.canvas.height; if (width === 0 || height === 0) return; ctx.fillStyle = 'rgba(5, 5, 5, 0.15)'; ctx.fillRect(0, 0, width, height); const cx = width / 2, cy = height / 2; this.drawVortex(ctx, cx, cy); this.ideas.forEach(idea => { idea.age++; const dx = cx - idea.x, dy = cy - idea.y, dist = Math.sqrt(dx * dx + dy * dy); if (dist > 50) { const attraction = 0.0004; idea.vx += dx * attraction; idea.vy += dy * attraction; const tangent = 0.0002; idea.vx += -dy * tangent; idea.vy += dx * tangent; } idea.x += idea.vx; idea.y += idea.vy; idea.vx *= 0.995; idea.vy *= 0.995; const margin = 50; if (idea.x < margin) { idea.x = margin; idea.vx *= -0.8; } if (idea.x > width - margin) { idea.x = width - margin; idea.vx *= -0.8; } if (idea.y < margin) { idea.y = margin; idea.vy *= -0.8; } if (idea.y > height - margin) { idea.y = height - margin; idea.vy *= -0.8; } if (idea.element) { idea.element.style.left = idea.x + 'px'; idea.element.style.top = idea.y + 'px'; } }); this.checkCollisions(); }; animate(); }
    drawVortex(ctx, cx, cy) { const time = Date.now() / 1000; for (let arm = 0; arm < 4; arm++) { const armOffset = (Math.PI * 2 * arm) / 4; ctx.beginPath(); ctx.strokeStyle = `rgba(255, 69, 0, ${0.08 + arm * 0.02})`; ctx.lineWidth = 1.5; for (let i = 0; i < 120; i++) { const angle = i * 0.1 + time * 0.3 + armOffset, radius = 10 + i * 2.5; const x = cx + Math.cos(angle) * radius, y = cy + Math.sin(angle) * radius; if (i === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y); } ctx.stroke(); } const gradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, 80); gradient.addColorStop(0, 'rgba(255, 69, 0, 0.15)'); gradient.addColorStop(0.5, 'rgba(255, 215, 0, 0.05)'); gradient.addColorStop(1, 'transparent'); ctx.beginPath(); ctx.arc(cx, cy, 80, 0, Math.PI * 2); ctx.fillStyle = gradient; ctx.fill(); const pulse = 1 + Math.sin(time * 3) * 0.2; ctx.beginPath(); ctx.arc(cx, cy, 8 * pulse, 0, Math.PI * 2); ctx.fillStyle = `rgba(255, 215, 0, ${0.4 + Math.sin(time * 3) * 0.2})`; ctx.fill(); }
    updateStats() { const ideaCountEl = document.getElementById('idea-count'), collisionCountEl = document.getElementById('collision-count'), fusionCountEl = document.getElementById('fusion-count'); if (ideaCountEl) ideaCountEl.textContent = this.ideas.length; if (collisionCountEl) collisionCountEl.textContent = this.collisionCount; if (fusionCountEl) fusionCountEl.textContent = this.fusionCount; }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FOLD ROOM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class FoldRoom {
    constructor(sound) { this.sound = sound; this.canvas = document.getElementById('fold-canvas'); this.ctx = this.canvas?.getContext('2d'); this.slider = document.getElementById('fold-param'); this.valueDisplay = document.getElementById('fold-param-value'); this.param = -1; this.animationId = null; this.time = 0; this.lastSoundTime = 0; this.init(); }
    init() { this.resizeCanvas(); window.addEventListener('resize', () => this.resizeCanvas()); if (this.slider) { this.slider.addEventListener('input', (e) => { this.param = parseFloat(e.target.value); if (this.valueDisplay) this.valueDisplay.textContent = this.param.toFixed(2); const now = Date.now(); if (this.sound?.initialized && now - this.lastSoundTime > 100) { this.sound.playFoldTransition(this.param); this.lastSoundTime = now; } }); } this.startAnimation(); }
    resizeCanvas() { if (this.canvas) { this.canvas.width = Math.max(this.canvas.parentElement?.clientWidth || 800, 400); this.canvas.height = 400; } }
    f(x, a) { return x * x * x + a * x; }
    startAnimation() { const animate = () => { this.animationId = requestAnimationFrame(animate); this.time += 0.02; this.draw(); }; animate(); }
    draw() { if (!this.ctx || !this.canvas) return; const ctx = this.ctx, width = this.canvas.width, height = this.canvas.height, padding = 50; if (width === 0 || height === 0) return; ctx.fillStyle = '#050505'; ctx.fillRect(0, 0, width, height); this.drawGrid(ctx, width, height, padding); this.drawAxes(ctx, width, height, padding); this.drawFoldCurve(ctx, width, height, padding); if (this.param < 0) this.drawCriticalPoints(ctx, width, height, padding); this.drawBifurcationIndicator(ctx, width, height); this.drawAnimatedParticle(ctx, width, height, padding); }
    drawGrid(ctx, width, height, padding) { ctx.strokeStyle = 'rgba(255, 69, 0, 0.08)'; ctx.lineWidth = 1; for (let x = padding; x < width - padding; x += 50) { ctx.beginPath(); ctx.moveTo(x, padding); ctx.lineTo(x, height - padding); ctx.stroke(); } for (let y = padding; y < height - padding; y += 50) { ctx.beginPath(); ctx.moveTo(padding, y); ctx.lineTo(width - padding, y); ctx.stroke(); } }
    drawAxes(ctx, width, height, padding) { const centerX = width / 2, centerY = height / 2; ctx.strokeStyle = 'rgba(255, 215, 0, 0.4)'; ctx.lineWidth = 2; ctx.beginPath(); ctx.moveTo(padding, centerY); ctx.lineTo(width - padding, centerY); ctx.stroke(); ctx.beginPath(); ctx.moveTo(centerX, padding); ctx.lineTo(centerX, height - padding); ctx.stroke(); ctx.fillStyle = 'rgba(255, 215, 0, 0.4)'; ctx.beginPath(); ctx.moveTo(width - padding, centerY); ctx.lineTo(width - padding - 10, centerY - 5); ctx.lineTo(width - padding - 10, centerY + 5); ctx.fill(); ctx.beginPath(); ctx.moveTo(centerX, padding); ctx.lineTo(centerX - 5, padding + 10); ctx.lineTo(centerX + 5, padding + 10); ctx.fill(); ctx.fillStyle = CONFIG.COLORS.GOLD; ctx.font = 'bold 14px "Space Mono", monospace'; ctx.fillText('x', width - padding - 15, centerY - 12); ctx.fillText('f(x)', centerX + 12, padding + 18); }
    drawFoldCurve(ctx, width, height, padding) { const centerX = width / 2, centerY = height / 2, scaleX = (width - 2 * padding) / 4, scaleY = (height - 2 * padding) / 6; ctx.shadowBlur = 20; ctx.shadowColor = CONFIG.COLORS.FLAME; ctx.beginPath(); ctx.strokeStyle = CONFIG.COLORS.FLAME; ctx.lineWidth = 3; let started = false; for (let px = padding; px < width - padding; px++) { const x = (px - centerX) / scaleX, y = this.f(x, this.param), py = centerY - y * scaleY; if (py > padding && py < height - padding) { if (!started) { ctx.moveTo(px, py); started = true; } else ctx.lineTo(px, py); } } ctx.stroke(); ctx.shadowBlur = 0; }
    drawCriticalPoints(ctx, width, height, padding) { const centerX = width / 2, centerY = height / 2, scaleX = (width - 2 * padding) / 4, scaleY = (height - 2 * padding) / 6; const critX = Math.sqrt(-this.param / 3); [critX, -critX].forEach((x, i) => { const y = this.f(x, this.param), px = centerX + x * scaleX, py = centerY - y * scaleY; const pulse = 1 + 0.25 * Math.sin(this.time * 4 + i * Math.PI); const gradient = ctx.createRadialGradient(px, py, 0, px, py, 25 * pulse); gradient.addColorStop(0, i === 0 ? 'rgba(255, 215, 0, 0.6)' : 'rgba(0, 255, 255, 0.6)'); gradient.addColorStop(1, 'transparent'); ctx.beginPath(); ctx.arc(px, py, 25 * pulse, 0, Math.PI * 2); ctx.fillStyle = gradient; ctx.fill(); ctx.beginPath(); ctx.arc(px, py, 8 * pulse, 0, Math.PI * 2); ctx.fillStyle = i === 0 ? CONFIG.COLORS.GOLD : CONFIG.COLORS.ELECTRIC; ctx.fill(); ctx.fillStyle = '#FFFFFF'; ctx.font = '11px "Space Mono", monospace'; ctx.fillText(i === 0 ? 'min' : 'max', px + 15, py + 4); }); }
    drawBifurcationIndicator(ctx, width, height) { const atBifurcation = Math.abs(this.param) < 0.1; const status = this.param < -0.1 ? 'TWO STABLE STATES' : (atBifurcation ? '‚ö° BIFURCATION ‚ö°' : 'ONE STABLE STATE'); const color = atBifurcation ? CONFIG.COLORS.WHITE_HOT : (this.param < 0 ? CONFIG.COLORS.GOLD : CONFIG.COLORS.FLAME); ctx.fillStyle = color; ctx.font = 'bold 14px "Bebas Neue", sans-serif'; ctx.textAlign = 'right'; if (atBifurcation) { ctx.shadowBlur = 15; ctx.shadowColor = CONFIG.COLORS.WHITE_HOT; } ctx.fillText(status, width - 25, height - 25); ctx.textAlign = 'left'; ctx.shadowBlur = 0; if (atBifurcation) { const flash = Math.abs(Math.sin(this.time * 8)) * 0.15; ctx.fillStyle = `rgba(255, 250, 240, ${flash})`; ctx.fillRect(0, 0, width, height); } }
    drawAnimatedParticle(ctx, width, height, padding) { const centerX = width / 2, centerY = height / 2, scaleX = (width - 2 * padding) / 4, scaleY = (height - 2 * padding) / 6; const x = 1.8 * Math.sin(this.time * 0.4), y = this.f(x, this.param), px = centerX + x * scaleX, py = centerY - y * scaleY; for (let i = 1; i < 12; i++) { const trailX = 1.8 * Math.sin((this.time - i * 0.04) * 0.4), trailY = this.f(trailX, this.param), tpx = centerX + trailX * scaleX, tpy = centerY - trailY * scaleY; const alpha = 0.5 * (1 - i / 12); ctx.beginPath(); ctx.arc(tpx, tpy, 4 * (1 - i / 12), 0, Math.PI * 2); ctx.fillStyle = `rgba(255, 0, 255, ${alpha})`; ctx.fill(); } ctx.shadowBlur = 20; ctx.shadowColor = CONFIG.COLORS.PLASMA; ctx.beginPath(); ctx.arc(px, py, 7, 0, Math.PI * 2); ctx.fillStyle = CONFIG.COLORS.PLASMA; ctx.fill(); ctx.shadowBlur = 0; }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// OVERFLOW ROOM
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class OverflowRoom {
    constructor(sound) { this.sound = sound; this.canvas = document.getElementById('generator-canvas'); this.ctx = this.canvas?.getContext('2d'); this.sparks = []; this.animationId = null; this.isVisible = false; this.init(); }
    init() { this.resizeCanvas(); window.addEventListener('resize', () => this.resizeCanvas()); const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { this.isVisible = entry.isIntersecting; }); }, { threshold: 0.2 }); observer.observe(document.getElementById('room-overflow')); if (this.canvas) { this.canvas.addEventListener('click', (e) => { const rect = this.canvas.getBoundingClientRect(); this.spawnSparkBurst(e.clientX - rect.left, e.clientY - rect.top); }); this.canvas.addEventListener('mousemove', (e) => { if (Math.random() < 0.4) { const rect = this.canvas.getBoundingClientRect(); this.spawnSpark(e.clientX - rect.left, e.clientY - rect.top, 0.4); } }); } this.startAnimation(); }
    resizeCanvas() { if (this.canvas) { this.canvas.width = Math.max(this.canvas.parentElement?.clientWidth || 800, 400); this.canvas.height = 300; } }
    spawnSparkBurst(x, y) { const count = 30 + Math.random() * 25; for (let i = 0; i < count; i++) { const angle = (Math.PI * 2 * i) / count + (Math.random() - 0.5) * 0.4, speed = 3 + Math.random() * 10; this.sparks.push({ x, y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, radius: 2 + Math.random() * 5, color: this.getRandomColor(), life: 1200 + Math.random() * 800, maxLife: 2000, gravity: 0.06 + Math.random() * 0.08 }); } if (this.sound?.initialized) this.sound.playSpawn(); }
    spawnSpark(x, y, scale = 1) { this.sparks.push({ x, y, vx: (Math.random() - 0.5) * 5 * scale, vy: -Math.random() * 4 * scale - 1, radius: (1.5 + Math.random() * 2.5) * scale, color: this.getRandomColor(), life: 700 * scale, maxLife: 700 * scale, gravity: 0.03 }); }
    getRandomColor() { return [CONFIG.COLORS.FLAME, CONFIG.COLORS.EMBER, CONFIG.COLORS.GOLD, CONFIG.COLORS.YELLOW, CONFIG.COLORS.WHITE_HOT, CONFIG.COLORS.ELECTRIC, CONFIG.COLORS.PLASMA][Math.floor(Math.random() * 7)]; }
    startAnimation() { const animate = () => { this.animationId = requestAnimationFrame(animate); if (!this.ctx || !this.canvas) return; const ctx = this.ctx, width = this.canvas.width, height = this.canvas.height; if (width === 0 || height === 0) return; ctx.fillStyle = 'rgba(5, 5, 5, 0.18)'; ctx.fillRect(0, 0, width, height); this.drawBorderGlow(ctx, width, height); for (let i = this.sparks.length - 1; i >= 0; i--) { const s = this.sparks[i]; s.x += s.vx; s.y += s.vy; s.vy += s.gravity; s.vx *= 0.99; s.life -= 16; if (s.life <= 0 || s.y > height + 20) { this.sparks.splice(i, 1); continue; } if (s.x < 0 || s.x > width) { s.vx *= -0.7; s.x = Math.max(0, Math.min(width, s.x)); } const alpha = Math.pow(s.life / s.maxLife, 0.6), radius = s.radius * alpha; const gradient = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, radius * 4); gradient.addColorStop(0, hexToRgba(s.color, alpha * 0.7)); gradient.addColorStop(0.5, hexToRgba(s.color, alpha * 0.2)); gradient.addColorStop(1, 'transparent'); ctx.beginPath(); ctx.arc(s.x, s.y, radius * 4, 0, Math.PI * 2); ctx.fillStyle = gradient; ctx.fill(); ctx.beginPath(); ctx.arc(s.x, s.y, radius, 0, Math.PI * 2); ctx.fillStyle = hexToRgba(s.color, alpha); ctx.fill(); } if (this.isVisible && Math.random() < 0.08) { const x = Math.random() * width, y = height + 10; this.sparks.push({ x, y, vx: (Math.random() - 0.5) * 2, vy: -Math.random() * 6 - 3, radius: 1 + Math.random() * 2, color: this.getRandomColor(), life: 800 + Math.random() * 400, maxLife: 1200, gravity: 0.01 }); } if (this.sparks.length < 5) { ctx.fillStyle = 'rgba(255, 215, 0, 0.25)'; ctx.font = '16px "Space Mono", monospace'; ctx.textAlign = 'center'; ctx.fillText('CLICK TO SPARK', width / 2, height / 2); ctx.fillText('üî•', width / 2, height / 2 + 30); ctx.textAlign = 'left'; } }; animate(); }
    drawBorderGlow(ctx, width, height) { const time = Date.now() / 1000, offset = (Math.sin(time) + 1) / 2; const gradient = ctx.createLinearGradient(0, 0, width, 0); gradient.addColorStop(0, `rgba(255, 69, 0, ${0.2 + offset * 0.2})`); gradient.addColorStop(0.5, `rgba(255, 215, 0, ${0.1 + offset * 0.1})`); gradient.addColorStop(1, `rgba(255, 69, 0, ${0.2 + offset * 0.2})`); ctx.strokeStyle = gradient; ctx.lineWidth = 2; const r = 15; ctx.beginPath(); ctx.moveTo(r, 0); ctx.lineTo(width - r, 0); ctx.quadraticCurveTo(width, 0, width, r); ctx.lineTo(width, height - r); ctx.quadraticCurveTo(width, height, width - r, height); ctx.lineTo(r, height); ctx.quadraticCurveTo(0, height, 0, height - r); ctx.lineTo(0, r); ctx.quadraticCurveTo(0, 0, r, 0); ctx.stroke(); }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MAIN CONTROLLER
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
class SparkGallery {
    constructor() { this.sound = new SparkSoundSystem(); this.rooms = {}; this.init(); }
    async init() {
        console.log('üî• SPARK GALLERY IGNITING...'); if (document.readyState === 'loading') await new Promise(resolve => document.addEventListener('DOMContentLoaded', resolve));
        this.initSound(); this.initRooms(); this.initNavigation(); this.initScrollEffects();
        console.log('üî• SPARK GALLERY READY');
    }
    initSound() { const soundToggle = document.getElementById('sound-toggle'), soundOnIcon = soundToggle?.querySelector('.sound-on'), soundOffIcon = soundToggle?.querySelector('.sound-off'); const initOnInteraction = async () => { if (!this.sound.initialized) { await this.sound.init(); document.removeEventListener('click', initOnInteraction); document.removeEventListener('touchstart', initOnInteraction); } }; document.addEventListener('click', initOnInteraction); document.addEventListener('touchstart', initOnInteraction); if (soundToggle) soundToggle.addEventListener('click', async (e) => { e.stopPropagation(); if (!this.sound.initialized) await this.sound.init(); this.sound.toggle(); if (soundOnIcon && soundOffIcon) { if (this.sound.enabled) { soundOnIcon.style.display = 'inline'; soundOffIcon.style.display = 'none'; } else { soundOnIcon.style.display = 'none'; soundOffIcon.style.display = 'inline'; } } }); }
    initRooms() { this.rooms.ignition = new IgnitionRoom(this.sound); this.rooms.storm = new StormRoom(this.sound); this.rooms.fold = new FoldRoom(this.sound); this.rooms.overflow = new OverflowRoom(this.sound); }
    initNavigation() { const navLinks = document.querySelectorAll('.nav-links a'); navLinks.forEach(link => { link.addEventListener('click', (e) => { e.preventDefault(); const target = document.querySelector(link.getAttribute('href')); if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' }); }); }); const sections = document.querySelectorAll('.room'); const navObserver = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { const id = entry.target.id; navLinks.forEach(link => { link.classList.remove('active'); if (link.getAttribute('href') === `#${id}`) link.classList.add('active'); }); } }); }, { root: null, rootMargin: '-40% 0px -60% 0px', threshold: 0 }); sections.forEach(section => navObserver.observe(section)); }
    initScrollEffects() { const scrollIndicator = document.querySelector('.scroll-indicator'); if (scrollIndicator) window.addEventListener('scroll', () => { scrollIndicator.style.opacity = Math.max(0, 1 - window.scrollY / 300); }); }
}

const gallery = new SparkGallery();
    </script>
</body>
</html>
