# Kagami Orb V3.1 - Bill of Materials (Single Source of Truth)
# Version: 3.1.0
# Date: 2026-01-11
# Status: VERIFIED DIMENSIONS

project: kagami-orb
version: "3.1.0"
revision: "B"

metadata:
  created: "2026-01-11"
  author: "Kagami"
  description: "85mm compact AI assistant orb with living eye display"
  status: "Verified dimensions"
  verification_source: "Manufacturer datasheets + web research"

# ============================================================
# VERIFIED DESIGN PARAMETERS
# ============================================================
specifications:
  # Sphere Geometry
  outer_diameter_mm: 85
  shell_thickness_mm: 7.5
  inner_diameter_mm: 70     # 85 - (2 × 7.5) = 70
  max_component_mm: 65      # With 2.5mm clearance each side
  
  # Display (VERIFIED: King Tech 1.39" AMOLED)
  display_module_height_mm: 38.83
  display_module_width_mm: 38.21
  display_module_thickness_mm: 0.68
  display_active_diameter_mm: 35.41
  display_resolution: "454x454"
  
  # Battery (VERIFIED: Fits 55×35×20mm max)
  battery_length_mm: 55
  battery_width_mm: 35
  battery_height_mm: 20
  battery_capacity_mah: 2200
  battery_energy_wh: 24
  
  # Maglev (VERIFIED: Stirlingkit 500g module)
  maglev_base_mm: 100      # 100×100mm square
  maglev_height_mm: 20
  levitation_gap_mm: 20    # 18-25mm range
  levitation_capacity_g: 500
  
  # Weight Budget
  orb_target_mass_g: 350
  orb_actual_mass_g: 391   # Exceeds target - optimize needed
  base_mass_g: 750

# ============================================================
# COMPONENTS (VERIFIED DIMENSIONS)
# ============================================================
components:
  # === COMPUTE MODULE ===
  - part_id: "QCS6490-SOM-001"
    designation: "U1"
    quantity: 1
    value: "Qualcomm QCS6490 SoM"
    description: "42.5×35.5×2.7mm - VERIFIED Thundercomm"
    package: "LGA SoM"
    supplier: "Thundercomm"
    supplier_part_number: "TurboX C6490"
    unit_cost: "$140"
    dimensions_mm: [42.5, 35.5, 2.7]
    mass_g: 25
    power_w: [5.0, 8.0, 12.0]  # idle, active, peak
    verified: true
    source_url: "https://www.thundercomm.com/product/c6490-som/"

  - part_id: "HAILO10H-001"
    designation: "U2"
    quantity: 1
    value: "Hailo-10H AI Accelerator"
    description: "22×42×2.63mm M.2 2242 - VERIFIED"
    package: "M.2 2242"
    supplier: "Hailo"
    supplier_part_number: "Hailo-10H"
    unit_cost: "$90"
    dimensions_mm: [42, 22, 2.63]
    mass_g: 8
    power_w: [0.5, 2.5, 5.0]
    verified: true
    source_url: "https://hailo.ai/products/generative-ai-accelerators/hailo-10h-m-2-generative-ai-acceleration-module/"

  - part_id: "ESP32S3-001"
    designation: "U3"
    quantity: 1
    value: "ESP32-S3-WROOM-1-N4"
    description: "25.5×18×3.1mm - Co-processor"
    package: "Module"
    supplier: "Espressif"
    unit_cost: "$3.34"
    dimensions_mm: [25.5, 18, 3.1]
    mass_g: 3
    verified: true

  # === DISPLAY SYSTEM ===
  - part_id: "AMOLED-139-001"
    designation: "DISP1"
    quantity: 1
    value: "1.39\" Round AMOLED 454×454"
    description: "38.83×38.21×0.68mm, Ø35.41mm active - VERIFIED King Tech"
    package: "FPC"
    supplier: "King Tech Display"
    supplier_part_number: "RM69330"
    unit_cost: "$45"
    dimensions_mm: [38.83, 38.21, 0.68]
    active_diameter_mm: 35.41
    mass_g: 8
    power_w: [0.3, 0.8, 1.2]
    verified: true
    source_url: "https://www.kingtechdisplay.com"

  # === CAMERA ===
  - part_id: "CAM-IMX989-001"
    designation: "CAM1"
    quantity: 1
    value: "Sony IMX989 Camera Module"
    description: "26×26×9.4mm AF module - VERIFIED SincereFirst"
    package: "FPC Module"
    supplier: "SincereFirst"
    unit_cost: "$95"
    dimensions_mm: [26, 26, 9.4]
    mass_g: 15
    power_w: [0.2, 0.5, 0.8]
    verified: true
    source_url: "https://www.cameramodule.com/fpc-camera-module/auto-focus-camera-module/50mp-sony-imx989-cmos-sensor-autofocus-fpc.html"

  # === AUDIO SUBSYSTEM ===
  - part_id: "MIC-SENSIBEL-001"
    designation: "MIC1-4"
    quantity: 4
    value: "sensiBel SBM100B Optical MEMS"
    description: "6.0×3.8×2.47mm - VERIFIED sensiBel"
    package: "SMD bottom-port"
    supplier: "sensiBel"
    unit_cost: "$30"
    dimensions_mm: [6.0, 3.8, 2.47]
    mass_g: 0.1
    verified: true
    source_url: "https://sensibel.com/product/"

  - part_id: "XMOS-XVF3800-001"
    designation: "U5"
    quantity: 1
    value: "XMOS XVF3800 Voice Processor"
    description: "7×7×0.9mm QFN-60 - VERIFIED"
    package: "QFN-60"
    supplier: "XMOS"
    unit_cost: "$99"
    dimensions_mm: [7, 7, 0.9]
    mass_g: 1
    verified: true
    source_url: "https://www.xmos.com/download/XVF3800-Device-Datasheet"

  - part_id: "SPK-28MM-001"
    designation: "SPK1"
    quantity: 1
    value: "28mm Full Range Speaker"
    description: "Ø28×5.4mm 8Ω 1W - VERIFIED"
    package: "28mm"
    supplier: "Yueda"
    unit_cost: "$5"
    dimensions_mm: [28, 28, 5.4]  # diameter, diameter, height
    mass_g: 5
    verified: true

  # === LED ASSEMBLY ===
  - part_id: "LED-HD108-001"
    designation: "LED1-16"
    quantity: 16
    value: "HD108 16-bit RGB LED"
    description: "5.1×5.0×1.6mm 5050 - VERIFIED Rose Lighting"
    package: "5050"
    supplier: "Rose Lighting"
    unit_cost: "$0.50"
    dimensions_mm: [5.1, 5.0, 1.6]
    mass_g: 0.05
    verified: true
    source_url: "https://www.rose-lighting.com/products/fastest-rgb-pixel-5050-hd108-led-chip-65536-gray-scale-updated-version-of-hd107s-apa102-apa102c-apa107/"

  # === POWER SYSTEM ===
  - part_id: "BAT-LIPO-2200-001"
    designation: "BAT1"
    quantity: 1
    value: "LiPo 3S 2200mAh"
    description: "55×35×20mm 24Wh - VERIFIED fits internal"
    package: "Custom"
    supplier: "AliExpress"
    unit_cost: "$22"
    dimensions_mm: [55, 35, 20]
    mass_g: 150
    capacity_mah: 2200
    voltage_v: 11.1
    energy_wh: 24
    verified: true
    note: "4000mAh (131mm) TOO LARGE - rejected"

  - part_id: "COIL-RX-70-001"
    designation: "L1"
    quantity: 1
    value: "RX Coil 70mm"
    description: "Ø70×4mm Litz wire 18 turns 85µH"
    package: "Custom"
    supplier: "Custom wind"
    unit_cost: "$20"
    dimensions_mm: [70, 70, 4]
    mass_g: 18
    verified: true

  # === MAGLEV BASE ===
  - part_id: "MAGLEV-STIRLING-500-001"
    designation: "MAG1"
    quantity: 1
    value: "Stirlingkit 500g Maglev Module"
    description: "100×100×20mm, 18-25mm gap - VERIFIED"
    package: "Module"
    supplier: "Stirlingkit"
    unit_cost: "$45"
    dimensions_mm: [100, 100, 20]
    levitation_gap_mm: [18, 25]  # range
    capacity_g: 500
    mass_g: 350
    verified: true
    source_url: "https://www.stirlingkit.com/products/500g-diy-magnetic-levitation-module"

# ============================================================
# PRICING SUMMARY
# ============================================================
pricing:
  prototype_qty1:
    compute: 233
    display: 45
    camera: 95
    audio: 244
    sensors: 78
    power: 62
    leds: 15
    enclosure: 50
    maglev: 45
    pcbs: 60
    orb_total: 927
    base_total: 185
    system_total: 1112
  volume_qty100:
    orb_total: 700
    base_total: 120
    system_total: 820

# ============================================================
# SAFETY CONSTRAINTS
# ============================================================
safety:
  cbf_constraint: "h(x) >= 0 always"
  thermal_limit_surface_c: 45
  thermal_limit_internal_c: 70
  battery_cutoff_c: 45
  maglev_warning: "Strong magnets - pacemaker hazard"
