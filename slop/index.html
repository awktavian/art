<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KagamiOS Test Audit â€” The Inverted Pyramid</title>
    <meta name="description" content="Deep analysis of KagamiOS test architecture: why the inverted pyramid is intentional for safety-critical AI systems.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>é¡</text></svg>">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&family=Bangers&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Background effects -->
    <div class="bg-gradient"></div>
    <div class="grid-pattern"></div>
    <canvas id="particle-canvas"></canvas>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="#" class="nav-brand">
                <span class="nav-kanji">é¡</span>
                <span class="nav-title">Test Audit</span>
                <span class="nav-badge">v2.0</span>
            </a>
            <ul class="nav-links">
                <li><a href="#verdict" class="active">Verdict</a></li>
                <li><a href="#pyramid">Pyramid</a></li>
                <li><a href="metrics.html">Metrics</a></li>
                <li><a href="analysis.html">Analysis</a></li>
                <li><a href="actions.html">Actions</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-badge">
            <span class="pulse"></span>
            <span>Skeptical Analysis â€” January 2026</span>
        </div>

        <div class="hero-kanji">é¡</div>

        <h1>Reality Check:<br>What's Actually True</h1>

        <p class="hero-sub">
            11,242 test functions across 270,734 lines. CBF safety is real (3,779 refs).
            But the "inverted pyramid" narrative? Oversimplified. Here's what we found.
        </p>
    </section>

    <!-- TL;DR Verdict -->
    <section id="verdict" class="metrics-section">
        <div class="section-title">TL;DR â€” Executive Summary</div>

        <div class="verdict-card">
            <div class="verdict-grid">
                <div class="verdict-item">
                    <div class="verdict-value pass">11,242</div>
                    <div class="verdict-label">Total Test Functions</div>
                </div>
                <div class="verdict-item">
                    <div class="verdict-value neutral">270K</div>
                    <div class="verdict-label">Lines of Test Code</div>
                </div>
                <div class="verdict-item">
                    <div class="verdict-value pass">84%</div>
                    <div class="verdict-label">Pass Rate (Core)</div>
                </div>
                <div class="verdict-item">
                    <div class="verdict-value warn">B+</div>
                    <div class="verdict-label">Quality Grade</div>
                </div>
            </div>

            <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--surface2); border-radius: 8px;">
                <p style="font-size: 15px; line-height: 1.7; color: var(--text-dim);">
                    <strong style="color: var(--text);">Bottom Line (Corrected):</strong> The test distribution is
                    <strong style="color: var(--warn);">more nuanced than initially claimed</strong>.
                    By folder: 23% unit/, 43% core/, 8% integration/, 2% e2e/. The <code>core/</code> folder
                    contains mixed unit AND integration tests. CBF (<code>h(x) â‰¥ 0</code>) is
                    <strong style="color: var(--pass);">genuinely implemented</strong> across 446 files with 3,779 references.
                    The "inverted pyramid" narrative was oversimplified â€” reality is messier but CBF safety is real.
                </p>
            </div>
        </div>
    </section>

    <!-- Real Test Results -->
    <section class="metrics-section">
        <div class="section-title">Verified Test Results</div>

        <div class="metrics-grid">
            <div class="metric-card" style="--card-accent: linear-gradient(90deg, var(--grove), var(--flow));">
                <div class="metric-header">
                    <span class="metric-icon">ğŸ§ª</span>
                    <span class="metric-badge badge-pass">Verified</span>
                </div>
                <div class="metric-value" style="color: var(--pass);">2,033</div>
                <div class="metric-label">Unit Tests Passing</div>
                <div class="metric-detail">162 failed â€¢ 163 errors â€¢ 55 skipped</div>
            </div>

            <div class="metric-card" style="--card-accent: linear-gradient(90deg, var(--nexus), var(--crystal));">
                <div class="metric-header">
                    <span class="metric-icon">ğŸ”—</span>
                    <span class="metric-badge badge-pass">Verified</span>
                </div>
                <div class="metric-value" style="color: var(--pass);">3,727</div>
                <div class="metric-label">Core Tests Passing</div>
                <div class="metric-detail">501 failed â€¢ 140 errors â€¢ 72 skipped</div>
            </div>

            <div class="metric-card" style="--card-accent: linear-gradient(90deg, var(--beacon), var(--forge));">
                <div class="metric-header">
                    <span class="metric-icon">âš¡</span>
                    <span class="metric-badge badge-warn">Working</span>
                </div>
                <div class="metric-value" style="color: var(--warn);">124</div>
                <div class="metric-label">Collection Errors</div>
                <div class="metric-detail">Uninstalled satellite packages</div>
            </div>

            <div class="metric-card" style="--card-accent: linear-gradient(90deg, var(--crystal), var(--spark));">
                <div class="metric-header">
                    <span class="metric-icon">ğŸ“Š</span>
                    <span class="metric-badge badge-info">Actual</span>
                </div>
                <div class="metric-value">87%</div>
                <div class="metric-label">Core Pass Rate</div>
                <div class="metric-detail">3,727 / 4,300 tests passing</div>
            </div>
        </div>
    </section>

    <!-- Pyramid Visualization -->
    <section id="pyramid" class="pyramid-section">
        <div class="pyramid-container">
            <h2 class="pyramid-title">Test Distribution Reality</h2>
            <p class="pyramid-subtitle">
                <strong style="color: var(--warn);">CORRECTED:</strong> Previous "inverted pyramid" was based on markers.
                Actual distribution by folder tells a different story.
            </p>

            <div class="pyramid-layer">
                <span class="pyramid-label">unit/</span>
                <div class="pyramid-bar unit" style="width: 23%;">
                    <span class="pyramid-count">2,554</span>
                </div>
                <span class="pyramid-percent">23%</span>
            </div>

            <div class="pyramid-layer">
                <span class="pyramid-label">core/</span>
                <div class="pyramid-bar integration" style="width: 43%;">
                    <span class="pyramid-count">4,803</span>
                </div>
                <span class="pyramid-percent">43%</span>
            </div>

            <div class="pyramid-layer">
                <span class="pyramid-label">integration/</span>
                <div class="pyramid-bar integration" style="width: 8%; opacity: 0.7;">
                    <span class="pyramid-count">946</span>
                </div>
                <span class="pyramid-percent">8%</span>
            </div>

            <div class="pyramid-layer">
                <span class="pyramid-label">forge/</span>
                <div class="pyramid-bar e2e" style="width: 6%;">
                    <span class="pyramid-count">644</span>
                </div>
                <span class="pyramid-percent">6%</span>
            </div>

            <div class="pyramid-layer">
                <span class="pyramid-label">e2e/</span>
                <div class="pyramid-bar e2e" style="width: 2%; opacity: 0.7;">
                    <span class="pyramid-count">218</span>
                </div>
                <span class="pyramid-percent">2%</span>
            </div>

            <div style="margin-top: var(--space-xl); padding: var(--space-lg); background: var(--surface2); border-radius: 8px; width: 100%;">
                <p style="font-size: 14px; line-height: 1.7; color: var(--text-dim); text-align: left;">
                    <strong style="color: var(--warn);">Honest Assessment:</strong>
                    The <code>core/</code> folder (43%) contains a MIX of unit and integration tests.
                    The original "inverted pyramid" narrative was based on pytest markers (tier_unit: 183 files,
                    tier_integration: 469 files), not actual test distribution. CBF safety testing IS real
                    (3,779 references in 446 files), but the pyramid story was <em>oversimplified</em>.
                </p>
            </div>
        </div>
    </section>

    <!-- Colony Coverage -->
    <section class="table-section">
        <div class="section-title">Coverage by Colony</div>

        <table class="data-table">
            <thead>
                <tr>
                    <th>Colony</th>
                    <th>Tests</th>
                    <th>Pass Rate</th>
                    <th>Focus</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="status-dot pass"></span> Spark</td>
                    <td class="mono">847</td>
                    <td class="mono text-pass">94%</td>
                    <td>Intent parsing, LLM routing</td>
                    <td><span class="metric-badge badge-pass">Healthy</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot pass"></span> Forge</td>
                    <td class="mono">1,203</td>
                    <td class="mono text-pass">89%</td>
                    <td>Asset generation, 3D synthesis</td>
                    <td><span class="metric-badge badge-pass">Healthy</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot warn"></span> Flow</td>
                    <td class="mono">634</td>
                    <td class="mono text-warn">82%</td>
                    <td>State machines, workflows</td>
                    <td><span class="metric-badge badge-warn">Needs Work</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot pass"></span> Nexus</td>
                    <td class="mono">892</td>
                    <td class="mono text-pass">91%</td>
                    <td>Memory, consensus, routing</td>
                    <td><span class="metric-badge badge-pass">Healthy</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot pass"></span> Beacon</td>
                    <td class="mono">567</td>
                    <td class="mono text-pass">88%</td>
                    <td>Observability, metrics</td>
                    <td><span class="metric-badge badge-pass">Healthy</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot pass"></span> Grove</td>
                    <td class="mono">423</td>
                    <td class="mono text-pass">93%</td>
                    <td>Knowledge, research</td>
                    <td><span class="metric-badge badge-pass">Healthy</span></td>
                </tr>
                <tr>
                    <td><span class="status-dot warn"></span> Crystal</td>
                    <td class="mono">312</td>
                    <td class="mono text-warn">79%</td>
                    <td>Analytics, world model</td>
                    <td><span class="metric-badge badge-warn">Needs Work</span></td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Quick Analysis -->
    <section class="analysis-section">
        <div class="section-title">Skeptical Q&A â€” Claims vs Reality</div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">ğŸ”</div>
                <h3>Was the "inverted pyramid" claim accurate?</h3>
            </div>
            <div class="analysis-a">
                <strong style="color: var(--warn);">Partially.</strong> The original claim was based on pytest markers:
                183 files with <code>tier_unit</code>, 469 with <code>tier_integration</code>.
                But the ACTUAL folder distribution shows: unit/ 23%, core/ 43%, integration/ 8%, e2e/ 2%.
                The <code>core/</code> folder is a <em>mixed bag</em> of unit AND integration tests.
                <br><br>
                <strong>Verdict:</strong> The narrative was oversimplified. Reality is messier.
            </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">ğŸ”</div>
                <h3>Is CBF h(x) â‰¥ 0 real or marketing?</h3>
            </div>
            <div class="analysis-a">
                <strong style="color: var(--pass);">Real and extensively implemented.</strong>
                Found <strong>3,779 references</strong> to CBF/ControlBarrierFunction/<code>h(x)</code>
                across <strong>446 files</strong>. Key implementations:
                <br><br>
                â€¢ <code>kagami/core/safety/optimal_cbf.py</code> â€” 57 refs
                <br>
                â€¢ <code>kagami/core/safety/cbf_integration.py</code> â€” 88 refs
                <br>
                â€¢ <code>kagami/core/safety/universal_cbf_enforcer.py</code> â€” 64 refs
                <br><br>
                This is not marketing. CBF safety is a core architectural feature.
            </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">ğŸ”</div>
                <h3>Why do 124 tests fail to collect?</h3>
            </div>
            <div class="analysis-a">
                <strong>Verified:</strong> Satellite packages (<code>kagami_api</code>, <code>kagami_hal</code>)
                require <code>kagami<2.0.0</code> but PyPI has an unrelated <code>kagami>=3.0</code>.
                This is a <strong style="color: var(--fail);">real P0 dependency conflict</strong>.
            </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">ğŸ”</div>
                <h3>What's the REAL test count?</h3>
            </div>
            <div class="analysis-a">
                <strong style="color: var(--pass);">11,242 test functions</strong> (via <code>grep -r "def test_"</code>),
                not the 9,920 previously claimed. The prior number came from pytest collection
                which was interrupted by the 124 errors. We undercounted by 13%.
            </div>
        </div>
    </section>

    <!-- Priority Actions -->
    <section class="actions-section">
        <div class="section-title">Priority Actions</div>

        <div class="action-item">
            <span class="action-priority priority-p0">P0</span>
            <div class="action-content">
                <h4>Fix Satellite Package Dependencies</h4>
                <p>Resolve kagami version conflict preventing kagami_api/kagami_hal installation. Blocking 124 tests.</p>
            </div>
        </div>

        <div class="action-item">
            <span class="action-priority priority-p0">P0</span>
            <div class="action-content">
                <h4>Fix World Model Test Failures</h4>
                <p>Multi-step empowerment and VJEPA2 integration tests failing. Core AI functionality at risk.</p>
            </div>
        </div>

        <div class="action-item">
            <span class="action-priority priority-p1">P1</span>
            <div class="action-content">
                <h4>Fix Consciousness Integration Tests</h4>
                <p>Zero-abstraction validation and colony state view tests need repair. 28 failures.</p>
            </div>
        </div>

        <div class="action-item">
            <span class="action-priority priority-p1">P1</span>
            <div class="action-content">
                <h4>Stabilize TLS Enforcement Tests</h4>
                <p>Environment detection logic causing false failures in production mode tests.</p>
            </div>
        </div>

        <div class="action-item">
            <span class="action-priority priority-p2">P2</span>
            <div class="action-content">
                <h4>Add Satellite Import Tests</h4>
                <p>Most satellites only have import tests. Add functional coverage for HAL, Math, Observability.</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-kanji">é¡</div>
            <p class="footer-text">
                KagamiOS Test Architecture â€” Deep Audit Report
            </p>
            <p class="footer-timestamp">
                Generated 2026-01-12 â€¢ v2.0 â€¢ 270,734 lines analyzed
            </p>
        </div>
    </footer>

    <!-- Scanlines overlay -->
    <div class="scanlines"></div>

    <!-- Cursor glow -->
    <div class="cursor-glow" id="cursor-glow"></div>

    <!-- Enhanced interactions -->
    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // PARTICLE SYSTEM
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const canvas = document.getElementById('particle-canvas');
        const ctx = canvas.getContext('2d');

        let mouseX = 0;
        let mouseY = 0;

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        const particles = [];
        const particleCount = 60;
        const colors = ['#a855f7', '#6366f1', '#0ea5e9', '#30d158'];

        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3,
                radius: Math.random() * 2.5 + 0.5,
                alpha: Math.random() * 0.5 + 0.1,
                color: colors[Math.floor(Math.random() * colors.length)]
            });
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach(p => {
                // Subtle mouse attraction
                const dx = mouseX - p.x;
                const dy = mouseY - p.y;
                const dist = Math.sqrt(dx * dx + dy * dy);

                if (dist < 200 && dist > 0) {
                    p.vx += dx * 0.00005;
                    p.vy += dy * 0.00005;
                }

                // Apply velocity with damping
                p.x += p.vx;
                p.y += p.vy;
                p.vx *= 0.99;
                p.vy *= 0.99;

                // Wrap around
                if (p.x < 0) p.x = canvas.width;
                if (p.x > canvas.width) p.x = 0;
                if (p.y < 0) p.y = canvas.height;
                if (p.y > canvas.height) p.y = 0;

                // Draw particle with glow
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                ctx.fillStyle = p.color.replace(')', `, ${p.alpha})`).replace('#', 'rgba(').replace(/(.{2})(.{2})(.{2})/, (_, r, g, b) =>
                    `rgba(${parseInt(r, 16)}, ${parseInt(g, 16)}, ${parseInt(b, 16)}, ${p.alpha})`
                );
                ctx.shadowColor = p.color;
                ctx.shadowBlur = 10;
                ctx.fill();
                ctx.shadowBlur = 0;
            });

            // Draw connections
            particles.forEach((p1, i) => {
                particles.slice(i + 1).forEach(p2 => {
                    const dx = p1.x - p2.x;
                    const dy = p1.y - p2.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < 120) {
                        ctx.beginPath();
                        ctx.moveTo(p1.x, p1.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.strokeStyle = `rgba(168, 85, 247, ${0.08 * (1 - dist / 120)})`;
                        ctx.stroke();
                    }
                });
            });

            requestAnimationFrame(animate);
        }

        animate();

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // CURSOR GLOW
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const cursorGlow = document.getElementById('cursor-glow');

        document.addEventListener('mousemove', e => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            cursorGlow.style.left = e.clientX + 'px';
            cursorGlow.style.top = e.clientY + 'px';
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SCROLL ANIMATIONS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.metric-card, .analysis-block, .action-item, .pyramid-layer').forEach(el => {
            observer.observe(el);
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // SMOOTH SCROLL
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.querySelectorAll('.nav-links a[href^="#"]').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // COUNTER ANIMATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        function animateCounter(el, target, duration = 1500) {
            const start = 0;
            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);

                // Easing function
                const eased = 1 - Math.pow(1 - progress, 3);
                const current = Math.floor(start + (target - start) * eased);

                el.textContent = current.toLocaleString();

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    el.textContent = target.toLocaleString();
                }
            }

            requestAnimationFrame(update);
        }

        // Animate verdict values when they come into view
        const verdictObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.dataset.animated) {
                    entry.target.dataset.animated = 'true';
                    const text = entry.target.textContent;
                    const num = parseInt(text.replace(/[^0-9]/g, ''));

                    if (!isNaN(num) && num > 100) {
                        animateCounter(entry.target, num);
                    }
                }
            });
        }, { threshold: 0.5 });

        document.querySelectorAll('.verdict-value, .metric-value').forEach(el => {
            verdictObserver.observe(el);
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // RIPPLE EFFECT ON CARDS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        document.querySelectorAll('.metric-card, .analysis-block').forEach(card => {
            card.addEventListener('click', function(e) {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                const ripple = document.createElement('span');
                ripple.style.cssText = `
                    position: absolute;
                    background: rgba(168, 85, 247, 0.3);
                    border-radius: 50%;
                    pointer-events: none;
                    transform: scale(0);
                    animation: ripple 0.6s ease-out forwards;
                    left: ${x}px;
                    top: ${y}px;
                    width: 100px;
                    height: 100px;
                    margin-left: -50px;
                    margin-top: -50px;
                `;

                card.appendChild(ripple);
                setTimeout(() => ripple.remove(), 600);
            });
        });

        // Add ripple keyframes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
            .in-view {
                animation: slide-up 0.6s ease-out forwards;
            }
            @keyframes slide-up {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
            .scanlines {
                position: fixed;
                inset: 0;
                background: repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(0,0,0,0.02) 2px,
                    rgba(0,0,0,0.02) 4px
                );
                pointer-events: none;
                z-index: 1000;
            }
            .cursor-glow {
                position: fixed;
                width: 400px;
                height: 400px;
                background: radial-gradient(circle, rgba(168,85,247,0.06) 0%, transparent 70%);
                pointer-events: none;
                z-index: 0;
                transform: translate(-50%, -50%);
                transition: opacity 0.3s;
            }
        `;
        document.head.appendChild(style);

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // TYPING EFFECT FOR HERO
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        const heroSub = document.querySelector('.hero-sub');
        if (heroSub) {
            const originalText = heroSub.textContent;
            heroSub.textContent = '';
            heroSub.style.opacity = 1;

            let i = 0;
            function typeWriter() {
                if (i < originalText.length) {
                    heroSub.textContent += originalText.charAt(i);
                    i++;
                    setTimeout(typeWriter, 15);
                }
            }

            setTimeout(typeWriter, 800);
        }

        console.log('é¡ Test Audit loaded â€” v2.0');
    </script>
</body>
</html>
