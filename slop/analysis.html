<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis — KagamiOS Test Audit</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>鏡</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;600&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="bg-gradient"></div>
    <div class="grid-pattern"></div>

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="index.html" class="nav-brand">
                <span class="nav-kanji">鏡</span>
                <span class="nav-title">Test Audit</span>
                <span class="nav-badge">v2.0</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Overview</a></li>
                <li><a href="index.html#pyramid">Pyramid</a></li>
                <li><a href="metrics.html">Metrics</a></li>
                <li><a href="analysis.html" class="active">Analysis</a></li>
                <li><a href="actions.html">Actions</a></li>
            </ul>
        </div>
    </nav>

    <!-- Header -->
    <section class="hero" style="min-height: 40vh; padding-top: 140px;">
        <h1>Analysis</h1>
        <p class="hero-sub">Architecture decisions explained</p>
    </section>

    <!-- Why -->
    <section class="analysis-section">
        <div class="section-header">
            <span class="section-number">01</span>
            <div class="section-title">Why Integration-Heavy?</div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">?</div>
                <h3>Is the "inverted pyramid" a problem?</h3>
            </div>
            <div class="analysis-a">
                <strong>No — it's deliberate.</strong> KagamiOS differs from CRUD apps:
                <br><br>
                <strong>1. CBF spans components</strong> — <code>h(x) ≥ 0</code> must hold across Spark → Forge → Flow → Nexus.
                <br>
                <strong>2. 7-Colony architecture</strong> — Interesting behaviors emerge at boundaries.
                <br>
                <strong>3. ML systems are different</strong> — Model behavior is emergent, not unit-testable.
            </div>
        </div>
    </section>

    <!-- Architecture -->
    <section class="analysis-section">
        <div class="section-header">
            <span class="section-number">02</span>
            <div class="section-title">7-Colony Architecture</div>
        </div>

        <div class="analysis-block">
            <div class="analysis-a">
                <strong style="color: var(--spark);">Spark</strong> — Intent parsing
                <br>
                <strong style="color: var(--forge);">Forge</strong> — Asset generation
                <br>
                <strong style="color: var(--flow);">Flow</strong> — Workflows
                <br>
                <strong style="color: var(--nexus);">Nexus</strong> — Memory & routing
                <br>
                <strong style="color: var(--beacon);">Beacon</strong> — Observability
                <br>
                <strong style="color: var(--grove);">Grove</strong> — Knowledge
                <br>
                <strong style="color: var(--crystal);">Crystal</strong> — World model
                <br><br>
                Colonies communicate via <strong>Fano plane routing</strong>: any two share exactly one path.
            </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">h</div>
                <h3>CBF: h(x) ≥ 0</h3>
            </div>
            <div class="analysis-a">
                Control Barrier Function ensures safety:
                <br>
                • <code>h(x) > 0</code> = safe
                <br>
                • <code>h(x) = 0</code> = boundary
                <br>
                • <code>h(x) < 0</code> = forbidden
            </div>
        </div>
    </section>

    <!-- Quality -->
    <section class="analysis-section">
        <div class="section-header">
            <span class="section-number">03</span>
            <div class="section-title">Quality</div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">✓</div>
                <h3>Working Well</h3>
            </div>
            <div class="analysis-a">
                • Property-based testing (190+ Hypothesis tests)
                <br>
                • Contract testing (Syrupy snapshots)
                <br>
                • Chaos engineering (79 failure scenario tests)
                <br>
                • CBF safety explicitly tested
            </div>
        </div>

        <div class="analysis-block">
            <div class="analysis-q">
                <div class="analysis-q-icon">!</div>
                <h3>Needs Work</h3>
            </div>
            <div class="analysis-a">
                • Satellite coverage (import-only tests)
                <br>
                • Dependency conflict (124 tests blocked)
                <br>
                • World model stability (87 failures)
                <br>
                • Contract drift (37 snapshots)
            </div>
        </div>
    </section>

    <!-- Grades -->
    <section class="table-section">
        <div class="section-header">
            <span class="section-number">04</span>
            <div class="section-title">Grade: B+</div>
        </div>

        <table class="data-table">
            <thead>
                <tr>
                    <th>Area</th>
                    <th>Grade</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Coverage</td>
                    <td class="mono text-pass">A</td>
                </tr>
                <tr>
                    <td>CBF Safety</td>
                    <td class="mono text-pass">A</td>
                </tr>
                <tr>
                    <td>Chaos Testing</td>
                    <td class="mono text-pass">A</td>
                </tr>
                <tr>
                    <td>Property Testing</td>
                    <td class="mono text-warn">B+</td>
                </tr>
                <tr>
                    <td>Contract Testing</td>
                    <td class="mono text-warn">B-</td>
                </tr>
                <tr>
                    <td>Satellites</td>
                    <td class="mono text-fail">C</td>
                </tr>
                <tr>
                    <td>Dependencies</td>
                    <td class="mono text-fail">D</td>
                </tr>
            </tbody>
        </table>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-kanji">鏡</div>
            <p class="footer-timestamp">2026-01-12</p>
        </div>
    </footer>
</body>
</html>
