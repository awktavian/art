<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Exceptional Hierarchy ‚Äî A Physicist's Guide</title>
    <meta name="description" content="Understanding the exceptional Lie algebras from E8 to G2, explained for someone with undergraduate physics">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --void: #0A0A0C;
            --light: #FAFAF8;
            --gold: #D4AF37;
            --dim: rgba(250, 250, 248, 0.6);
            --spark: #FF6B35;
            --forge: #4ECDC4;
            --flow: #45B7D1;
            --nexus: #96CEB4;
            --beacon: #FFEAA7;
            --grove: #DDA0DD;
            --crystal: #98D8C8;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Cormorant Garamond', Georgia, serif;
            background: var(--void);
            color: var(--light);
            line-height: 1.9;
            cursor: none;
            overflow-x: hidden;
        }
        
        /* Cursor */
        .cursor {
            width: 24px; height: 24px;
            border: 1px solid var(--gold);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: difference;
            transition: transform 0.15s ease;
        }
        .cursor-dot {
            width: 4px; height: 4px;
            background: var(--gold);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 10001;
        }
        
        /* Film grain */
        .grain {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 9999;
            opacity: 0.02;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
        }
        
        /* Progress */
        .progress-bar {
            position: fixed;
            top: 0; left: 0;
            width: 0%; height: 2px;
            background: var(--gold);
            z-index: 1000;
        }
        
        /* Sections */
        section {
            min-height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .section-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
        }
        
        .section-content {
            position: relative;
            z-index: 1;
            max-width: 720px;
            padding: 5rem 2rem;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1s ease, transform 1s ease;
        }
        
        .section-content.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Typography */
        h1 {
            font-size: clamp(2.5rem, 7vw, 4rem);
            font-weight: 300;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }
        
        h2 {
            font-size: clamp(1.6rem, 4vw, 2.2rem);
            font-weight: 400;
            margin-bottom: 1.5rem;
            color: var(--light);
        }
        
        h3 {
            font-size: 1.3rem;
            font-weight: 500;
            margin: 2rem 0 1rem;
            color: var(--gold);
        }
        
        .kanji {
            font-size: clamp(4rem, 10vw, 7rem);
            font-weight: 300;
            color: var(--gold);
            opacity: 0.7;
            text-shadow: 0 0 60px rgba(212, 175, 55, 0.25);
            animation: breathe 5s ease-in-out infinite;
        }
        
        @keyframes breathe {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }
        
        .subtitle {
            font-size: 1.1rem;
            font-style: italic;
            color: rgba(250, 250, 248, 0.4);
            margin-bottom: 2rem;
        }
        
        p {
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
            color: var(--dim);
        }
        
        p.lead {
            font-size: 1.35rem;
            color: var(--light);
            line-height: 1.7;
        }
        
        p.emphasis {
            color: var(--light);
            font-size: 1.25rem;
        }
        
        .whisper {
            font-size: 1rem;
            font-style: italic;
            color: rgba(250, 250, 248, 0.35);
            text-align: center;
            margin-top: 2rem;
        }
        
        .gold { color: var(--gold); }
        .centered { text-align: center; }
        
        /* Math */
        .equation {
            font-family: 'Space Mono', monospace;
            font-size: 1.05rem;
            text-align: center;
            padding: 1.5rem 1rem;
            color: var(--gold);
            letter-spacing: 0.03em;
            background: rgba(212, 175, 55, 0.05);
            border-left: 2px solid rgba(212, 175, 55, 0.3);
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        
        .equation-inline {
            font-family: 'Space Mono', monospace;
            color: var(--gold);
            font-size: 0.95em;
        }
        
        /* Insight boxes */
        .insight {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.08) 0%, rgba(212, 175, 55, 0.02) 100%);
            border-left: 2px solid rgba(212, 175, 55, 0.4);
            padding: 1.5rem 2rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }
        
        .insight p { margin-bottom: 0; font-size: 1.1rem; }
        
        .physics-note {
            background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, rgba(78, 205, 196, 0.02) 100%);
            border-left: 2px solid rgba(78, 205, 196, 0.5);
            padding: 1.5rem 2rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }
        
        .physics-note h4 {
            color: var(--forge);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }
        
        .physics-note p { margin-bottom: 0; font-size: 1.1rem; }
        
        /* Tables */
        .hierarchy-table {
            width: 100%;
            margin: 2rem 0;
            border-collapse: collapse;
            font-size: 1rem;
        }
        
        .hierarchy-table th,
        .hierarchy-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .hierarchy-table th {
            color: var(--gold);
            font-weight: 500;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
        
        .hierarchy-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .dim-badge {
            display: inline-block;
            background: rgba(212, 175, 55, 0.15);
            color: var(--gold);
            padding: 0.25rem 0.6rem;
            border-radius: 3px;
            font-family: 'Space Mono', monospace;
            font-size: 0.9rem;
        }
        
        /* Scroll indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0.3;
            animation: bob 2.5s ease-in-out infinite;
        }
        
        @keyframes bob {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(12px); }
        }
        
        .scroll-indicator span {
            display: block;
            font-family: 'Space Mono', monospace;
            font-size: 0.65rem;
            letter-spacing: 0.2em;
            margin-bottom: 0.5rem;
        }
        
        .scroll-indicator .arrow {
            width: 14px; height: 14px;
            margin: 0 auto;
            border-right: 1px solid var(--light);
            border-bottom: 1px solid var(--light);
            transform: rotate(45deg);
        }
        
        /* Navigation */
        .nav-dots {
            position: fixed;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .nav-dot {
            width: 8px; height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-dot:hover { background: rgba(255, 255, 255, 0.4); }
        .nav-dot.active { background: var(--gold); }
        
        /* Code blocks */
        code {
            font-family: 'Space Mono', monospace;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-dots { right: 1rem; }
            .section-content { padding: 4rem 1.5rem; }
            .hierarchy-table { font-size: 0.9rem; }
            .hierarchy-table th, .hierarchy-table td { padding: 0.75rem 0.5rem; }
        }
    </style>
</head>
<body>
    <div class="cursor"></div>
    <div class="cursor-dot"></div>
    <div class="grain"></div>
    <div class="progress-bar"></div>
    
    <nav class="nav-dots">
        <div class="nav-dot active" data-section="hero"></div>
        <div class="nav-dot" data-section="symmetry"></div>
        <div class="nav-dot" data-section="lie"></div>
        <div class="nav-dot" data-section="classification"></div>
        <div class="nav-dot" data-section="exceptional"></div>
        <div class="nav-dot" data-section="e8"></div>
        <div class="nav-dot" data-section="hierarchy"></div>
        <div class="nav-dot" data-section="g2"></div>
        <div class="nav-dot" data-section="octonions"></div>
        <div class="nav-dot" data-section="lattice"></div>
        <div class="nav-dot" data-section="end"></div>
    </nav>

    <!-- ==================== HERO ==================== -->
    <section id="hero">
        <canvas class="section-canvas" id="canvas-hero"></canvas>
        <div class="section-content centered">
            <div class="kanji">E‚Çà</div>
            <h1>The Exceptional Hierarchy</h1>
            <p class="subtitle">A physicist's guide to the mathematics behind the architecture</p>
            <p style="margin-top: 2rem; max-width: 500px; margin-left: auto; margin-right: auto;">
                You know quantum mechanics. You've seen SU(2) and maybe SU(3).
                This is the rest of the story ‚Äî the five exceptional Lie algebras
                that don't fit into any infinite family, and why they matter.
            </p>
        </div>
        <div class="scroll-indicator">
            <span>SCROLL</span>
            <div class="arrow"></div>
        </div>
    </section>

    <!-- ==================== SYMMETRY ==================== -->
    <section id="symmetry">
        <canvas class="section-canvas" id="canvas-symmetry"></canvas>
        <div class="section-content">
            <h2>I. What You Already Know</h2>
            
            <p class="lead">
                Let's start with rotations.
            </p>
            
            <p>
                In 3D, you can rotate a vector around any axis. The set of all such rotations
                forms a <em>group</em> ‚Äî you can compose them, there's an identity (do nothing),
                and every rotation has an inverse (rotate the other way).
            </p>
            
            <p>
                This group is called <span class="equation-inline">SO(3)</span>, the "special orthogonal group in 3 dimensions."
                It's a <em>continuous</em> group ‚Äî you can rotate by any angle, not just discrete steps.
            </p>
            
            <div class="physics-note">
                <h4>From Quantum Mechanics</h4>
                <p>
                    You've seen the rotation generators L<sub>x</sub>, L<sub>y</sub>, L<sub>z</sub>
                    and their commutation relations: [L<sub>x</sub>, L<sub>y</sub>] = i‚ÑèL<sub>z</sub> (cyclic).
                    This is the <em>Lie algebra</em> so(3).
                </p>
            </div>
            
            <p>
                The key insight: <strong>continuous symmetries have infinitesimal generators</strong>.
                Instead of asking "what are all the rotations?", you ask "what are the generators,
                and how do they combine?"
            </p>
            
            <p class="whisper">
                This is the game Lie algebras play.
            </p>
        </div>
    </section>

    <!-- ==================== LIE ALGEBRAS ==================== -->
    <section id="lie">
        <canvas class="section-canvas" id="canvas-lie"></canvas>
        <div class="section-content">
            <h2>II. Lie Algebras</h2>
            
            <p class="lead">
                A Lie algebra is a vector space with a special product: the <em>bracket</em>.
            </p>
            
            <div class="equation">
                [X, Y] = -[Y, X]  &nbsp;&nbsp;(antisymmetric)<br><br>
                [X, [Y, Z]] + [Y, [Z, X]] + [Z, [X, Y]] = 0  &nbsp;&nbsp;(Jacobi identity)
            </div>
            
            <p>
                You've seen this in quantum mechanics as the commutator. The Pauli matrices
                œÉ<sub>x</sub>, œÉ<sub>y</sub>, œÉ<sub>z</sub> satisfy exactly this structure
                (up to factors of i and 2). They generate SU(2), the double cover of SO(3).
            </p>
            
            <h3>The Dimension Count</h3>
            
            <p>
                A Lie algebra's <em>dimension</em> is how many independent generators it has.
            </p>
            
            <ul style="margin: 1rem 0 1rem 1.5rem; color: var(--dim);">
                <li>su(2) has <span class="dim-badge">3</span> generators (the Pauli matrices)</li>
                <li>su(3) has <span class="dim-badge">8</span> generators (the Gell-Mann matrices, from QCD)</li>
                <li>so(n) has <span class="dim-badge">n(n-1)/2</span> generators</li>
            </ul>
            
            <div class="insight">
                <p>
                    <strong>Why dimension matters:</strong> In the world model, dimension is
                    the number of independent "directions" information can flow. More dimensions
                    = more expressive power = but also more parameters to learn.
                </p>
            </div>
        </div>
    </section>

    <!-- ==================== CLASSIFICATION ==================== -->
    <section id="classification">
        <canvas class="section-canvas" id="canvas-classification"></canvas>
        <div class="section-content">
            <h2>III. The Classification</h2>
            
            <p class="lead">
                In the 1890s, Wilhelm Killing and √âlie Cartan classified all <em>simple</em>
                Lie algebras ‚Äî the ones that can't be decomposed into smaller pieces.
            </p>
            
            <p>
                They found four infinite families:
            </p>
            
            <table class="hierarchy-table">
                <thead>
                    <tr>
                        <th>Family</th>
                        <th>Name</th>
                        <th>Dimension</th>
                        <th>Physics</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>A<sub>n</sub></td>
                        <td>su(n+1)</td>
                        <td>n¬≤ + 2n</td>
                        <td>SU(2) for spin, SU(3) for QCD</td>
                    </tr>
                    <tr>
                        <td>B<sub>n</sub></td>
                        <td>so(2n+1)</td>
                        <td>n(2n+1)</td>
                        <td>Odd-dim rotations</td>
                    </tr>
                    <tr>
                        <td>C<sub>n</sub></td>
                        <td>sp(n)</td>
                        <td>n(2n+1)</td>
                        <td>Symplectic, canonical transformations</td>
                    </tr>
                    <tr>
                        <td>D<sub>n</sub></td>
                        <td>so(2n)</td>
                        <td>n(2n-1)</td>
                        <td>Even-dim rotations, spinors</td>
                    </tr>
                </tbody>
            </table>
            
            <p>
                These account for almost everything. But "almost" is doing a lot of work.
            </p>
            
            <p class="emphasis">
                There are exactly five more. They don't fit into any infinite pattern.
                They exist in isolation, like undiscovered elements.
            </p>
            
            <p class="whisper">
                The exceptionals.
            </p>
        </div>
    </section>

    <!-- ==================== THE FIVE ==================== -->
    <section id="exceptional">
        <canvas class="section-canvas" id="canvas-exceptional"></canvas>
        <div class="section-content">
            <h2>IV. The Five Exceptional Algebras</h2>
            
            <table class="hierarchy-table">
                <thead>
                    <tr>
                        <th>Algebra</th>
                        <th>Dimension</th>
                        <th>Roots</th>
                        <th>What It Is</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="color: var(--gold);">E‚Çà</td>
                        <td><span class="dim-badge">248</span></td>
                        <td>240</td>
                        <td>The largest. Self-dual. The end of the line.</td>
                    </tr>
                    <tr>
                        <td style="color: var(--gold);">E‚Çá</td>
                        <td><span class="dim-badge">133</span></td>
                        <td>126</td>
                        <td>Freudenthal triple system. 56-dim rep.</td>
                    </tr>
                    <tr>
                        <td style="color: var(--gold);">E‚ÇÜ</td>
                        <td><span class="dim-badge">78</span></td>
                        <td>72</td>
                        <td>Has complex structure. 27-dim rep.</td>
                    </tr>
                    <tr>
                        <td style="color: var(--gold);">F‚ÇÑ</td>
                        <td><span class="dim-badge">52</span></td>
                        <td>48</td>
                        <td>Automorphisms of the Albert algebra.</td>
                    </tr>
                    <tr>
                        <td style="color: var(--gold);">G‚ÇÇ</td>
                        <td><span class="dim-badge">14</span></td>
                        <td>12</td>
                        <td>Automorphisms of the octonions.</td>
                    </tr>
                </tbody>
            </table>
            
            <h3>Where Do These Numbers Come From?</h3>
            
            <p>
                Every Lie algebra has a <em>root system</em> ‚Äî a geometric object that encodes
                its structure. The dimension formula is:
            </p>
            
            <div class="equation">
                dim(ùî§) = rank + 2 √ó (number of positive roots)
            </div>
            
            <p>
                For E‚Çà: rank is 8, positive roots is 120, so dim = 8 + 2√ó120 = <strong>248</strong>.
            </p>
            
            <div class="physics-note">
                <h4>Analogy to Particle Physics</h4>
                <p>
                    If su(3) with 8 generators gives you 8 gluons,
                    E‚Çà with 248 generators would give you 248 "gauge bosons."
                    This is why E‚Çà appeared in some grand unified theories.
                </p>
            </div>
        </div>
    </section>

    <!-- ==================== E8 ==================== -->
    <section id="e8">
        <canvas class="section-canvas" id="canvas-e8"></canvas>
        <div class="section-content">
            <h2>V. E‚Çà ‚Äî The Largest</h2>
            
            <p class="lead">
                E‚Çà is the endpoint. You can't make a bigger exceptional algebra.
            </p>
            
            <p>
                It has 248 dimensions, which decompose as:
            </p>
            
            <ul style="margin: 1rem 0 1rem 1.5rem; color: var(--dim);">
                <li><strong>8 Cartan generators</strong> ‚Äî the "diagonal" directions, like choosing which axis to measure spin on</li>
                <li><strong>240 root generators</strong> ‚Äî the "raising and lowering operators," like œÉ<sub>+</sub> and œÉ<sub>-</sub> for spin</li>
            </ul>
            
            <p>
                The 240 roots live in 8-dimensional space and form a beautiful geometric object:
                each root touches exactly 56 others, they're maximally spread out, and the whole
                thing is symmetric under 696,729,600 transformations.
            </p>
            
            <div class="insight">
                <p>
                    <strong>E‚Çà is self-dual.</strong> Its adjoint representation (248) is also its
                    fundamental representation. There's no simpler rep to work with ‚Äî E‚Çà <em>is</em>
                    its own simplest description.
                </p>
            </div>
            
            <p>
                This is rare. SU(3) has an 8-dimensional adjoint but a 3-dimensional fundamental.
                E‚Çà has nothing smaller than itself.
            </p>
        </div>
    </section>

    <!-- ==================== THE CHAIN ==================== -->
    <section id="hierarchy">
        <canvas class="section-canvas" id="canvas-hierarchy"></canvas>
        <div class="section-content">
            <h2>VI. The Descent</h2>
            
            <p class="lead">
                The exceptional algebras nest inside each other like Russian dolls.
            </p>
            
            <div class="equation">
                E‚Çà(248) ‚Üí E‚Çá(133) ‚Üí E‚ÇÜ(78) ‚Üí F‚ÇÑ(52) ‚Üí G‚ÇÇ(14) ‚Üí S‚Å∑(7)
            </div>
            
            <p>
                Each arrow is a <em>projection</em> ‚Äî a way of taking a larger algebra and
                extracting a smaller one that sits inside it.
            </p>
            
            <h3>What "Sits Inside" Means</h3>
            
            <p>
                Mathematically, E‚Çá is a subalgebra of E‚Çà. The 133 generators of E‚Çá are
                specific linear combinations of the 248 generators of E‚Çà.
            </p>
            
            <p>
                The projection E‚Çà ‚Üí E‚Çá has a specific <em>branching rule</em>:
            </p>
            
            <div class="equation">
                E‚Çà ‚Üí E‚Çá √ó SU(2):  248 = (133,1) ‚äï (56,2) ‚äï (1,3)
            </div>
            
            <p>
                This says: the 248-dimensional E‚Çà rep breaks into pieces when you restrict to
                E‚Çá √ó SU(2). The (133,1) piece is E‚Çá's adjoint. The rest is "orthogonal" to E‚Çá.
            </p>
            
            <div class="physics-note">
                <h4>Physics Analogy</h4>
                <p>
                    This is like breaking SO(3) symmetry. A spin-2 particle (5 states) becomes
                    m = -2, -1, 0, 1, 2 when you pick a quantization axis. The symmetry
                    "breaks" into pieces aligned with your choice.
                </p>
            </div>
        </div>
    </section>

    <!-- ==================== G2 ==================== -->
    <section id="g2">
        <canvas class="section-canvas" id="canvas-g2"></canvas>
        <div class="section-content">
            <h2>VII. G‚ÇÇ ‚Äî The Smallest</h2>
            
            <p class="lead">
                At the bottom of the exceptional hierarchy sits G‚ÇÇ, with just 14 dimensions.
            </p>
            
            <p>
                G‚ÇÇ is special because it's the <em>automorphism group of the octonions</em>.
            </p>
            
            <p>
                What does that mean? The octonions are an 8-dimensional number system
                (we'll get to them shortly). G‚ÇÇ is the set of all transformations that
                preserve the multiplication table of the octonions.
            </p>
            
            <h3>The Dimension Formula</h3>
            
            <p>
                G‚ÇÇ has rank 2 (a 2D "Cartan" subspace) and 6 positive roots:
            </p>
            
            <div class="equation">
                dim(G‚ÇÇ) = 2 + 2√ó6 = 14
            </div>
            
            <p>
                The 12 roots (6 positive, 6 negative) form a hexagonal pattern in 2D ‚Äî
                actually, two interlocking hexagons at different scales.
            </p>
            
            <div class="insight">
                <p>
                    <strong>Why G‚ÇÇ is the bottom:</strong> Below G‚ÇÇ is S‚Å∑, the 7-sphere.
                    This is a <em>manifold</em>, not a Lie algebra. The hierarchy ends
                    because you've reached geometry ‚Äî the space the octonions live in.
                </p>
            </div>
        </div>
    </section>

    <!-- ==================== OCTONIONS ==================== -->
    <section id="octonions">
        <canvas class="section-canvas" id="canvas-octonions"></canvas>
        <div class="section-content">
            <h2>VIII. The Octonions</h2>
            
            <p class="lead">
                Why does the chain end at 7?
            </p>
            
            <p>
                There are exactly four <em>normed division algebras</em>:
            </p>
            
            <table class="hierarchy-table">
                <thead>
                    <tr>
                        <th>Algebra</th>
                        <th>Dimension</th>
                        <th>Properties</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>‚Ñù (reals)</td>
                        <td><span class="dim-badge">1</span></td>
                        <td>Commutative, associative, ordered</td>
                    </tr>
                    <tr>
                        <td>‚ÑÇ (complex)</td>
                        <td><span class="dim-badge">2</span></td>
                        <td>Commutative, associative</td>
                    </tr>
                    <tr>
                        <td>‚Ñç (quaternions)</td>
                        <td><span class="dim-badge">4</span></td>
                        <td>Associative, not commutative</td>
                    </tr>
                    <tr>
                        <td>ùïÜ (octonions)</td>
                        <td><span class="dim-badge">8</span></td>
                        <td>Not associative, not commutative</td>
                    </tr>
                </tbody>
            </table>
            
            <p>
                This is a <em>theorem</em>. You cannot construct a 16-dimensional division algebra.
                The sequence 1, 2, 4, 8 stops.
            </p>
            
            <h3>The Seven Imaginary Directions</h3>
            
            <p>
                An octonion has one real part and <strong>seven</strong> imaginary parts:
            </p>
            
            <div class="equation">
                o = a‚ÇÄ + a‚ÇÅe‚ÇÅ + a‚ÇÇe‚ÇÇ + a‚ÇÉe‚ÇÉ + a‚ÇÑe‚ÇÑ + a‚ÇÖe‚ÇÖ + a‚ÇÜe‚ÇÜ + a‚Çáe‚Çá
            </div>
            
            <p>
                The seven imaginary units e‚ÇÅ through e‚Çá span a 7-dimensional space.
                Unit octonions (those with |o| = 1) form the 7-sphere S‚Å∑.
            </p>
            
            <div class="physics-note">
                <h4>Adams' Theorem (1960)</h4>
                <p>
                    The only spheres that are "parallelizable" (have a globally consistent
                    coordinate system everywhere) are S¬π, S¬≥, and S‚Å∑. This corresponds
                    exactly to complex numbers, quaternions, and octonions.
                </p>
            </div>
            
            <p>
                This is why the architecture uses 7 colonies ‚Äî one for each imaginary direction
                of the octonions. It's not a design choice. It's the only option that has
                full parallelizability.
            </p>
        </div>
    </section>

    <!-- ==================== THE LATTICE ==================== -->
    <section id="lattice">
        <canvas class="section-canvas" id="canvas-lattice"></canvas>
        <div class="section-content">
            <h2>IX. The E‚Çà Lattice</h2>
            
            <p class="lead">
                E‚Çà appears <em>twice</em> in this story ‚Äî as a Lie algebra (248D) and as a lattice (8D).
            </p>
            
            <p>
                The E‚Çà <em>lattice</em> is a discrete structure in 8-dimensional space.
                Its points are all vectors of the form:
            </p>
            
            <div class="equation">
                (x‚ÇÅ, x‚ÇÇ, ..., x‚Çà) where all x·µ¢ ‚àà ‚Ñ§ or all x·µ¢ ‚àà ‚Ñ§+¬Ω, and Œ£x·µ¢ is even
            </div>
            
            <p>
                The 240 <em>roots</em> are the lattice points closest to the origin (distance ‚àö2).
            </p>
            
            <h3>Viazovska's Theorem (Fields Medal 2022)</h3>
            
            <p>
                In 2016, Maryna Viazovska proved that the E‚Çà lattice is the <em>densest
                possible sphere packing</em> in 8 dimensions. No other arrangement of spheres
                can do better.
            </p>
            
            <div class="equation">
                Œî‚Çà = œÄ‚Å¥/384 ‚âà 0.25367
            </div>
            
            <p>
                This wasn't just a clever construction ‚Äî it's <em>optimal</em>. Mathematically proven.
            </p>
            
            <div class="insight">
                <p>
                    <strong>For the architecture:</strong> The E‚Çà lattice is used for <em>quantization</em>.
                    When you compress a continuous 8D vector to discrete states, the 240 E‚Çà roots
                    are the optimal "vocabulary." They're as spread out as possible in 8D.
                </p>
            </div>
            
            <p>
                The Lie algebra E‚Çà (248D) is at the <em>top</em> of the hierarchy.
                The E‚Çà lattice (8D, 240 roots) is at the <em>bottom</em>, for discretization.
            </p>
        </div>
    </section>

    <!-- ==================== END ==================== -->
    <section id="end">
        <canvas class="section-canvas" id="canvas-end"></canvas>
        <div class="section-content centered">
            <h2>The Full Picture</h2>
            
            <div class="equation" style="font-size: 1.15rem; line-height: 2;">
                E‚Çà(248) ‚Üí E‚Çá(133) ‚Üí E‚ÇÜ(78) ‚Üí F‚ÇÑ(52) ‚Üí G‚ÇÇ(14) ‚Üí S‚Å∑(7)<br><br>
                ‚Üì (at the bottleneck)<br><br>
                E‚Çà lattice: 240 discrete states
            </div>
            
            <p style="margin-top: 2rem;">
                The exceptional hierarchy is a compression funnel.
                Each level preserves structure while reducing dimension.
                At the bottom, continuous becomes discrete.
            </p>
            
            <p>
                These aren't design choices. The dimensions are <em>forced</em> by mathematics.
                The only Lie algebras that can exist outside the classical families are these five.
                The only division algebra beyond the quaternions is the octonions, with 7 imaginary units.
                The densest sphere packing in 8D is E‚Çà.
            </p>
            
            <div class="insight" style="text-align: left; margin-top: 2.5rem;">
                <p>
                    <strong>What this gives the architecture:</strong><br><br>
                    ‚Ä¢ Structure-preserving compression from high to low dimensions<br>
                    ‚Ä¢ A natural "grammar" (G‚ÇÇ) for combining the 7 colony states<br>
                    ‚Ä¢ Optimal quantization at the bottleneck (E‚Çà lattice)<br>
                    ‚Ä¢ Mathematical guarantees, not heuristics
                </p>
            </div>
            
            <p class="whisper" style="margin-top: 3rem;">
                The mathematics was always there. We just built around it.
            </p>
        </div>
    </section>

    <script>
        // ==================== CURSOR ====================
        const cursor = document.querySelector('.cursor');
        const cursorDot = document.querySelector('.cursor-dot');
        let mouseX = 0, mouseY = 0, cursorX = 0, cursorY = 0;
        
        document.addEventListener('mousemove', e => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });
        
        function animateCursor() {
            cursorX += (mouseX - cursorX) * 0.12;
            cursorY += (mouseY - cursorY) * 0.12;
            cursor.style.left = cursorX - 12 + 'px';
            cursor.style.top = cursorY - 12 + 'px';
            cursorDot.style.left = mouseX - 2 + 'px';
            cursorDot.style.top = mouseY - 2 + 'px';
            requestAnimationFrame(animateCursor);
        }
        animateCursor();
        
        // ==================== PROGRESS ====================
        const progressBar = document.querySelector('.progress-bar');
        window.addEventListener('scroll', () => {
            const progress = (window.scrollY / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
            progressBar.style.width = progress + '%';
        });
        
        // ==================== NAVIGATION ====================
        const sections = document.querySelectorAll('section');
        const navDots = document.querySelectorAll('.nav-dot');
        
        const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.querySelector('.section-content')?.classList.add('visible');
                    navDots.forEach(dot => {
                        dot.classList.toggle('active', dot.dataset.section === entry.target.id);
                    });
                }
            });
        }, { threshold: 0.35 });
        
        sections.forEach(s => observer.observe(s));
        navDots.forEach(dot => {
            dot.addEventListener('click', () => {
                document.getElementById(dot.dataset.section)?.scrollIntoView({ behavior: 'smooth' });
            });
        });
        
        // ==================== CANVAS SETUP ====================
        function setupCanvas(id) {
            const canvas = document.getElementById(id);
            if (!canvas) return null;
            const ctx = canvas.getContext('2d');
            const resize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
            resize();
            window.addEventListener('resize', resize);
            return { canvas, ctx };
        }
        
        // ==================== HERO: E8 projection ====================
        const hero = setupCanvas('canvas-hero');
        if (hero) {
            const { canvas, ctx } = hero;
            
            // Generate 240 E8 roots projected to 2D
            const roots = [];
            // Type 1: permutations of (¬±1, ¬±1, 0, 0, 0, 0, 0, 0) - simplified for viz
            for (let i = 0; i < 240; i++) {
                const phi = i * Math.PI * 2 * (1 + Math.sqrt(5)) / 2;
                const theta = Math.acos(1 - 2 * (i + 0.5) / 240);
                roots.push({
                    x: Math.sin(theta) * Math.cos(phi),
                    y: Math.sin(theta) * Math.sin(phi),
                    z: Math.cos(theta),
                    phase: Math.random() * Math.PI * 2
                });
            }
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;
                const scale = Math.min(canvas.width, canvas.height) * 0.3;
                
                roots.forEach((r, i) => {
                    const rotY = t * 0.0001;
                    const x = r.x * Math.cos(rotY) - r.z * Math.sin(rotY);
                    const z = r.x * Math.sin(rotY) + r.z * Math.cos(rotY);
                    
                    const perspective = 1 / (1.5 - z * 0.3);
                    const px = cx + x * scale * perspective;
                    const py = cy + r.y * scale * perspective;
                    
                    const alpha = 0.2 + z * 0.15 + Math.sin(t * 0.002 + r.phase) * 0.1;
                    ctx.fillStyle = `rgba(212, 175, 55, ${alpha})`;
                    ctx.beginPath();
                    ctx.arc(px, py, 2 * perspective, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== SYMMETRY: Rotating cube ====================
        const symCanvas = setupCanvas('canvas-symmetry');
        if (symCanvas) {
            const { canvas, ctx } = symCanvas;
            
            const vertices = [
                [-1,-1,-1], [1,-1,-1], [1,1,-1], [-1,1,-1],
                [-1,-1,1], [1,-1,1], [1,1,1], [-1,1,1]
            ];
            const edges = [
                [0,1],[1,2],[2,3],[3,0],
                [4,5],[5,6],[6,7],[7,4],
                [0,4],[1,5],[2,6],[3,7]
            ];
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.06)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;
                const scale = Math.min(canvas.width, canvas.height) * 0.1;
                
                const rotX = t * 0.0003;
                const rotY = t * 0.0005;
                
                const projected = vertices.map(([x, y, z]) => {
                    let x1 = x * Math.cos(rotY) - z * Math.sin(rotY);
                    let z1 = x * Math.sin(rotY) + z * Math.cos(rotY);
                    let y1 = y * Math.cos(rotX) - z1 * Math.sin(rotX);
                    let z2 = y * Math.sin(rotX) + z1 * Math.cos(rotX);
                    return [cx + x1 * scale, cy + y1 * scale];
                });
                
                ctx.strokeStyle = 'rgba(212, 175, 55, 0.3)';
                ctx.lineWidth = 1;
                edges.forEach(([a, b]) => {
                    ctx.beginPath();
                    ctx.moveTo(projected[a][0], projected[a][1]);
                    ctx.lineTo(projected[b][0], projected[b][1]);
                    ctx.stroke();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== LIE: Commutator brackets ====================
        const lieCanvas = setupCanvas('canvas-lie');
        if (lieCanvas) {
            const { canvas, ctx } = lieCanvas;
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width / 2;
                const cy = canvas.height / 2;
                
                // Three rotating arrows representing generators
                for (let i = 0; i < 3; i++) {
                    const baseAngle = (i / 3) * Math.PI * 2 + t * 0.0005;
                    const len = 80;
                    const x1 = cx + Math.cos(baseAngle) * 30;
                    const y1 = cy + Math.sin(baseAngle) * 30;
                    const x2 = x1 + Math.cos(baseAngle + t * 0.001) * len;
                    const y2 = y1 + Math.sin(baseAngle + t * 0.001) * len;
                    
                    ctx.strokeStyle = `rgba(212, 175, 55, ${0.3 + i * 0.1})`;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(x1, y1);
                    ctx.lineTo(x2, y2);
                    ctx.stroke();
                    
                    ctx.fillStyle = `rgba(212, 175, 55, ${0.5 + i * 0.15})`;
                    ctx.beginPath();
                    ctx.arc(x2, y2, 4, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== CLASSIFICATION: Grid of points ====================
        const classCanvas = setupCanvas('canvas-classification');
        if (classCanvas) {
            const { canvas, ctx } = classCanvas;
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.03)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Grid representing classical families
                const spacing = 40;
                for (let x = spacing; x < canvas.width; x += spacing) {
                    for (let y = spacing; y < canvas.height; y += spacing) {
                        const dist = Math.sqrt((x - canvas.width/2)**2 + (y - canvas.height/2)**2);
                        const alpha = Math.max(0, 0.15 - dist / 1000);
                        ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                        ctx.beginPath();
                        ctx.arc(x, y, 1.5, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
                
                // Five exceptional points
                const exceptionals = [
                    { x: canvas.width * 0.3, y: canvas.height * 0.4 },
                    { x: canvas.width * 0.7, y: canvas.height * 0.35 },
                    { x: canvas.width * 0.5, y: canvas.height * 0.6 },
                    { x: canvas.width * 0.35, y: canvas.height * 0.7 },
                    { x: canvas.width * 0.65, y: canvas.height * 0.65 }
                ];
                
                exceptionals.forEach((p, i) => {
                    const pulse = 4 + Math.sin(t * 0.003 + i) * 2;
                    ctx.fillStyle = 'rgba(212, 175, 55, 0.6)';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, pulse, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== EXCEPTIONAL: Five pulsing points ====================
        const excCanvas = setupCanvas('canvas-exceptional');
        if (excCanvas) {
            const { canvas, ctx } = excCanvas;
            
            const algebras = [
                { name: 'E‚Çà', dim: 248, y: 0.2 },
                { name: 'E‚Çá', dim: 133, y: 0.35 },
                { name: 'E‚ÇÜ', dim: 78, y: 0.5 },
                { name: 'F‚ÇÑ', dim: 52, y: 0.65 },
                { name: 'G‚ÇÇ', dim: 14, y: 0.8 }
            ];
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                algebras.forEach((a, i) => {
                    const x = canvas.width * 0.15;
                    const y = canvas.height * a.y;
                    const radius = Math.sqrt(a.dim) * 1.2;
                    
                    const pulse = 1 + Math.sin(t * 0.002 + i) * 0.1;
                    
                    ctx.strokeStyle = 'rgba(212, 175, 55, 0.3)';
                    ctx.beginPath();
                    ctx.arc(x, y, radius * pulse, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    ctx.fillStyle = 'rgba(212, 175, 55, 0.15)';
                    ctx.beginPath();
                    ctx.arc(x, y, radius * pulse, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== E8: Root system ====================
        const e8Canvas = setupCanvas('canvas-e8');
        if (e8Canvas) {
            const { canvas, ctx } = e8Canvas;
            
            // 240 roots on sphere
            const points = [];
            for (let i = 0; i < 240; i++) {
                const phi = Math.acos(1 - 2 * (i + 0.5) / 240);
                const theta = Math.PI * (1 + Math.sqrt(5)) * i;
                points.push({ theta, phi, phase: Math.random() * Math.PI * 2 });
            }
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width * 0.75;
                const cy = canvas.height / 2;
                const radius = Math.min(canvas.width, canvas.height) * 0.25;
                
                points.forEach((p, i) => {
                    const rotatedTheta = p.theta + t * 0.00015;
                    const x = Math.sin(p.phi) * Math.cos(rotatedTheta);
                    const y = Math.sin(p.phi) * Math.sin(rotatedTheta);
                    const z = Math.cos(p.phi);
                    
                    const scale = 1 / (1.5 - z * 0.3);
                    const px = cx + x * radius * scale;
                    const py = cy + y * radius * scale;
                    
                    const brightness = 0.25 + z * 0.2;
                    ctx.fillStyle = `rgba(212, 175, 55, ${brightness})`;
                    ctx.beginPath();
                    ctx.arc(px, py, 2 * scale, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== HIERARCHY: Compression funnel ====================
        const hierCanvas = setupCanvas('canvas-hierarchy');
        if (hierCanvas) {
            const { canvas, ctx } = hierCanvas;
            
            const levels = [248, 133, 78, 52, 14, 7];
            const particles = [];
            
            for (let i = 0; i < 60; i++) {
                particles.push({
                    y: Math.random(),
                    x: Math.random() * 0.5 + 0.25,
                    speed: 0.0002 + Math.random() * 0.0002
                });
            }
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width * 0.7;
                
                // Draw funnel shape
                levels.forEach((dim, i) => {
                    const y = (i / (levels.length - 1)) * canvas.height * 0.8 + canvas.height * 0.1;
                    const width = Math.sqrt(dim) * 8;
                    
                    ctx.strokeStyle = 'rgba(212, 175, 55, 0.2)';
                    ctx.beginPath();
                    ctx.moveTo(cx - width, y);
                    ctx.lineTo(cx + width, y);
                    ctx.stroke();
                });
                
                // Particles flowing down
                particles.forEach(p => {
                    p.y += p.speed;
                    if (p.y > 1) {
                        p.y = 0;
                        p.x = Math.random() * 0.5 + 0.25;
                    }
                    
                    const levelIdx = Math.floor(p.y * levels.length);
                    const dim = levels[Math.min(levelIdx, levels.length - 1)];
                    const maxWidth = Math.sqrt(dim) * 8 / (canvas.width * 0.3);
                    
                    p.x = 0.5 + (p.x - 0.5) * (maxWidth / 0.5);
                    
                    const px = cx + (p.x - 0.5) * Math.sqrt(dim) * 16;
                    const py = p.y * canvas.height * 0.8 + canvas.height * 0.1;
                    
                    ctx.fillStyle = 'rgba(212, 175, 55, 0.4)';
                    ctx.beginPath();
                    ctx.arc(px, py, 2, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== G2: Root hexagon ====================
        const g2Canvas = setupCanvas('canvas-g2');
        if (g2Canvas) {
            const { canvas, ctx } = g2Canvas;
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width * 0.7;
                const cy = canvas.height / 2;
                const r1 = 60; // short roots
                const r2 = 100; // long roots
                
                // Short roots (inner hexagon)
                ctx.strokeStyle = 'rgba(212, 175, 55, 0.3)';
                ctx.beginPath();
                for (let i = 0; i < 6; i++) {
                    const angle = (i / 6) * Math.PI * 2 + t * 0.0003;
                    const x = cx + Math.cos(angle) * r1;
                    const y = cy + Math.sin(angle) * r1;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
                
                // Long roots (outer hexagon, rotated 30¬∞)
                ctx.beginPath();
                for (let i = 0; i < 6; i++) {
                    const angle = (i / 6) * Math.PI * 2 + Math.PI / 6 + t * 0.0003;
                    const x = cx + Math.cos(angle) * r2;
                    const y = cy + Math.sin(angle) * r2;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
                
                // Root points
                for (let i = 0; i < 6; i++) {
                    const angle1 = (i / 6) * Math.PI * 2 + t * 0.0003;
                    const angle2 = angle1 + Math.PI / 6;
                    
                    ctx.fillStyle = 'rgba(212, 175, 55, 0.6)';
                    ctx.beginPath();
                    ctx.arc(cx + Math.cos(angle1) * r1, cy + Math.sin(angle1) * r1, 4, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.beginPath();
                    ctx.arc(cx + Math.cos(angle2) * r2, cy + Math.sin(angle2) * r2, 4, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== OCTONIONS: 7 orbiting points ====================
        const octCanvas = setupCanvas('canvas-octonions');
        if (octCanvas) {
            const { canvas, ctx } = octCanvas;
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.04)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width * 0.75;
                const cy = canvas.height / 2;
                const r = 100;
                
                // Center point (e‚ÇÄ)
                ctx.fillStyle = 'rgba(212, 175, 55, 0.8)';
                ctx.beginPath();
                ctx.arc(cx, cy, 8, 0, Math.PI * 2);
                ctx.fill();
                
                // 7 imaginary units orbiting
                for (let i = 0; i < 7; i++) {
                    const angle = (i / 7) * Math.PI * 2 + t * 0.0004;
                    const x = cx + Math.cos(angle) * r;
                    const y = cy + Math.sin(angle) * r;
                    
                    // Trail
                    for (let j = 0; j < 15; j++) {
                        const ta = angle - j * 0.04;
                        const tx = cx + Math.cos(ta) * r;
                        const ty = cy + Math.sin(ta) * r;
                        const alpha = (15 - j) / 15 * 0.2;
                        ctx.fillStyle = `rgba(212, 175, 55, ${alpha})`;
                        ctx.beginPath();
                        ctx.arc(tx, ty, 2, 0, Math.PI * 2);
                        ctx.fill();
                    }
                    
                    ctx.fillStyle = 'rgba(250, 250, 248, 0.7)';
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== LATTICE: Sphere packing ====================
        const latticeCanvas = setupCanvas('canvas-lattice');
        if (latticeCanvas) {
            const { canvas, ctx } = latticeCanvas;
            
            const spheres = [];
            const gridSize = 6;
            const spacing = 50;
            
            for (let i = 0; i < gridSize; i++) {
                for (let j = 0; j < gridSize; j++) {
                    spheres.push({
                        x: (i - gridSize/2) * spacing,
                        y: (j - gridSize/2) * spacing,
                        z: ((i + j) % 2) * spacing * 0.3,
                        phase: Math.random() * Math.PI * 2
                    });
                }
            }
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const cx = canvas.width * 0.7;
                const cy = canvas.height / 2;
                
                spheres.forEach(s => {
                    const rotY = t * 0.0002;
                    const x = s.x * Math.cos(rotY) - s.z * Math.sin(rotY);
                    const z = s.x * Math.sin(rotY) + s.z * Math.cos(rotY);
                    
                    const scale = 1 / (1.5 - z / 200);
                    const px = cx + x * scale;
                    const py = cy + s.y * scale;
                    const r = 18 * scale;
                    
                    const grad = ctx.createRadialGradient(px - r/3, py - r/3, 0, px, py, r);
                    grad.addColorStop(0, 'rgba(212, 175, 55, 0.4)');
                    grad.addColorStop(1, 'rgba(212, 175, 55, 0.1)');
                    
                    ctx.fillStyle = grad;
                    ctx.beginPath();
                    ctx.arc(px, py, r, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
        
        // ==================== END: Full hierarchy ====================
        const endCanvas = setupCanvas('canvas-end');
        if (endCanvas) {
            const { canvas, ctx } = endCanvas;
            
            function draw(t) {
                ctx.fillStyle = 'rgba(10, 10, 12, 0.03)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const levels = [248, 133, 78, 52, 14, 7];
                const cx = canvas.width / 2;
                
                levels.forEach((dim, i) => {
                    const y = (i / (levels.length - 1)) * canvas.height * 0.7 + canvas.height * 0.15;
                    const width = Math.sqrt(dim) * 6;
                    const pulse = 1 + Math.sin(t * 0.002 + i * 0.5) * 0.1;
                    
                    ctx.strokeStyle = `rgba(212, 175, 55, ${0.15 + i * 0.03})`;
                    ctx.beginPath();
                    ctx.arc(cx, y, width * pulse, 0, Math.PI * 2);
                    ctx.stroke();
                });
                
                // Connections
                ctx.strokeStyle = 'rgba(212, 175, 55, 0.1)';
                for (let i = 0; i < levels.length - 1; i++) {
                    const y1 = (i / (levels.length - 1)) * canvas.height * 0.7 + canvas.height * 0.15;
                    const y2 = ((i + 1) / (levels.length - 1)) * canvas.height * 0.7 + canvas.height * 0.15;
                    ctx.beginPath();
                    ctx.moveTo(cx, y1);
                    ctx.lineTo(cx, y2);
                    ctx.stroke();
                }
                
                requestAnimationFrame(draw);
            }
            draw(0);
        }
    </script>
</body>
</html>
